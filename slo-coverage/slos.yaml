slos:
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: View transactions (merchant update) - Availability
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-transactions
        deployed-from:
        - anzx/fabric-transactions
        slo-type:
        - availability
        team-name:
        - fab-transactions
        user-journey:
        - view-transactions-merchant-update-availability
      name: anzx-view-transactions-merchant-update-availability
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://confluence.service.anz/display/ABT/View+transactions
      budgetingMethod: Occurrences
      composite:
        burnRateCondition:
          op: gt
          value: 1
        target: 0.99
      description: Runbook - https://backstage.service.anz/docs/default/component/fabric-sre-runbooks/critical-user-journey/view-transactions/
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"fabric-merchant-update-prod\"\nmessage=\"*Finished
                with status code: 200\"\n| bin _time span=1m \n| stats count as n9value
                by _time\n| union \n    [| tstats count as n9value where index=* by
                _time span=1m\n    | eval n9value=0]\n    | stats max(n9value) as n9value
                by _time\n| rename _time as n9time\n| fields n9value, n9time"
          incremental: false
          total:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"fabric-merchant-update-prod\"\nmessage=\"*Finished
                with status code:*\"\n| bin _time span=1m \n| stats count as n9value
                by _time\n| union \n    [| tstats count as n9value where index=* by
                _time span=1m\n    | eval n9value=0]\n    | stats max(n9value) as n9value
                by _time\n| rename _time as n9time\n| fields n9value, n9time"
        displayName: Webhook
        name: merchant-update-webhook
        target: 0.99
        value: 1
      - countMetrics:
          good:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"dexter-merchant-update-pipeline-*\"\nstep=\"Fetch
                LWC updates/Call search API\"\nmessage=\"Successful LWC response received
                for LWC guid*\"\n| bin _time span=1m \n| stats count as n9value by _time\n|
                union \n    [| tstats count as n9value where index=* by _time span=1m\n
                \   | eval n9value=0]\n    | stats max(n9value) as n9value by _time\n|
                rename _time as n9time\n| fields n9value, n9time"
          incremental: false
          total:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"dexter-merchant-update-pipeline-*\"\nstep=\"Fetch
                LWC updates/Call search API\"\nmessage IN (\"Failed request not eligible
                for retry or retry count has exhausted. Adding to failed tag.\", \"Successful
                LWC response received for LWC guid*\")\n| bin _time span=1m \n| stats
                count as n9value by _time\n| union \n    [| tstats count as n9value
                where index=* by _time span=1m\n    | eval n9value=0]\n    | stats max(n9value)
                as n9value by _time\n| rename _time as n9time\n| fields n9value, n9time"
        displayName: Search API
        name: merchant-update-search-api
        target: 0.99
        value: 2
      - countMetrics:
          good:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"dexter-merchant-update-pipeline-*\"\nstep=\"Execute
                partitioned DML queries to spanner\"\nmessage IN (\"Processing DB updates
                for eventType:*\", \"Some DB queries have failed. Writing failed queries
                to failure tag.\")\n| eval total=if(like(message, \"Processing DB updates
                for eventType:%\"),1,0)\n| eval bad=if(like(message, \"Some DB queries
                have failed. Writing failed queries to failure tag.\"),1,0)\n| eval
                good=sum(total)-sum(bad)\n| bin _time span=1m\n| stats count(good) as
                n9value by _time\n| union \n    [| tstats count as n9value where index=*
                by _time span=1m\n    | eval n9value=0]\n    | stats max(n9value) as
                n9value by _time\n| rename _time as n9time\n| fields n9value, n9time"
          incremental: false
          total:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"dexter-merchant-update-pipeline-*\"\nstep=\"Execute
                partitioned DML queries to spanner\"\nmessage=\"Processing DB updates
                for eventType:*\"\n| bin _time span=1m \n| stats count as n9value by
                _time\n| union \n    [| tstats count as n9value where index=* by _time
                span=1m\n    | eval n9value=0]\n    | stats max(n9value) as n9value
                by _time\n| rename _time as n9time\n| fields n9value, n9time"
        displayName: Write to Spanner
        name: merchant-update-write-to-spanner
        target: 0.99
        value: 3
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:48:01Z"
          end: "2023-03-16T10:48:01Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: Entitlements - EntitledCard - Latency
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-entitlements
        deployed-from:
        - anzx/fabric-sre-cloud-monitoring
        slo-type:
        - latency
        team-name:
        - fabric-entitlements
        user-journey:
        - manage-entitled-cards
      name: anzx-entitlement-entitledcard-latency
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://backstage.service.anz/docs/default/component/fabric-entitlements/customerjourneys/
      budgetingMethod: Occurrences
      description: Runbook - https://backstage.service.anz/docs/default/component/fabric-sre-runbooks/entitlements/entitlements-runbook/
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: |-
                index="fabric_events_prod"
                sourcetype="entitlements"
                attributes.rpc.method IN ("ListEntitledCards", "GetEntitledCard")
                attributes.rpc.grpc.status_code=0
                attributes.rpc.server.duration.ttfb < 500
                | bin _time span=1m
                | stats count as n9value by _time
                | union
                [| tstats count as n9value where index=* by _time span=1m
                | eval n9value=0]
                | stats max(n9value) as n9value by _time
                | rename _time as n9time
                | fields n9value, n9time
          incremental: false
          total:
            splunk:
              query: |-
                index="fabric_events_prod"
                sourcetype="entitlements"
                attributes.rpc.method IN ("ListEntitledCards", "GetEntitledCard")
                attributes.rpc.grpc.status_code=0
                | bin _time span=1m
                | stats count as n9value by _time
                | union
                [| tstats count as n9value where index=* by _time span=1m
                | eval n9value=0]
                | stats max(n9value) as n9value by _time
                | rename _time as n9time
                | fields n9value, n9time
        displayName: Good
        name: objective-1
        target: 0.95
        value: 1
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:48:01Z"
          end: "2023-03-16T10:48:01Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: VCAS - Authorise transactions (AR and C) - Availability
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-vcas
        deployed-from:
        - anzx/fabric-vcas
        slo-type:
        - availability
        team-name:
        - fab-selfservice
        user-journey:
        - authorise-transactions-arc-availability
      name: anzx-authorise-transactions-arc-availability
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://confluence.service.anz/display/ABT/Playbook+-+VCAS
      budgetingMethod: Occurrences
      composite:
        burnRateCondition:
          op: gt
          value: 1
        target: 0.99
      description: Runbook - https://confluence.service.anz/display/ABT/Playbook+-+VCAS
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"vcas-server-*\"\n\"attributes.connect
                response payload.Msg.stepup_type\"=\"OTP\"\n\"attributes.connect response
                payload.Msg.status\" IN (\"SUCCESS\", \"FAILWITHFEEDBACK\", \"AUTHENTICATED\",
                \"REJECTED\")\n| bin _time span=1m\n| stats count as n9value by _time\n|
                union \n    [| tstats count as n9value where index=* by _time span=1m\n
                \   | eval n9value=0]\n    | stats max(n9value) as n9value by _time\n|
                rename _time as n9time\n| fields n9value, n9time"
          incremental: false
          total:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"vcas-server-*\"\nbody=\"Response
                received from server:*VCASAPI/StepUp\"\n\"attributes.connect response
                payload.Msg.stepup_type\"=\"OTP\"\n\"attributes.connect response payload.Msg.status\"
                IN (\"SUCCESS\", \"FAILWITHFEEDBACK\", \"AUTHENTICATED\", \"REJECTED\",
                \"ERROR\") \n| bin _time span=1m\n| stats count as n9value by _time\n|
                union \n    [| tstats count as n9value where index=* by _time span=1m\n
                \   | eval n9value=0]\n    | stats max(n9value) as n9value by _time\n|
                rename _time as n9time\n| fields n9value, n9time"
        displayName: StepUp
        name: vcas-stepup
        target: 0.99
        value: 1
      - countMetrics:
          good:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"vcas-server-*\"\nbody=\"Response
                received from server:*VCASAPI/Initiate\"\n\"attributes.connect response
                payload.Msg.credentials{}.credential_type\"=\"OTPSMS\"\n\"attributes.connect
                response payload.Msg.status\"=\"SUCCESS\"\n| bin _time span=1m\n| stats
                count as n9value by _time\n| union \n    [| tstats count as n9value
                where index=* by _time span=1m\n    | eval n9value=0]\n    | stats max(n9value)
                as n9value by _time\n| rename _time as n9time\n| fields n9value, n9time"
          incremental: false
          total:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"vcas-server-*\"\nbody=\"Response
                received from server:*VCASAPI/Initiate\"\n\"attributes.connect response
                payload.Msg.credentials{}.credential_type\"=\"OTPSMS\"\n\"attributes.connect
                response payload.Msg.status\" IN (\"SUCCESS\", \"ERROR\")\n| bin _time
                span=1m\n| stats count as n9value by _time\n| union \n    [| tstats
                count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
        displayName: Initiate OTP authorisation
        name: vcas-initiate-otp-authorisation
        target: 0.99
        value: 2
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:48:01Z"
          end: "2023-03-16T10:48:01Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: View goal balances - Availability
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-accounts
        deployed-from:
        - anzx/fabric-accounts
        slo-type:
        - availability
        team-name:
        - fab-accounts
        user-journey:
        - view-goal-balances
      name: anzx-view-goal-balances-availability
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://confluence.service.anz/display/ABT/View+goal+balances
      budgetingMethod: Occurrences
      description: Runbook - https://backstage.service.anz/docs/default/component/fabric-sre-runbooks/critical-user-journey/view-goal-balance/
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"accounts\"\nattributes.rpc.method=\"ListBuckets\"\nbody=\"GRPC
                Request was successfully processed\"\nattributes.rpc.grpc.status_code=0\n|
                bin _time span=1m \n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
          incremental: false
          total:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"accounts\"\nattributes.rpc.method=\"ListBuckets\"\nbody=\"GRPC
                Request was * processed\"\nattributes.rpc.grpc.status_code IN (0,12,13,15,16)\n|
                bin _time span=1m \n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
        displayName: Good
        name: objective-1
        target: 0.99
        value: 1
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:48:01Z"
          end: "2023-03-16T10:48:01Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: VCAS - Authorise transactions (AR and C) - Latency
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-vcas
        deployed-from:
        - anzx/fabric-vcas
        slo-type:
        - availability
        team-name:
        - fab-selfservice
        user-journey:
        - authorise-transactions-arc-latency
      name: anzx-authorise-transactions-arc-latency
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://confluence.service.anz/display/ABT/Playbook+-+VCAS
      budgetingMethod: Occurrences
      composite:
        burnRateCondition:
          op: gt
          value: 1
        target: 0.95
      description: Runbook - https://confluence.service.anz/display/ABT/Playbook+-+VCAS
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"vcas-server-*\"\nbody=\"APCAM
                StepUp Success*\"\nattributes.time_since_rpc_start <= 3000\n| bin _time
                span=1m\n| stats count as n9value by _time\n| union \n    [| tstats
                count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
          incremental: false
          total:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"vcas-server-*\"\nbody=\"APCAM
                StepUp Success*\"\n| bin _time span=1m\n| stats count as n9value by
                _time\n| union \n    [| tstats count as n9value where index=* by _time
                span=1m\n    | eval n9value=0]\n    | stats max(n9value) as n9value
                by _time\n| rename _time as n9time\n| fields n9value, n9time"
        displayName: StepUp
        name: vcas-stepup
        target: 0.95
        value: 1
      - countMetrics:
          good:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"vcas-server-*\"\nbody=\"APCAM
                Initiate Success*\"\nattributes.time_since_rpc_start <= 3000\n| bin
                _time span=1m\n| stats count as n9value by _time\n| union \n    [| tstats
                count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
          incremental: false
          total:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"vcas-server-*\"\nbody=\"APCAM
                Initiate Success*\"\n| bin _time span=1m\n| stats count as n9value by
                _time\n| union \n    [| tstats count as n9value where index=* by _time
                span=1m\n    | eval n9value=0]\n    | stats max(n9value) as n9value
                by _time\n| rename _time as n9time\n| fields n9value, n9time"
        displayName: Initiate OTP authorisation
        name: vcas-initiate-otp-authorisation
        target: 0.95
        value: 2
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:48:01Z"
          end: "2023-03-16T10:48:01Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: Entitlements - Others- Latency
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-entitlements
        deployed-from:
        - anzx/fabric-sre-cloud-monitoring
        slo-type:
        - latency
        team-name:
        - fabric-entitlements
        user-journey:
        - others
      name: anzx-entitlements-others-latency
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://backstage.service.anz/docs/default/component/fabric-entitlements/customerjourneys/
      budgetingMethod: Occurrences
      description: Runbook - https://backstage.service.anz/docs/default/component/fabric-sre-runbooks/entitlements/entitlements-runbook/
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: |-
                index="fabric_events_prod"
                sourcetype="entitlements"
                attributes.rpc.method IN (ExplainAccountEntitlements", "ListPersonaForCardToken", "ListProducts", "ListProducts")
                attributes.rpc.grpc.status_code=0
                attributes.rpc.server.duration.ttfb < 70
                | bin _time span=1m
                | stats count as n9value by _time
                | union
                [| tstats count as n9value where index=* by _time span=1m
                | eval n9value=0]
                | stats max(n9value) as n9value by _time
                | rename _time as n9time
                | fields n9value, n9time
          incremental: false
          total:
            splunk:
              query: |-
                index="fabric_events_prod"
                sourcetype="entitlements"
                attributes.rpc.method IN (ExplainAccountEntitlements", "ListPersonaForCardToken", "ListProducts", "ListProducts")
                attributes.rpc.grpc.status_code=0
                | bin _time span=1m
                | stats count as n9value by _time
                | union
                [| tstats count as n9value where index=* by _time span=1m
                | eval n9value=0]
                | stats max(n9value) as n9value by _time
                | rename _time as n9time
                | fields n9value, n9time
        displayName: Good
        name: objective-1
        target: 0.99
        value: 1
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:48:01Z"
          end: "2023-03-16T10:48:01Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: View goal balances - Latency
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-accounts
        deployed-from:
        - anzx/fabric-accounts
        slo-type:
        - latency
        team-name:
        - fab-accounts
        user-journey:
        - view-goal-balances
      name: anzx-view-goal-balances-latency
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://confluence.service.anz/display/ABT/View+goal+balances
      budgetingMethod: Occurrences
      description: Runbook - https://backstage.service.anz/docs/default/component/fabric-sre-runbooks/critical-user-journey/view-goal-balance/
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: "index=\"anz_csnetwork_lb_prod\"\nhttpRequest.requestUrl=\"https://fabric*/fabric.service.accounts.*.BucketAPI/ListBuckets\"\nhttpRequest.status=2*\nhttpRequest.latency_millis
                <= 800\njsonPayload.statusDetails=\"response_sent_by_backend\"\n| bin
                _time span=1m \n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
          incremental: false
          total:
            splunk:
              query: "index=\"anz_csnetwork_lb_prod\"\nhttpRequest.requestUrl=\"https://fabric*/fabric.service.accounts.*.BucketAPI/ListBuckets\"\nhttpRequest.status=2*\njsonPayload.statusDetails=\"response_sent_by_backend\"\n|
                bin _time span=1m \n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
        displayName: Good
        name: objective-1
        target: 0.95
        value: 1
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:48:01Z"
          end: "2023-03-16T10:48:01Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: Entitlements - Manage Entitled Accounts - Latency
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-entitlements
        deployed-from:
        - anzx/fabric-sre-cloud-monitoring
        slo-type:
        - latency
        team-name:
        - fabric-entitlements
        user-journey:
        - manage-entitled-accounts
      name: anzx-entitlement-entitledaccount-latency
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://backstage.service.anz/docs/default/component/fabric-entitlements/customerjourneys/
      budgetingMethod: Occurrences
      description: Runbook - https://backstage.service.anz/docs/default/component/fabric-sre-runbooks/entitlements/entitlements-runbook/
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: |-
                index="fabric_events_prod"
                sourcetype="entitlements"
                attributes.rpc.method IN ("ListEntitledAccounts", "GetEntitledAccount")
                attributes.rpc.grpc.status_code=0
                attributes.rpc.server.duration.ttfb < 60
                | bin _time span=1m
                | stats count as n9value by _time
                | union
                [| tstats count as n9value where index=* by _time span=1m
                | eval n9value=0]
                | stats max(n9value) as n9value by _time
                | rename _time as n9time
                | fields n9value, n9time
          incremental: false
          total:
            splunk:
              query: |-
                index="fabric_events_prod"
                sourcetype="entitlements"
                attributes.rpc.method IN ("ListEntitledAccounts", "GetEntitledAccount")
                attributes.rpc.grpc.status_code=0
                | bin _time span=1m
                | stats count as n9value by _time
                | union
                [| tstats count as n9value where index=* by _time span=1m
                | eval n9value=0]
                | stats max(n9value) as n9value by _time
                | rename _time as n9time
                | fields n9value, n9time
        displayName: EntitledAccounts
        name: entitlements-entitledaccounts
        target: 0.95
        value: 1
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:48:01Z"
          end: "2023-03-16T10:48:01Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: Create and manage goals - Latency
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-accounts
        deployed-from:
        - anzx/fabric-accounts
        slo-type:
        - latency
        team-name:
        - fab-accounts
        user-journey:
        - create-and-manage-goals
      name: anzx-create-and-manage-goals-latency
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://confluence.service.anz/display/ABT/Create+and+manage+goals
      budgetingMethod: Occurrences
      description: Runbook - https://backstage.service.anz/docs/default/component/fabric-sre-runbooks/critical-user-journey/create-and-manage-goals/
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: "index=\"anz_csnetwork_lb_prod\" \nhttpRequest.requestUrl IN (\"*.BucketAPI/CreateBucket\",
                \"*.BucketAPI/UpdateBucket\", \"*.BucketAPI/CloseBucket\")\nhttpRequest.status=2*\n(httpRequest.latency_millis
                >= 100 AND httpRequest.latency_millis <= 1000)\njsonPayload.statusDetails=\"response_sent_by_backend\"\n|
                bin _time span=1m \n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
          incremental: false
          total:
            splunk:
              query: "index=\"anz_csnetwork_lb_prod\"\nhttpRequest.requestUrl IN (\"*.BucketAPI/CreateBucket\",
                \"*.BucketAPI/UpdateBucket\", \"*.BucketAPI/CloseBucket\")\nhttpRequest.status=2*\nhttpRequest.latency_millis
                >= 100\njsonPayload.statusDetails=\"response_sent_by_backend\"\n| bin
                _time span=1m \n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
        displayName: Good
        name: objective-1
        target: 0.95
        value: 1
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:48:01Z"
          end: "2023-03-16T10:48:01Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: View transactions (sync) - Availability
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-transactions
        deployed-from:
        - anzx/fabric-transactions
        slo-type:
        - availability
        team-name:
        - fab-transactions
        user-journey:
        - view-transactions-sync-availability
      name: anzx-view-transactions-sync-availability
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://confluence.service.anz/display/ABT/View+transactions
      budgetingMethod: Occurrences
      description: Runbook - https://backstage.service.anz/docs/default/component/fabric-sre-runbooks/critical-user-journey/view-transactions/
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"transactions\"\nattributes.rpc.method=\"SyncTransactions\"\nbody=\"GRPC
                Request was successfully processed\"\nattributes.rpc.grpc.status_code=0\n|
                bin _time span=1m \n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
          incremental: false
          total:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"transactions\"\nattributes.rpc.method=\"SyncTransactions\"\nbody=\"GRPC
                Request was * processed\"\nattributes.rpc.grpc.status_code IN (0,13,16)
                \n| bin _time span=1m \n| stats count as n9value by _time\n| union \n
                \   [| tstats count as n9value where index=* by _time span=1m\n    |
                eval n9value=0]\n    | stats max(n9value) as n9value by _time\n| rename
                _time as n9time\n| fields n9value, n9time"
        displayName: Good
        name: objective-1
        target: 0.99
        value: 1
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:48:01Z"
          end: "2023-03-16T10:48:01Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: Create and manage goals - Availability
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-accounts
        deployed-from:
        - anzx/fabric-accounts
        slo-type:
        - availability
        team-name:
        - fab-accounts
        user-journey:
        - create-and-manage-goals
      name: anzx-create-and-manage-goals-availability
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://confluence.service.anz/display/ABT/Create+and+manage+goals
      budgetingMethod: Occurrences
      description: Runbook - https://backstage.service.anz/docs/default/component/fabric-sre-runbooks/critical-user-journey/create-and-manage-goals/
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"accounts\"\nattributes.rpc.method
                IN (\"CreateBucket\", \"UpdateBucket\", \"CloseBucket\")\nbody=\"GRPC
                Request was successfully processed\"\nattributes.rpc.grpc.status_code=0\n|
                bin _time span=1m \n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
          incremental: false
          total:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"accounts\"\nattributes.rpc.method
                IN (\"CreateBucket\", \"UpdateBucket\", \"CloseBucket\")\nbody=\"GRPC
                Request was * processed\"\nattributes.rpc.grpc.status_code IN (0,12,13,15,16)\n|
                bin _time span=1m \n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
        displayName: Good
        name: objective-1
        target: 0.99
        value: 1
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:48:01Z"
          end: "2023-03-16T10:48:01Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: Command Listener - Message processed to firebase - Availability
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-commandlistener
        deployed-from:
        - anzx/fabric-commandcentre
        slo-type:
        - availability
        team-name:
        - fab-projects
        user-journey:
        - command-listener
      name: command-listener-message-processed-firebase-ava
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://confluence.service.anz/x/xQVVYQ
      budgetingMethod: Occurrences
      description: Playbook - https://confluence.service.anz/x/dgZ1YQ
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=commandlistener\n\"Delivered
                messages to Firebase\"\n| rex field=body \"SuccessCount:(?<SuccessCount>[0-9])
                FailureCount:(?<FailureCount>[0-9]) InvalidTokens:(?<InvalidTokens>[0-9])
                ToRetry:(?<ToRetry>[0-9])\"\n| bin _time span=1m \n| stats sum(SuccessCount)
                as n9value by _time\n| union \n    [| tstats count as n9value where
                index=* by _time span=1m\n    | eval n9value=0]\n| stats max(n9value)
                as n9value by _time\n| rename _time as n9time\n| fields n9value, n9time"
          incremental: false
          total:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=commandlistener\n\"Delivered
                messages to Firebase\"\n| rex field=body \"SuccessCount:(?<SuccessCount>[0-9])
                FailureCount:(?<FailureCount>[0-9]) InvalidTokens:(?<InvalidTokens>[0-9])
                ToRetry:(?<ToRetry>[0-9])\"\n| eval TotalCount = FailureCount+SuccessCount\n|
                bin _time span=1m \n| stats sum(TotalCount) as n9value by _time\n| union
                \n    [| tstats count as n9value where index=* by _time span=1m\n    |
                eval n9value=0]\n| stats max(n9value) as n9value by _time\n| rename
                _time as n9time\n| fields n9value, n9time"
        displayName: Good
        name: objective-1
        target: 0.99
        value: 1
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:48:01Z"
          end: "2023-03-16T10:48:01Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: View scheduled payments - Latency
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-scheduler
        deployed-from:
        - anzx/fabric-payments
        slo-type:
        - latency
        team-name:
        - fabric-payments
        user-journey:
        - manage-scheduled-payments
      name: anzx-view-scheduled-payments-latency
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://confluence.service.anz/display/ABT/Manage+scheduled+payments
      budgetingMethod: Occurrences
      description: Runbook - https://backstage.service.anz/docs/default/component/fabric-sre-runbooks/critical-user-journey/manage-scheduled-payments/
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: "index=\"anz_csnetwork_lb_prod\"\nhttpRequest.requestUrl IN (\"*ScheduleAPI/ListSchedules\")\nhttpRequest.status=2*\nhttpRequest.latency_millis
                <= 1500\njsonPayload.statusDetails=\"response_sent_by_backend\"\n| bin
                _time span=1m \n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
          incremental: false
          total:
            splunk:
              query: "index=\"anz_csnetwork_lb_prod\"\nhttpRequest.requestUrl IN (\"*ScheduleAPI/ListSchedules\")\nhttpRequest.status=2*\njsonPayload.statusDetails=\"response_sent_by_backend\"\n|
                bin _time span=1m \n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
        displayName: Good
        name: objective-1
        target: 0.95
        value: 1
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:48:01Z"
          end: "2023-03-16T10:48:01Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: View goal balances - Freshness
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-accounts
        deployed-from:
        - anzx/fabric-accounts
        slo-type:
        - latency
        team-name:
        - fab-accounts
        user-journey:
        - view-goal-balances
      name: anzx-view-goal-balances-freshness
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://confluence.service.anz/display/ABT/View+goal+balances
      budgetingMethod: Occurrences
      description: Runbook - https://backstage.service.anz/docs/default/component/fabric-sre-runbooks/critical-user-journey/view-goal-balance/
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: |-
                index="fabric_events_prod"
                sourcetype="accounts"
                attributes.stale_bucket_balance_count=0
                | bin _time span=1m
                | stats count as n9value by _time
                | union
                [| tstats count as n9value where index=* by _time span=1m
                | eval n9value=0]
                | stats max(n9value) as n9value by _time
                | rename _time as n9time
                | fields n9value, n9time
          incremental: false
          total:
            splunk:
              query: |-
                index="fabric_events_prod"
                sourcetype="accounts"
                body="Retrieved bucket statuses"
                | bin _time span=1m
                | stats count as n9value by _time
                | union
                [| tstats count as n9value where index=* by _time span=1m
                | eval n9value=0]
                | stats max(n9value) as n9value by _time
                | rename _time as n9time
                | fields n9value, n9time
        displayName: Good
        name: objective-1
        target: 0.99
        value: 1
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:48:01Z"
          end: "2023-03-16T10:48:01Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: View daily payment limits - Availability
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-payments
        deployed-from:
        - anzx/fabric-payments
        slo-type:
        - availability
        team-name:
        - fabric-payments
        user-journey:
        - view-and-manage-daily-payment-limits
      name: anzx-view-daily-payment-limits-availability
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://confluence.service.anz/display/ABT/View+and+Manage+daily+payment+limits
      budgetingMethod: Occurrences
      description: Runbook - https://backstage.service.anz/docs/default/component/fabric-sre-runbooks/critical-user-journey/view-and-manage-daily-payment-limits/
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"payments\"\nattributes.rpc.method=\"ListLimits\"\nattributes.rpc.grpc.status_code=0\n|
                bin _time span=1m \n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
          incremental: false
          total:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"payments\"\nattributes.rpc.method=\"ListLimits\"\nattributes.rpc.grpc.status_code
                IN (0,1,2,4,10,13,14,15,16)\n| bin _time span=1m \n| stats count as
                n9value by _time\n| union \n    [| tstats count as n9value where index=*
                by _time span=1m\n    | eval n9value=0]\n    | stats max(n9value) as
                n9value by _time\n| rename _time as n9time\n| fields n9value, n9time"
        displayName: Good
        name: objective-1
        target: 0.99
        value: 1
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:48:01Z"
          end: "2023-03-16T10:48:01Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: Manage daily payment limits - Latency
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-limits
        deployed-from:
        - anzx/fabric-payments
        slo-type:
        - latency
        team-name:
        - fabric-payments
        user-journey:
        - view-and-manage-daily-payment-limits
      name: anzx-manage-daily-payment-limits-latency
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://confluence.service.anz/display/ABT/View+and+Manage+daily+payment+limits
      budgetingMethod: Occurrences
      description: Runbook - https://backstage.service.anz/docs/default/component/fabric-sre-runbooks/critical-user-journey/view-and-manage-daily-payment-limits/
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: "index=\"anz_csnetwork_lb_prod\"\nhttpRequest.requestUrl IN (\"*.LimitService/SetLimit\")\nhttpRequest.status=2*\nhttpRequest.latency_millis
                <= 500\njsonPayload.statusDetails=\"response_sent_by_backend\"\n| bin
                _time span=1m \n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
          incremental: false
          total:
            splunk:
              query: "index=\"anz_csnetwork_lb_prod\"\nhttpRequest.requestUrl IN (\"*.LimitService/SetLimit\")\nhttpRequest.status=2*\njsonPayload.statusDetails=\"response_sent_by_backend\"\n|
                bin _time span=1m \n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
        displayName: Good
        name: objective-1
        target: 0.95
        value: 1
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:48:01Z"
          end: "2023-03-16T10:48:01Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: View daily payment limits - Latency
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-limits
        deployed-from:
        - anzx/fabric-payments
        slo-type:
        - latency
        team-name:
        - fabric-payments
        user-journey:
        - view-and-manage-daily-payment-limits
      name: anzx-view-daily-payment-limits-latency
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://confluence.service.anz/display/ABT/View+and+Manage+daily+payment+limits
      budgetingMethod: Occurrences
      description: Runbook - https://backstage.service.anz/docs/default/component/fabric-sre-runbooks/critical-user-journey/view-and-manage-daily-payment-limits/
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: "index=\"anz_csnetwork_lb_prod\"\nhttpRequest.requestUrl IN (\"*.LimitService/ListLimits\")\nhttpRequest.status=2*\nhttpRequest.latency_millis
                <= 500\njsonPayload.statusDetails=\"response_sent_by_backend\"\n| bin
                _time span=1m \n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
          incremental: false
          total:
            splunk:
              query: "index=\"anz_csnetwork_lb_prod\"\nhttpRequest.requestUrl IN (\"*.LimitService/ListLimits\")\nhttpRequest.status=2*\njsonPayload.statusDetails=\"response_sent_by_backend\"\n|
                bin _time span=1m \n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
        displayName: Good
        name: objective-1
        target: 0.95
        value: 1
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:48:01Z"
          end: "2023-03-16T10:48:01Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: Entitlements - OCV Flow - Latency
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-entitlements
        deployed-from:
        - anzx/fabric-sre-cloud-monitoring
        slo-type:
        - latency
        team-name:
        - fabric-entitlements
        user-journey:
        - ocv-flow-journey
      name: anzx-entitlement-ocv-latency
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://backstage.service.anz/docs/default/component/fabric-entitlements/customerjourneys/
      budgetingMethod: Occurrences
      description: Runbook - https://backstage.service.anz/docs/default/component/fabric-sre-runbooks/entitlements/entitlements-runbook/
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: |-
                index="fabric_events_prod"
                sourcetype="entitlements"
                attributes.rpc.method IN ("LinkResources", "UpdateParty", "UpdatePartyAccountLegalRole", "UpdatePartyCardLegalRole")
                attributes.rpc.grpc.status_code=0
                attributes.rpc.server.duration.ttfb < 20
                | bin _time span=1m
                | stats count as n9value by _time
                | union
                [| tstats count as n9value where index=* by _time span=1m
                | eval n9value=0]
                | stats max(n9value) as n9value by _time
                | rename _time as n9time
                | fields n9value, n9time
          incremental: false
          total:
            splunk:
              query: |-
                index="fabric_events_prod"
                sourcetype="entitlements"
                attributes.rpc.method IN ("LinkResources", "UpdateParty", "UpdatePartyAccountLegalRole", "UpdatePartyCardLegalRole")
                attributes.rpc.grpc.status_code=0
                | bin _time span=1m
                | stats count as n9value by _time
                | union
                [| tstats count as n9value where index=* by _time span=1m
                | eval n9value=0]
                | stats max(n9value) as n9value by _time
                | rename _time as n9time
                | fields n9value, n9time
        displayName: Good
        name: objective-1
        target: 0.95
        value: 1
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:48:01Z"
          end: "2023-03-16T10:48:01Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: Manage payees - Latency
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-bluepages
        deployed-from:
        - anzx/fabric-payments
        slo-type:
        - latency
        team-name:
        - fabric-payments
        user-journey:
        - manage-payees
      name: anzx-manage-payees-latency
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://confluence.service.anz/display/ABT/Manage+payees
      budgetingMethod: Occurrences
      description: Runbook - https://backstage.service.anz/docs/default/component/fabric-sre-runbooks/critical-user-journey/manage-payees/
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: "index=\"anz_csnetwork_lb_prod\" \nhttpRequest.requestUrl IN (\"*.PayeeAPI/CreatePayees\",
                \"*.PayeeAPI/UpdatePayees\", \"*.PayeeAPI/DeletePayees\", \"*.PayeeAPI/AddQuickPayees\",
                \"*.PayeeAPI/UpdateQuickPayees\")\nhttpRequest.status=2*\nhttpRequest.latency_millis
                <= 500\njsonPayload.statusDetails=\"response_sent_by_backend\"\n| bin
                _time span=1m \n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
          incremental: false
          total:
            splunk:
              query: "index=\"anz_csnetwork_lb_prod\"\nhttpRequest.requestUrl IN (\"*.PayeeAPI/CreatePayees\",
                \"*.PayeeAPI/UpdatePayees\", \"*.PayeeAPI/DeletePayees\", \"*.PayeeAPI/AddQuickPayees\",
                \"*.PayeeAPI/UpdateQuickPayees\")\nhttpRequest.status=2*\njsonPayload.statusDetails=\"response_sent_by_backend\"\n|
                bin _time span=1m \n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
        displayName: Good
        name: objective-1
        target: 0.95
        value: 1
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:48:01Z"
          end: "2023-03-16T10:48:01Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: View payments - Latency
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-payments
        deployed-from:
        - anzx/fabric-payments
        slo-type:
        - latency
        team-name:
        - fabric-payments
        user-journey:
        - view-payments
      name: anzx-view-payments-latency
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://confluence.service.anz/display/ABT/Make+a+payment
      budgetingMethod: Occurrences
      description: Runbook - https://backstage.service.anz/docs/default/component/fabric-sre-runbooks/critical-user-journey/make-a-payment/
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: "index=\"anz_csnetwork_lb_prod\"\nhttpRequest.requestUrl IN (\"*.PaymentAPI/ListPayments\")\nhttpRequest.status=2*\nhttpRequest.latency_millis
                <= 750\njsonPayload.statusDetails=\"response_sent_by_backend\"\n| bin
                _time span=1m \n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
          incremental: false
          total:
            splunk:
              query: "index=\"anz_csnetwork_lb_prod\"\nhttpRequest.requestUrl IN (\"*.PaymentAPI/ListPayments\")\nhttpRequest.status=2*\njsonPayload.statusDetails=\"response_sent_by_backend\"\n|
                bin _time span=1m \n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
        displayName: Good
        name: objective-1
        target: 0.95
        value: 1
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:48:01Z"
          end: "2023-03-16T10:48:01Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: Command Listener - Pubsub - Freshness
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-commandlistener
        deployed-from:
        - anzx/fabric-commandcentre
        slo-type:
        - freshness
        team-name:
        - fab-projects
        user-journey:
        - command-listener
      name: command-listener-pubsub-fresh
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-projects-fast-burn
      - anzx-fabric-projects-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://confluence.service.anz/x/xQVVYQ
      budgetingMethod: Occurrences
      description: Playbook - https://confluence.service.anz/x/dgZ1YQ
      indicator:
        metricSource:
          kind: Agent
          name: gcm-prod
          project: anzx-prod
      objectives:
      - displayName: Good
        name: objective-2
        op: lt
        rawMetric:
          query:
            gcm:
              projectId: anz-x-monitoring-prod-9755ba
              query: |-
                fetch pubsub_subscription
                | metric 'pubsub.googleapis.com/subscription/oldest_unacked_message_age'
                | filter
                    (resource.subscription_id == 'commandcentre-events.commandlistener-prod')
                | group_by 1m,
                    [value_oldest_unacked_message_age_mean:
                      max(value.oldest_unacked_message_age)]
                | every 1m
        target: 0.95
        value: 8
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:48:01Z"
          end: "2023-03-16T10:48:01Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: Make a payment (API) - Availability
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-payments
        deployed-from:
        - anzx/fabric-payments
        slo-type:
        - availability
        team-name:
        - fabric-payments
        user-journey:
        - make-a-payment
      name: anzx-make-a-payment-api-availability
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://confluence.service.anz/display/ABT/Make+a+payment
      budgetingMethod: Occurrences
      description: Runbook - https://backstage.service.anz/docs/default/component/fabric-sre-runbooks/critical-user-journey/make-a-payment/
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"payments\"\nattributes.rpc.method
                IN (\"Pay\", \"Transfer\")\nattributes.rpc.grpc.status_code=0\n| bin
                _time span=1m \n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
          incremental: false
          total:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"payments\"\nattributes.rpc.method
                IN (\"Pay\", \"Transfer\")\nattributes.rpc.grpc.status_code IN (0,1,2,4,10,13,14,15,16)\n|
                bin _time span=1m \n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
        displayName: Good
        name: objective-1
        target: 0.99
        value: 1
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:48:01Z"
          end: "2023-03-16T10:48:01Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: Process transactions - Latency
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-transactions
        deployed-from:
        - anzx/fabric-transactions
        slo-type:
        - latency
        team-name:
        - fabric-transactions
        user-journey:
        - view-transactions
      name: anzx-transactions-processing-latency
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://confluence.service.anz/display/ABT/View+transactions
      budgetingMethod: Occurrences
      description: Runbook - https://backstage.service.anz/docs/default/component/fabric-sre-runbooks/critical-user-journey/view-transactions/
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: |-
                index=dummy
                | union
                [| inputlookup transaction-processing-latency-7s.csv
                | eval runHour = strftime(_time,"%H") ```Report should only from 6AM - 11PM```
                | where (runHour >= 6 and runHour <= 23) ```to avoid false alerting due to batch run between 2-5AM```
                | rename n9value_good as n9value
                | rename _time as n9time
                | where n9value >= 0
                | fields n9time, n9value]
                | sort - n9time
                | table n9time, n9value
                | head 30
          incremental: false
          total:
            splunk:
              query: |-
                index=dummy
                | union
                [| inputlookup transaction-processing-latency-7s.csv
                | eval runHour = strftime(_time,"%H") ```Report should only from 6AM - 11PM```
                | where (runHour >= 6 and runHour <= 23) ```to avoid false alerting due to batch run between 2-5AM```
                | rename n9value_total as n9value
                | rename _time as n9time
                | where n9value >= 0
                | fields n9time, n9value]
                | sort - n9time
                | table n9time, n9value
                | head 30
        displayName: Good
        name: objective-1
        target: 0.95
        value: 1
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:48:01Z"
          end: "2023-03-16T10:48:01Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: Entitlements - Others - Availability
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-entitlements
        deployed-from:
        - anzx/fabric-sre-cloud-monitoring
        slo-type:
        - availability
        team-name:
        - fabric-entitlements
        user-journey:
        - others
      name: anzx-entitlement-others-availability
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://backstage.service.anz/docs/default/component/fabric-entitlements/customerjourneys/
      budgetingMethod: Occurrences
      description: Runbook - https://backstage.service.anz/docs/default/component/fabric-sre-runbooks/entitlements/entitlements-runbook/
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: |-
                index="fabric_events_prod"
                sourcetype="entitlements"
                attributes.rpc.method IN ("ExplainAccountEntitlements", "ListPersonaForCardToken", "ListProducts", "ListProducts" )
                attributes.rpc.grpc.status_code=0
                | bin _time span=1m
                | stats count as n9value by _time
                | union
                [| tstats count as n9value where index=* by _time span=1m
                | eval n9value=0]
                | stats max(n9value) as n9value by _time
                | rename _time as n9time
                | fields n9value, n9time
          incremental: false
          total:
            splunk:
              query: |-
                index="fabric_events_prod"
                sourcetype="entitlements"
                attributes.rpc.method IN ("ExplainAccountEntitlements", "ListPersonaForCardToken", "ListProducts", "ListProducts" )
                attributes.rpc.grpc.status_code IN (0,1,2,4,7,10,13,14,15,16)
                | bin _time span=1m
                | stats count as n9value by _time
                | union
                [| tstats count as n9value where index=* by _time span=1m
                | eval n9value=0]
                | stats max(n9value) as n9value by _time
                | rename _time as n9time
                | fields n9value, n9time
        displayName: Good
        name: objective-1
        target: 0.99
        value: 1
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:48:01Z"
          end: "2023-03-16T10:48:01Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: Entitlements - Origination - Availability
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-entitlements
        deployed-from:
        - anzx/fabric-sre-cloud-monitoring
        slo-type:
        - availability
        team-name:
        - fabric-entitlements
        user-journey:
        - user-origination-journey
      name: anzx-entitlement-origination-availability
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://backstage.service.anz/docs/default/component/fabric-entitlements/customerjourneys/
      budgetingMethod: Occurrences
      description: Runbook - https://backstage.service.anz/docs/default/component/fabric-sre-runbooks/entitlements/entitlements-runbook/
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: |-
                index="fabric_events_prod"
                sourcetype="entitlements"
                attributes.rpc.method IN ("AddPartyPersonaFabricRole", "RegisterAccountToPersona", "RegisterCardToPersona", "RegisterPersonaToParty", "CreateParty")
                attributes.rpc.grpc.status_code=0
                | bin _time span=1m
                | stats count as n9value by _time
                | union
                [| tstats count as n9value where index=* by _time span=1m
                | eval n9value=0]
                | stats max(n9value) as n9value by _time
                | rename _time as n9time
                | fields n9value, n9time
          incremental: false
          total:
            splunk:
              query: |-
                index="fabric_events_prod"
                sourcetype="entitlements"
                attributes.rpc.method IN ("AddPartyPersonaFabricRole", "RegisterAccountToPersona", "RegisterCardToPersona", "RegisterPersonaToParty", "CreateParty")
                attributes.rpc.grpc.status_code IN (0,1,2,4,7,10,13,14,15,16)
                | bin _time span=1m
                | stats count as n9value by _time
                | union
                [| tstats count as n9value where index=* by _time span=1m
                | eval n9value=0]
                | stats max(n9value) as n9value by _time
                | rename _time as n9time
                | fields n9value, n9time
        displayName: Good
        name: objective-1
        target: 0.99
        value: 1
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:48:01Z"
          end: "2023-03-16T10:48:01Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: VCAS - Authorise transactions (ANZ Plus) - Latency
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-vcas
        deployed-from:
        - anzx/fabric-vcas
        slo-type:
        - availability
        team-name:
        - fab-selfservice
        user-journey:
        - authorise-transactions-plus-latency
      name: anzx-authorise-transactions-plus-latency
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://confluence.service.anz/display/ABT/Playbook+-+VCAS
      budgetingMethod: Occurrences
      composite:
        burnRateCondition:
          op: gt
          value: 1
        target: 0.95
      description: Runbook - https://confluence.service.anz/display/ABT/Playbook+-+VCAS
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"vcas-server-*\"\nbody=\"Response
                received from server:*VCASAPI/StepUp\"\n\"attributes.connect response
                payload.Msg.stepup_type\"=\"OUTOFBAND\"\n\"attributes.connect response
                payload.Msg.status\"=\"SUCCESS\"\n| join trace_id [ search index=\"anz_csnetwork_lb_prod\"\nhttpRequest.requestUrl
                IN (\"*.VCASAPI/StepUp\")\nhttpRequest.status=2*\nhttpRequest.latency_millis
                <= 1000\njsonPayload.statusDetails=\"response_sent_by_backend\"\n| rex
                field=platform_gcp_metadata.trace \"\\S+\\/(?<trace_id>.*)\" ]\n| bin
                _time span=1m\n| stats count as n9value by _time\n| union \n    [| tstats
                count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
          incremental: false
          total:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"vcas-server-*\"\nbody=\"Response
                received from server:*VCASAPI/StepUp\"\n\"attributes.connect response
                payload.Msg.stepup_type\"=\"OUTOFBAND\"\n\"attributes.connect response
                payload.Msg.status\"=\"SUCCESS\"\n| join trace_id [ search index=\"anz_csnetwork_lb_prod\"\nhttpRequest.requestUrl
                IN (\"*.VCASAPI/StepUp\")\nhttpRequest.status=2*\njsonPayload.statusDetails=\"response_sent_by_backend\"\n|
                rex field=platform_gcp_metadata.trace \"\\S+\\/(?<trace_id>.*)\" ]\n|
                bin _time span=1m\n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
        displayName: StepUp
        name: vcas-stepup
        target: 0.95
        value: 1
      - countMetrics:
          good:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"vcas-server-*\"\nrequestUrl=\"*VCASAPI/Initiate\"\n|
                rex field=platform_gcp_metadata.trace \"\\S+\\/(?<trace_id>.*)\"\n|
                join trace_id [search index=\"fabric_events_prod\"\nsourcetype=\"vcas-server-*\"\nbody=\"PubSub
                message sent successfully\"]\n| eval totalLatency=latency_millis+'attributes.messaging.duration'\n|
                where totalLatency <= 1000\n| bin _time span=1m\n| stats count as n9value
                by _time\n| union \n    [| tstats count as n9value where index=* by
                _time span=1m\n    | eval n9value=0]\n    | stats max(n9value) as n9value
                by _time\n| rename _time as n9time\n| fields n9value, n9time"
          incremental: false
          total:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"vcas-server-*\"\nrequestUrl=\"*VCASAPI/Initiate\"\n|
                rex field=platform_gcp_metadata.trace \"\\S+\\/(?<trace_id>.*)\"\n|
                join trace_id [search index=\"fabric_events_prod\"\nsourcetype=\"vcas-server-*\"\nbody=\"PubSub
                message sent successfully\"]\n| eval totalLatency=latency_millis+'attributes.messaging.duration'\n|
                bin _time span=1m\n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
        displayName: Publish auth notification
        name: vcas-publish-auth-notification
        target: 0.95
        value: 2
      - countMetrics:
          good:
            splunk:
              query: "index=\"anz_csnetwork_lb_prod\"\nhttpRequest.requestUrl IN (\"*fabric.anz.com*.TransactionApprovalAPI/ListPendingApprovals\")\nhttpRequest.status=2*\nhttpRequest.latency_millis
                <= 1000\njsonPayload.statusDetails=\"response_sent_by_backend\"\n| bin
                _time span=1m\n| stats count as n9value by _time\n| union \n    [| tstats
                count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
          incremental: false
          total:
            splunk:
              query: "index=\"anz_csnetwork_lb_prod\"\nhttpRequest.requestUrl IN (\"*fabric.anz.com*.TransactionApprovalAPI/ListPendingApprovals\")\nhttpRequest.status=2*\njsonPayload.statusDetails=\"response_sent_by_backend\"\n|
                bin _time span=1m\n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
        displayName: Fetch pending approvals
        name: vcas-fetch-pending-approvals
        target: 0.95
        value: 3
      - countMetrics:
          good:
            splunk:
              query: "index=\"anz_csnetwork_lb_prod\"\nhttpRequest.requestUrl IN (\"*fabric.anz.com*.TransactionApprovalAPI/Approve\",
                \"*fabric.anz.com*.TransactionApprovalAPI/Decline\")\nhttpRequest.status=2*\nhttpRequest.latency_millis
                <= 1000\njsonPayload.statusDetails=\"response_sent_by_backend\"\n| bin
                _time span=1m\n| stats count as n9value by _time\n| union \n    [| tstats
                count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
          incremental: false
          total:
            splunk:
              query: "index=\"anz_csnetwork_lb_prod\"\nhttpRequest.requestUrl IN (\"*fabric.anz.com*.TransactionApprovalAPI/Approve\",
                \"*fabric.anz.com*.TransactionApprovalAPI/Decline\")\nhttpRequest.status=2*\njsonPayload.statusDetails=\"response_sent_by_backend\"\n|
                bin _time span=1m\n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
        displayName: Process approval/refusal
        name: vcas-process-approval-refusal
        target: 0.95
        value: 4
      - countMetrics:
          good:
            splunk:
              query: "index=\"anz_csnetwork_lb_prod\"\nhttpRequest.requestUrl IN (\"*.VCASAPI/Validate\")\nhttpRequest.status=2*\nhttpRequest.latency_millis
                <= 1000\njsonPayload.statusDetails=\"response_sent_by_backend\"\n| bin
                _time span=1m\n| stats count as n9value by _time\n| union \n    [| tstats
                count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
          incremental: false
          total:
            splunk:
              query: "index=\"anz_csnetwork_lb_prod\"\nhttpRequest.requestUrl IN (\"*.VCASAPI/Validate\")\nhttpRequest.status=2*\njsonPayload.statusDetails=\"response_sent_by_backend\"\n|
                bin _time span=1m\n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
        displayName: Check validation status
        name: vcas-check-validation-status
        target: 0.95
        value: 5
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:48:01Z"
          end: "2023-03-16T10:48:01Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: Command Listener - Firebase message delivery - Availability
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-commandlistener
        deployed-from:
        - anzx/fabric-commandcentre
        slo-type:
        - availability
        team-name:
        - fab-projects
        user-journey:
        - command-listener
      name: command-listener-firebase-message-delivery-ava
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://confluence.service.anz/x/xQVVYQ
      budgetingMethod: Occurrences
      description: Playbook - https://confluence.service.anz/x/dgZ1YQ
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=commandlistener\n\"Firebase
                response for token\"\n\"Success:true\"\n| bin _time span=1m \n| stats
                count as n9value by _time\n| union \n    [| tstats count as n9value
                where index=* by _time span=1m\n    | eval n9value=0]\n| stats max(n9value)
                as n9value by _time\n| rename _time as n9time\n| fields n9value, n9time"
          incremental: false
          total:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=commandlistener\n\"Firebase
                response for token\"\n(\"Success:false\" OR \"Success:true\")\n| bin
                _time span=1m \n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n|
                stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
        displayName: Good
        name: objective-1
        target: 0.99
        value: 1
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:48:01Z"
          end: "2023-03-16T10:48:01Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: View payments - Availability
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-payments
        deployed-from:
        - anzx/fabric-payments
        slo-type:
        - availability
        team-name:
        - fabric-payments
        user-journey:
        - view-payments
      name: anzx-view-payments-availability
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://confluence.service.anz/display/ABT/Make+a+payment
      budgetingMethod: Occurrences
      description: Runbook - https://backstage.service.anz/docs/default/component/fabric-sre-runbooks/critical-user-journey/make-a-payment/
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"payments\"\nattributes.rpc.method=\"ListPayments\"\nattributes.rpc.grpc.status_code=0\n|
                bin _time span=1m \n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
          incremental: false
          total:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"payments\"\nattributes.rpc.method=\"ListPayments\"\nattributes.rpc.grpc.status_code
                IN (0,1,2,4,10,13,14,15,16)\n| bin _time span=1m \n| stats count as
                n9value by _time\n| union \n    [| tstats count as n9value where index=*
                by _time span=1m\n    | eval n9value=0]\n    | stats max(n9value) as
                n9value by _time\n| rename _time as n9time\n| fields n9value, n9time"
        displayName: Good
        name: objective-1
        target: 0.99
        value: 1
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:48:01Z"
          end: "2023-03-16T10:48:01Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: View transactions (list) - Availability
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-transactions
        deployed-from:
        - anzx/fabric-transactions
        slo-type:
        - availability
        team-name:
        - fab-transactions
        user-journey:
        - view-transactions-list-availability
      name: anzx-view-transactions-list-availability
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://confluence.service.anz/display/ABT/View+transactions
      budgetingMethod: Occurrences
      description: Runbook - https://backstage.service.anz/docs/default/component/fabric-sre-runbooks/critical-user-journey/view-transactions/
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"transactions\"\nattributes.rpc.method=\"ListTransactions\"\nbody=\"GRPC
                Request was successfully processed\"\nattributes.rpc.grpc.status_code=0\n|
                bin _time span=1m \n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
          incremental: false
          total:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"transactions\"\nattributes.rpc.method=\"ListTransactions\"\nbody=\"GRPC
                Request was * processed\"\nattributes.rpc.grpc.status_code IN (0,13,16)
                \n| bin _time span=1m \n| stats count as n9value by _time\n| union \n
                \   [| tstats count as n9value where index=* by _time span=1m\n    |
                eval n9value=0]\n    | stats max(n9value) as n9value by _time\n| rename
                _time as n9time\n| fields n9value, n9time"
        displayName: Good
        name: objective-1
        target: 0.99
        value: 1
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:48:01Z"
          end: "2023-03-16T10:48:01Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: View transactions (sync) - Latency
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-transactions
        deployed-from:
        - anzx/fabric-transactions
        slo-type:
        - latency
        team-name:
        - fab-transactions
        user-journey:
        - view-transactions-sync-latency
      name: anzx-view-transactions-sync-latency
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://confluence.service.anz/display/ABT/View+transactions
      budgetingMethod: Occurrences
      description: Runbook - https://backstage.service.anz/docs/default/component/fabric-sre-runbooks/critical-user-journey/view-transactions/
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: "index=\"fabric_events_prod\"\nattributes.rpc.method=\"SyncTransactions\"\nattributes.rpc.server.duration.ttfb
                <= 800\nattributes.rpc.grpc.status_code=0\nbody=\"GRPC Request was successfully
                processed\"\n| bin _time span=1m \n| stats count as n9value by _time\n|
                union \n    [| tstats count as n9value where index=* by _time span=1m\n
                \   | eval n9value=0]\n    | stats max(n9value) as n9value by _time\n|
                rename _time as n9time\n| fields n9value, n9time"
          incremental: false
          total:
            splunk:
              query: "index=\"fabric_events_prod\"\nattributes.rpc.method=\"SyncTransactions\"\nattributes.rpc.grpc.status_code=0\nbody=\"GRPC
                Request was successfully processed\"\n| bin _time span=1m \n| stats
                count as n9value by _time\n| union \n    [| tstats count as n9value
                where index=* by _time span=1m\n    | eval n9value=0]\n    | stats max(n9value)
                as n9value by _time\n| rename _time as n9time\n| fields n9value, n9time"
        displayName: Good
        name: objective-1
        target: 0.95
        value: 1
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:48:01Z"
          end: "2023-03-16T10:48:01Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: Entitlements - OCV PubSub - Freshness
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-entitlements
        deployed-from:
        - anzx/fabric-sre-cloud-monitoring
        slo-type:
        - availability
        team-name:
        - fabric-entitlements
        user-journey:
        - user-origination-journey
      name: anzx-entitlements-ocv-pubsub-freshness
      project: anzx-prod
    spec:
      alertPolicies: []
      attachments:
      - displayName: CUJ Link
        url: https://backstage.service.anz/docs/default/component/fabric-entitlements/customerjourneys/
      budgetingMethod: Occurrences
      description: Runbook - https://backstage.service.anz/docs/default/component/fabric-sre-runbooks/entitlements/entitlements-runbook/
      indicator:
        metricSource:
          kind: Agent
          name: gcm-prod
          project: anzx-prod
      objectives:
      - displayName: Good
        name: objective-1
        op: lt
        rawMetric:
          query:
            gcm:
              projectId: anz-x-monitoring-prod-9755ba
              query: |-
                fetch pubsub_subscription
                | metric 'pubsub.googleapis.com/subscription/oldest_unacked_message_age'
                | filter
                    (resource.subscription_id == 'entitlements-ocv-events.entitlements-prod')
                | group_by 1m,
                    [value_oldest_unacked_message_age_mean:
                        max(value.oldest_unacked_message_age)]
                | every 1m
        target: 0.95
        value: 8
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:48:01Z"
          end: "2023-03-16T10:48:01Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: View payees - Availability
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-bluepages
        deployed-from:
        - anzx/fabric-payments
        slo-type:
        - availability
        team-name:
        - fabric-payments
        user-journey:
        - view-payees
      name: anzx-view-payees-availability
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://confluence.service.anz/display/ABT/Manage+payees
      budgetingMethod: Occurrences
      description: Runbook - https://backstage.service.anz/docs/default/component/fabric-sre-runbooks/critical-user-journey/manage-payees/
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"bluepages\" \nattributes.rpc.method
                IN (\"ListPayees\", \"ListQuickPayees\")\nbody=\"GRPC Request was successfully
                processed\"\nattributes.rpc.grpc.status_code=0\n| bin _time span=1m
                \n| stats count as n9value by _time\n| union \n    [| tstats count as
                n9value where index=* by _time span=1m\n    | eval n9value=0]\n    |
                stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
          incremental: false
          total:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"bluepages\"\nattributes.rpc.method
                IN (\"ListPayees\", \"ListQuickPayees\")\nbody=\"GRPC Request was *
                processed\"\nattributes.rpc.grpc.status_code IN (0,1,2,4,10,13,14,15,16)\n|
                bin _time span=1m \n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
        displayName: Good
        name: objective-1
        target: 0.99
        value: 1
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:48:01Z"
          end: "2023-03-16T10:48:01Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: Entitlements - EntitledCard - Availability
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-entitlements
        deployed-from:
        - anzx/fabric-sre-cloud-monitoring
        slo-type:
        - availability
        team-name:
        - fabric-entitlements
        user-journey:
        - manage-entitled-cards
      name: anzx-entitlement-entitledcard-availability
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://backstage.service.anz/docs/default/component/fabric-entitlements/customerjourneys/
      budgetingMethod: Occurrences
      description: Runbook - https://backstage.service.anz/docs/default/component/fabric-sre-runbooks/entitlements/entitlements-runbook/
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: |-
                index="fabric_events_prod"
                sourcetype="entitlements"
                attributes.rpc.method IN ("ListEntitledCards", "GetEntitledCard")
                attributes.rpc.grpc.status_code=0
                | bin _time span=1m
                | stats count as n9value by _time
                | union
                [| tstats count as n9value where index=* by _time span=1m
                | eval n9value=0]
                | stats max(n9value) as n9value by _time
                | rename _time as n9time
                | fields n9value, n9time
          incremental: false
          total:
            splunk:
              query: |-
                index="fabric_events_prod"
                sourcetype="entitlements"
                attributes.rpc.method IN ("ListEntitledCards", "GetEntitledCard")
                attributes.rpc.grpc.status_code IN (0,1,2,4,7,10,13,14,15,16)
                | bin _time span=1m
                | stats count as n9value by _time
                | union
                [| tstats count as n9value where index=* by _time span=1m
                | eval n9value=0]
                | stats max(n9value) as n9value by _time
                | rename _time as n9time
                | fields n9value, n9time
        displayName: Good
        name: objective-1
        target: 0.99
        value: 1
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:48:01Z"
          end: "2023-03-16T10:48:01Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: Entitlements - ForcePartyToLatest - Availability
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-entitlements
        deployed-from:
        - anzx/fabric-sre-cloud-monitoring
        slo-type:
        - availability
        team-name:
        - fabric-entitlements
        user-journey:
        - user-origination-journey
      name: anzx-entitlement-forcepartytolatest-availability
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://backstage.service.anz/docs/default/component/fabric-entitlements/customerjourneys/
      budgetingMethod: Occurrences
      description: Runbook - https://backstage.service.anz/docs/default/component/fabric-sre-runbooks/entitlements/entitlements-runbook/
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: |-
                index="fabric_events_prod"
                sourcetype="entitlements"
                attributes.rpc.method IN ("ForcePartyToLatest")
                attributes.rpc.grpc.status_code=0
                | bin _time span=1m
                | stats count as n9value by _time
                | union
                [| tstats count as n9value where index=* by _time span=1m
                | eval n9value=0]
                | stats max(n9value) as n9value by _time
                | rename _time as n9time
                | fields n9value, n9time
          incremental: false
          total:
            splunk:
              query: |-
                index="fabric_events_prod"
                sourcetype="entitlements"
                attributes.rpc.method IN ("ForcePartyToLatest")
                attributes.rpc.grpc.status_code IN (0,1,2,4,7,10,13,14,15,16)
                | bin _time span=1m
                | stats count as n9value by _time
                | union
                [| tstats count as n9value where index=* by _time span=1m
                | eval n9value=0]
                | stats max(n9value) as n9value by _time
                | rename _time as n9time
                | fields n9value, n9time
        displayName: Good
        name: objective-1
        target: 0.99
        value: 1
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:48:01Z"
          end: "2023-03-16T10:48:01Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: Manage scheduled payments - Latency
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-scheduler
        deployed-from:
        - anzx/fabric-payments
        slo-type:
        - latency
        team-name:
        - fabric-payments
        user-journey:
        - manage-scheduled-payments
      name: anzx-manage-scheduled-payments-latency
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://confluence.service.anz/display/ABT/Manage+scheduled+payments
      budgetingMethod: Occurrences
      description: Runbook - https://backstage.service.anz/docs/default/component/fabric-sre-runbooks/critical-user-journey/manage-scheduled-payments/
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: "index=\"anz_csnetwork_lb_prod\"\nhttpRequest.requestUrl IN (\"*.ScheduleAPI/CreateSchedule\",\"*.ScheduleAPI/UpdateSchedule\",\"*.ScheduleAPI/ToggleSchedule\",\"*.ScheduleAPI/DeleteSchedule\")\nhttpRequest.status=2*\nhttpRequest.latency_millis
                <= 1500\njsonPayload.statusDetails=\"response_sent_by_backend\"\n| bin
                _time span=1m \n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
          incremental: false
          total:
            splunk:
              query: "index=\"anz_csnetwork_lb_prod\"\nhttpRequest.requestUrl IN (\"*.ScheduleAPI/CreateSchedule\",\"*.ScheduleAPI/UpdateSchedule\",\"*.ScheduleAPI/ToggleSchedule\",\"*.ScheduleAPI/DeleteSchedule\")\nhttpRequest.status=2*\njsonPayload.statusDetails=\"response_sent_by_backend\"\n|
                bin _time span=1m \n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
        displayName: Good
        name: objective-1
        target: 0.95
        value: 1
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:48:01Z"
          end: "2023-03-16T10:48:01Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: Command Centre - Consumer - Latency
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-commandcentre
        deployed-from:
        - anzx/fabric-commandcentre
        slo-type:
        - latency
        team-name:
        - fab-projects
        user-journey:
        - command-centre
      name: command-centre-consumer-lat
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://confluence.service.anz/x/awZ1YQ
      budgetingMethod: Occurrences
      description: Playbook - https://confluence.service.anz/x/eQZ1YQ
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: "index=fabric_events_prod\nsourcetype=commandcentre\nattributes.rpc.method=Consumer\nbody=\"GRPC
                Request was successfully processed\"\nattributes.rpc.grpc.status_code=0\nattributes.rpc.server.duration.ttfb
                < 500\n| bin _time span=1m \n| stats count as n9value by _time\n| union
                \n  [| tstats count as n9value where index=* by _time span=1m\n  | eval
                n9value=0]\n| stats max(n9value) as n9value by _time\n| rename _time
                as n9time\n| fields n9value, n9time"
          incremental: false
          total:
            splunk:
              query: "index=fabric_events_prod\nsourcetype=commandcentre\nattributes.rpc.method=Consumer\nbody=\"GRPC
                Request was successfully processed\"\nattributes.rpc.grpc.status_code=0\n|
                bin _time span=1m \n| stats count as n9value by _time\n| union \n  [|
                tstats count as n9value where index=* by _time span=1m\n  | eval n9value=0]\n|
                stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
        displayName: Good
        name: objective-1
        target: 0.95
        value: 1
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:48:01Z"
          end: "2023-03-16T10:48:01Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: Entitlements - ForcePartyToLatest - Latency
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-entitlements
        deployed-from:
        - anzx/fabric-sre-cloud-monitoring
        slo-type:
        - latency
        team-name:
        - fabric-entitlements
        user-journey:
        - user-origination-journey
      name: anzx-entitlements-forcepartytolatest-latency
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://backstage.service.anz/docs/default/component/fabric-entitlements/customerjourneys/
      budgetingMethod: Occurrences
      description: Runbook - https://backstage.service.anz/docs/default/component/fabric-sre-runbooks/entitlements/entitlements-runbook/
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: |-
                index="fabric_events_prod"
                sourcetype="entitlements"
                attributes.rpc.method IN ("ForcePartyToLatest")
                attributes.rpc.grpc.status_code=0
                attributes.rpc.server.duration.ttfb < 4000
                | bin _time span=1m
                | stats count as n9value by _time
                | union
                [| tstats count as n9value where index=* by _time span=1m
                | eval n9value=0]
                | stats max(n9value) as n9value by _time
                | rename _time as n9time
                | fields n9value, n9time
          incremental: false
          total:
            splunk:
              query: |-
                index="fabric_events_prod"
                sourcetype="entitlements"
                attributes.rpc.method IN ("ForcePartyToLatest")
                attributes.rpc.grpc.status_code=0
                | bin _time span=1m
                | stats count as n9value by _time
                | union
                [| tstats count as n9value where index=* by _time span=1m
                | eval n9value=0]
                | stats max(n9value) as n9value by _time
                | rename _time as n9time
                | fields n9value, n9time
        displayName: Good
        name: objective-1
        target: 0.99
        value: 1
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:48:01Z"
          end: "2023-03-16T10:48:01Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: VCAS - Authorise transactions (ANZ Plus) - Availability
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-vcas
        deployed-from:
        - anzx/fabric-vcas
        slo-type:
        - availability
        team-name:
        - fab-selfservice
        user-journey:
        - authorise-transactions-plus-availability
      name: anzx-authorise-transactions-plus-availability
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://confluence.service.anz/display/ABT/Playbook+-+VCAS
      budgetingMethod: Occurrences
      composite:
        burnRateCondition:
          op: gt
          value: 1
        target: 0.99
      description: Runbook - https://confluence.service.anz/display/ABT/Playbook+-+VCAS
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"vcas-server-*\"\nbody=\"Response
                received from server:*VCASAPI/StepUp\"\n\"attributes.connect response
                payload.Msg.stepup_type\"=\"OUTOFBAND\"\n\"attributes.connect response
                payload.Msg.status\"=\"SUCCESS\"\n| bin _time span=1m \n| stats count
                as n9value by _time\n| union \n    [| tstats count as n9value where
                index=* by _time span=1m\n    | eval n9value=0]\n    | stats max(n9value)
                as n9value by _time\n| rename _time as n9time\n| fields n9value, n9time"
          incremental: false
          total:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"vcas-server-*\"\nbody=\"Response
                received from server:*VCASAPI/StepUp\"\n\"attributes.connect response
                payload.Msg.stepup_type\"=\"OUTOFBAND\"\n\"attributes.connect response
                payload.Msg.status\" IN (\"SUCCESS\", \"ERROR\")\n| bin _time span=1m
                \n| stats count as n9value by _time\n| union \n    [| tstats count as
                n9value where index=* by _time span=1m\n    | eval n9value=0]\n    |
                stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
        displayName: StepUp
        name: vcas-stepup
        target: 0.99
        value: 1
      - countMetrics:
          good:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"vcas-server-*\"\nbody=\"Request
                sent to server:*VCASAPI/Initiate\"\n\"attributes.connect request payload.Msg.stepup_type\"=\"OUTOFBAND\"\n|
                join trace_id [ search index=\"fabric_events_prod\"\nsourcetype=\"vcas-server-*\"\nbody=\"PublishNotification
                success: Published\"]\n| bin _time span=1m\n| stats count as n9value
                by _time\n| union \n    [| tstats count as n9value where index=* by
                _time span=1m\n    | eval n9value=0]\n    | stats max(n9value) as n9value
                by _time\n| rename _time as n9time\n| fields n9value, n9time"
          incremental: false
          total:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"vcas-server-*\"\nbody=\"Request
                sent to server:*VCASAPI/Initiate\"\n\"attributes.connect request payload.Msg.stepup_type\"=\"OUTOFBAND\"\n|
                bin _time span=1m\n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
        displayName: Publish auth notification
        name: vcas-publish-auth-notification
        target: 0.99
        value: 2
      - countMetrics:
          good:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"vcas-server-*\"\nattributes.rpc.method=\"ListPendingApprovals\"\nbody=\"connect
                server request completed*\"\nattributes.rpc.grpc.status_code=0\n| bin
                _time span=1m\n| stats count as n9value by _time\n| union \n    [| tstats
                count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
          incremental: false
          total:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"vcas-server-*\"\nattributes.rpc.method=\"ListPendingApprovals\"\nbody=\"connect
                server request completed*\"\nattributes.rpc.grpc.status_code IN (0,1,2,3,4,5,6,8,9,10,12,13,14,15,16)\n|
                bin _time span=1m\n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
        displayName: Fetch pending approvals
        name: vcas-fetch-pending-approvals
        target: 0.99
        value: 3
      - countMetrics:
          good:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"vcas-server-*\"\nattributes.rpc.method
                IN (\"Approve\", \"Decline\")\nbody=\"connect server request completed*\"\nattributes.rpc.grpc.status_code=0\n|
                bin _time span=1m\n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
          incremental: false
          total:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"vcas-server-*\"\nattributes.rpc.method
                IN (\"Approve\", \"Decline\")\nbody=\"connect server request completed*\"\nattributes.rpc.grpc.status_code
                IN (0,1,2,4,5,6,8,10,12,13,14,15,16) \n| bin _time span=1m\n| stats
                count as n9value by _time\n| union \n    [| tstats count as n9value
                where index=* by _time span=1m\n    | eval n9value=0]\n    | stats max(n9value)
                as n9value by _time\n| rename _time as n9time\n| fields n9value, n9time"
        displayName: Process approval/refusal
        name: vcas-process-approval-refusal
        target: 0.99
        value: 4
      - countMetrics:
          good:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"vcas-server-*\"\nbody=\"Response
                received from server:*VCASAPI/Validate\"\n\"attributes.connect response
                payload.Msg.status\" IN (\"SUCCESS\", \"FAILURE\")\n| bin _time span=1m\n|
                stats count as n9value by _time\n| union \n    [| tstats count as n9value
                where index=* by _time span=1m\n    | eval n9value=0]\n    | stats max(n9value)
                as n9value by _time\n| rename _time as n9time\n| fields n9value, n9time"
          incremental: false
          total:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"vcas-server-*\"\nbody=\"Response
                received from server:*VCASAPI/Validate\"\n\"attributes.connect response
                payload.Msg.status\" IN (\"SUCCESS\", \"FAILURE\", \"ERROR\")\n| bin
                _time span=1m\n| stats count as n9value by _time\n| union \n    [| tstats
                count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
        displayName: Check validation status
        name: vcas-check-validation-status
        target: 0.99
        value: 5
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:48:01Z"
          end: "2023-03-16T10:48:01Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: View payees - Latency
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-bluepages
        deployed-from:
        - anzx/fabric-payments
        slo-type:
        - latency
        team-name:
        - fabric-payments
        user-journey:
        - view-payees
      name: anzx-view-payees-latency
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://confluence.service.anz/display/ABT/Manage+payees
      budgetingMethod: Occurrences
      description: Runbook - https://backstage.service.anz/docs/default/component/fabric-sre-runbooks/critical-user-journey/manage-payees/
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: "index=\"anz_csnetwork_lb_prod\" \nhttpRequest.requestUrl IN (\"*.PayeeAPI/ListPayees\",
                \"*.PayeeAPI/ListQuickPayees\")\nhttpRequest.status=2*\nhttpRequest.latency_millis
                <= 800\njsonPayload.statusDetails=\"response_sent_by_backend\"\n| bin
                _time span=1m \n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
          incremental: false
          total:
            splunk:
              query: "index=\"anz_csnetwork_lb_prod\"\nhttpRequest.requestUrl IN (\"*.PayeeAPI/ListPayees\",
                \"*.PayeeAPI/ListQuickPayees\")\nhttpRequest.status=2*\njsonPayload.statusDetails=\"response_sent_by_backend\"\n|
                bin _time span=1m \n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
        displayName: Good
        name: objective-1
        target: 0.95
        value: 1
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:48:01Z"
          end: "2023-03-16T10:48:01Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: Command Listener - Message processing - Latency
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-commandlistener
        deployed-from:
        - anzx/fabric-commandcentre
        slo-type:
        - latency
        team-name:
        - fab-projects
        user-journey:
        - command-listener
      name: command-listener-message-processing-lat
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://confluence.service.anz/x/xQVVYQ
      budgetingMethod: Occurrences
      description: Playbook - https://confluence.service.anz/x/dgZ1YQ
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"commandlistener\"\nbody=\"Received
                PubSub message was successfully processed\"\nattributes.messaging.duration
                < 1000\n| bin _time span=1m \n| stats count as n9value by _time\n| union
                \n    [| tstats count as n9value where index=* by _time span=1m\n    |
                eval n9value=0]\n| stats max(n9value) as n9value by _time\n| rename
                _time as n9time\n| fields n9value, n9time"
          incremental: false
          total:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"commandlistener\"\nbody=\"Received
                PubSub message was successfully processed\"\n| bin _time span=1m \n|
                stats count as n9value by _time\n| union \n    [| tstats count as n9value
                where index=* by _time span=1m\n    | eval n9value=0]\n| stats max(n9value)
                as n9value by _time\n| rename _time as n9time\n| fields n9value, n9time"
        displayName: Good
        name: objective-1
        target: 0.95
        value: 1
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:48:01Z"
          end: "2023-03-16T10:48:01Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: Entitlements - Origination - Latency
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-entitlements
        deployed-from:
        - anzx/fabric-sre-cloud-monitoring
        slo-type:
        - latency
        team-name:
        - fabric-entitlements
        user-journey:
        - user-origination-journey
      name: anzx-entitlement-origination-latency
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://backstage.service.anz/docs/default/component/fabric-entitlements/customerjourneys/
      budgetingMethod: Occurrences
      description: Runbook - https://backstage.service.anz/docs/default/component/fabric-sre-runbooks/entitlements/entitlements-runbook/
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: |-
                index="fabric_events_prod"
                sourcetype="entitlements"
                attributes.rpc.method IN ("AddPartyPersonaFabricRole", "RegisterAccountToPersona", "RegisterCardToPersona", "RegisterPersonaToParty", "CreateParty")
                attributes.rpc.grpc.status_code=0
                attributes.rpc.server.duration.ttfb < 30
                | bin _time span=1m
                | stats count as n9value by _time
                | union
                [| tstats count as n9value where index=* by _time span=1m
                | eval n9value=0]
                | stats max(n9value) as n9value by _time
                | rename _time as n9time
                | fields n9value, n9time
          incremental: false
          total:
            splunk:
              query: |-
                index="fabric_events_prod"
                sourcetype="entitlements"
                attributes.rpc.method IN ("AddPartyPersonaFabricRole", "RegisterAccountToPersona", "RegisterCardToPersona", "RegisterPersonaToParty", "CreateParty")
                attributes.rpc.grpc.status_code=0
                | bin _time span=1m
                | stats count as n9value by _time
                | union
                [| tstats count as n9value where index=* by _time span=1m
                | eval n9value=0]
                | stats max(n9value) as n9value by _time
                | rename _time as n9time
                | fields n9value, n9time
        displayName: Good
        name: objective-1
        target: 0.95
        value: 1
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:48:01Z"
          end: "2023-03-16T10:48:01Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: View transactions (list) - Latency
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-transactions
        deployed-from:
        - anzx/fabric-transactions
        slo-type:
        - latency
        team-name:
        - fab-transactions
        user-journey:
        - view-transactions-latency
      name: anzx-view-transactions-latency
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://confluence.service.anz/display/ABT/View+transactions
      budgetingMethod: Occurrences
      description: Runbook - https://backstage.service.anz/docs/default/component/fabric-sre-runbooks/critical-user-journey/view-transactions/
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: "index=\"apps_lb_prod\"\nhttpRequest.requestUrl IN (\"*.TransactionAPI/ListTransactions\",\"*/api/*/transactions?*\")\nhttpRequest.status=2*\nhttpRequest.latency_millis
                <= 1000\n| bin _time span=1m \n| stats count as n9value by _time\n|
                union \n    [| tstats count as n9value where index=* by _time span=1m\n
                \   | eval n9value=0]\n    | stats max(n9value) as n9value by _time\n|
                rename _time as n9time\n| fields n9value, n9time"
          incremental: false
          total:
            splunk:
              query: "index=\"apps_lb_prod\"\nhttpRequest.requestUrl IN (\"*.TransactionAPI/ListTransactions\",\"*/api/*/transactions?*\")\nhttpRequest.status=2*\n|
                bin _time span=1m \n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
        displayName: Good
        name: objective-1
        target: 0.95
        value: 1
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:48:01Z"
          end: "2023-03-16T10:48:01Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: View scheduled payments - Availability
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-scheduler
        deployed-from:
        - anzx/fabric-payments
        slo-type:
        - availability
        team-name:
        - fabric-payments
        user-journey:
        - manage-scheduled-payments
      name: anzx-view-scheduled-payments-availability
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://confluence.service.anz/display/ABT/Manage+scheduled+payments
      budgetingMethod: Occurrences
      description: Runbook - https://backstage.service.anz/docs/default/component/fabric-sre-runbooks/critical-user-journey/manage-scheduled-payments/
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"scheduler\"\nattributes.rpc.method
                IN (\"ListSchedules\")\nbody=\"GRPC Request was successfully processed\"\nattributes.rpc.grpc.status_code=0\n|
                bin _time span=1m \n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
          incremental: false
          total:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"scheduler\"\nattributes.rpc.method
                IN (\"ListSchedules\")\nbody=\"GRPC Request was * processed\"\nattributes.rpc.grpc.status_code
                IN (0,1,2,4,10,13,14,15)\n| bin _time span=1m \n| stats count as n9value
                by _time\n| union \n    [| tstats count as n9value where index=* by
                _time span=1m\n    | eval n9value=0]\n    | stats max(n9value) as n9value
                by _time\n| rename _time as n9time\n| fields n9value, n9time"
        displayName: Good
        name: objective-1
        target: 0.99
        value: 1
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:48:01Z"
          end: "2023-03-16T10:48:01Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: View account balances - Latency
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-accounts
        deployed-from:
        - anzx/fabric-accounts
        slo-type:
        - latency
        team-name:
        - fab-accounts
        user-journey:
        - view-account-balances
      name: anzx-view-account-balances-latency
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://confluence.service.anz/display/ABT/View+account+balances
      budgetingMethod: Occurrences
      description: Runbook - https://backstage.service.anz/docs/default/component/fabric-sre-runbooks/critical-user-journey/view-account-balance/
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: "index=\"anz_csnetwork_lb_prod\"\nhttpRequest.requestUrl IN (\"*.AccountAPI/ListAccounts\")\nhttpRequest.status=2*\nhttpRequest.latency_millis
                <= 900\njsonPayload.statusDetails=\"response_sent_by_backend\"\n| bin
                _time span=1m \n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
          incremental: false
          total:
            splunk:
              query: "index=\"anz_csnetwork_lb_prod\"\nhttpRequest.requestUrl IN (\"*.AccountAPI/ListAccounts\")\nhttpRequest.status=2*\njsonPayload.statusDetails=\"response_sent_by_backend\"\n|
                bin _time span=1m \n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
        displayName: Good
        name: objective-1
        target: 0.95
        value: 1
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:48:01Z"
          end: "2023-03-16T10:48:01Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: Manage daily payment limits - Availability
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-payments
        deployed-from:
        - anzx/fabric-payments
        slo-type:
        - availability
        team-name:
        - fabric-payments
        user-journey:
        - view-and-manage-daily-payment-limits
      name: anzx-manage-daily-payment-limits-availability
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://confluence.service.anz/display/ABT/View+and+Manage+daily+payment+limits
      budgetingMethod: Occurrences
      description: Runbook - https://backstage.service.anz/docs/default/component/fabric-sre-runbooks/critical-user-journey/view-and-manage-daily-payment-limits/
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"payments\"\nattributes.rpc.method=\"SetLimit\"\nattributes.rpc.grpc.status_code=0\n|
                bin _time span=1m \n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
          incremental: false
          total:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"payments\"\nattributes.rpc.method=\"SetLimit\"\nattributes.rpc.grpc.status_code
                IN (0,1,2,4,10,13,14,15,16)\n| bin _time span=1m \n| stats count as
                n9value by _time\n| union \n    [| tstats count as n9value where index=*
                by _time span=1m\n    | eval n9value=0]\n    | stats max(n9value) as
                n9value by _time\n| rename _time as n9time\n| fields n9value, n9time"
        displayName: Good
        name: objective-1
        target: 0.99
        value: 1
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:48:01Z"
          end: "2023-03-16T10:48:01Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: Entitlements - OCV Flow - Availability
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-entitlements
        deployed-from:
        - anzx/fabric-sre-cloud-monitoring
        slo-type:
        - availability
        team-name:
        - fabric-entitlements
        user-journey:
        - ocv-flow-journey
      name: anzx-entitlement-ocv-availability
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://backstage.service.anz/docs/default/component/fabric-entitlements/customerjourneys/
      budgetingMethod: Occurrences
      description: Runbook - https://backstage.service.anz/docs/default/component/fabric-sre-runbooks/entitlements/entitlements-runbook/
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: |-
                index="fabric_events_prod"
                sourcetype="entitlements"
                attributes.rpc.method IN ("LinkResources", "UpdateParty", "UpdatePartyAccountLegalRole", "UpdatePartyCardLegalRole")
                attributes.rpc.grpc.status_code=0
                | bin _time span=1m
                | stats count as n9value by _time
                | union
                [| tstats count as n9value where index=* by _time span=1m
                | eval n9value=0]
                | stats max(n9value) as n9value by _time
                | rename _time as n9time
                | fields n9value, n9time
          incremental: false
          total:
            splunk:
              query: |-
                index="fabric_events_prod"
                sourcetype="entitlements"
                attributes.rpc.method IN ("LinkResources", "UpdateParty", "UpdatePartyAccountLegalRole", "UpdatePartyCardLegalRole")
                attributes.rpc.grpc.status_code IN (0,1,2,4,7,10,13,14,15,16)
                | bin _time span=1m
                | stats count as n9value by _time
                | union
                [| tstats count as n9value where index=* by _time span=1m
                | eval n9value=0]
                | stats max(n9value) as n9value by _time
                | rename _time as n9time
                | fields n9value, n9time
        displayName: Good
        name: objective-1
        target: 0.99
        value: 1
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:48:01Z"
          end: "2023-03-16T10:48:01Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: Entitlements - Manage Entitled Account - Availability
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-entitlements
        deployed-from:
        - anzx/fabric-sre-cloud-monitoring
        slo-type:
        - availability
        team-name:
        - fabric-entitlements
        user-journey:
        - manage-entitled-accounts
      name: anzx-entitlement-entitledaccount-availability
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://backstage.service.anz/docs/default/component/fabric-entitlements/customerjourneys/
      budgetingMethod: Occurrences
      description: Runbook - https://backstage.service.anz/docs/default/component/fabric-sre-runbooks/entitlements/entitlements-runbook/
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: |-
                index="fabric_events_prod"
                sourcetype="entitlements"
                attributes.rpc.method IN ("ListEntitledAccounts", "GetEntitledAccount")
                attributes.rpc.grpc.status_code=0
                | bin _time span=1m
                | stats count as n9value by _time
                | union
                [| tstats count as n9value where index=* by _time span=1m
                | eval n9value=0]
                | stats max(n9value) as n9value by _time
                | rename _time as n9time
                | fields n9value, n9time
          incremental: false
          total:
            splunk:
              query: |-
                index="fabric_events_prod"
                sourcetype="entitlements"
                attributes.rpc.method IN ("ListEntitledAccounts", "GetEntitledAccount")
                attributes.rpc.grpc.status_code IN (0,1,2,4,7,10,13,14,15,16)
                | bin _time span=1m
                | stats count as n9value by _time
                | union
                [| tstats count as n9value where index=* by _time span=1m
                | eval n9value=0]
                | stats max(n9value) as n9value by _time
                | rename _time as n9time
                | fields n9value, n9time
        displayName: Good
        name: objective-1
        target: 0.99
        value: 1
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:48:01Z"
          end: "2023-03-16T10:48:01Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: Tag transactions - Availability
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-transactions
        deployed-from:
        - anzx/fabric-transactions
        slo-type:
        - availability
        team-name:
        - fab-transactions
        user-journey:
        - tag-transactions-availability
      name: anzx-tag-transactions-availability
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://confluence.service.anz/display/ABT/Tag+transactions+and+manage+tags
      budgetingMethod: Occurrences
      description: Runbook - https://backstage.service.anz/docs/default/component/fabric-sre-runbooks/critical-user-journey/tag-transactions-and-manage-tags/
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"transactions\"\nattributes.rpc.method=\"TagTransaction\"\nbody=\"GRPC
                Request was successfully processed\"\nattributes.rpc.grpc.status_code=0\n|
                bin _time span=1m \n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
          incremental: false
          total:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"transactions\"\nattributes.rpc.method=\"TagTransaction\"\nbody=\"GRPC
                Request was * processed\"\nattributes.rpc.grpc.status_code IN (0,13,16)
                \n| bin _time span=1m \n| stats count as n9value by _time\n| union \n
                \   [| tstats count as n9value where index=* by _time span=1m\n    |
                eval n9value=0]\n    | stats max(n9value) as n9value by _time\n| rename
                _time as n9time\n| fields n9value, n9time"
        displayName: Good
        name: objective-1
        target: 0.99
        value: 1
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:48:01Z"
          end: "2023-03-16T10:48:01Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: Manage transactions tags - Availability
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-transactions
        deployed-from:
        - anzx/fabric-transactions
        slo-type:
        - availability
        team-name:
        - fab-transactions
        user-journey:
        - manage-transactions-tags-availability
      name: anzx-manage-transactions-tags-availability
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://confluence.service.anz/display/ABT/Tag+transactions+and+manage+tags
      budgetingMethod: Occurrences
      description: Runbook - https://backstage.service.anz/docs/default/component/fabric-sre-runbooks/critical-user-journey/tag-transactions-and-manage-tags/
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"transactions\"\nattributes.rpc.method
                IN (\"CreateTag\", \"ListTags\", \"UpdateTag\", \"DeleteTag\")\nbody=\"GRPC
                Request was successfully processed\"\nattributes.rpc.grpc.status_code=0\n|
                bin _time span=1m \n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
          incremental: false
          total:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"transactions\"\nattributes.rpc.method
                IN (\"CreateTag\", \"ListTags\", \"UpdateTag\", \"DeleteTag\")\nbody=\"GRPC
                Request was * processed\"\nattributes.rpc.grpc.status_code IN (0,13,16)
                \n| bin _time span=1m \n| stats count as n9value by _time\n| union \n
                \   [| tstats count as n9value where index=* by _time span=1m\n    |
                eval n9value=0]\n    | stats max(n9value) as n9value by _time\n| rename
                _time as n9time\n| fields n9value, n9time"
        displayName: Good
        name: objective-1
        target: 0.99
        value: 1
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:48:01Z"
          end: "2023-03-16T10:48:01Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: View account balances - Availability
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-accounts
        deployed-from:
        - anzx/fabric-accounts
        slo-type:
        - availability
        team-name:
        - fab-accounts
        user-journey:
        - view-account-balances
      name: anzx-view-account-balances-availability
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://confluence.service.anz/display/ABT/View+account+balances
      budgetingMethod: Occurrences
      description: Runbook - https://backstage.service.anz/docs/default/component/fabric-sre-runbooks/critical-user-journey/view-account-balance/
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"accounts\"\nattributes.rpc.method=\"ListAccounts\"\nbody=\"GRPC
                Request was successfully processed\"\nattributes.rpc.grpc.status_code=0\n|
                bin _time span=1m \n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
          incremental: false
          total:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"accounts\"\nattributes.rpc.method=\"ListAccounts\"\nbody=\"GRPC
                Request was * processed\"\nattributes.rpc.grpc.status_code IN (0,12,13,15,16)\n|
                bin _time span=1m \n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
        displayName: Good
        name: objective-1
        target: 0.99
        value: 1
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:48:01Z"
          end: "2023-03-16T10:48:01Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: Process transactions - Availability
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-transactions
        deployed-from:
        - anzx/fabric-transactions
        slo-type:
        - availability
        team-name:
        - fabric-transactions
        user-journey:
        - view-transactions
      name: anzx-transactions-processing-availability
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://confluence.service.anz/display/ABT/View+transactions
      budgetingMethod: Occurrences
      description: Runbook - https://backstage.service.anz/docs/default/component/fabric-sre-runbooks/critical-user-journey/view-transactions/
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: |-
                index=dummy
                | union
                [| inputlookup transaction-processing-availability.csv
                | eval runHour = strftime(_time,"%H") ```Report should only from 6AM - 11PM```
                | where (runHour >= 6 and runHour <= 23)```to avoid false alerting due to batch run between 2-5AM```
                | rename n9value_good as n9value
                | rename _time as n9time
                | where n9value >= 0
                | fields n9time, n9value]
                | sort - n9time
                | table n9time, n9value
                | head 30
          incremental: false
          total:
            splunk:
              query: |-
                index=dummy
                | union
                [| inputlookup transaction-processing-availability.csv
                | eval runHour = strftime(_time,"%H") ```Report should only from 6AM - 11PM```
                | where (runHour >= 6 and runHour <= 23) ```to avoid false alerting due to batch run between 2-5AM```
                | rename n9value_total as n9value
                | rename _time as n9time
                | where n9value >= 0
                | fields n9time, n9value]
                | sort - n9time
                | table n9time, n9value
                | head 30
        displayName: Good
        name: objective-1
        target: 0.99
        value: 1
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:48:01Z"
          end: "2023-03-16T10:48:01Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: Make a payment - Availability
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-payments
        deployed-from:
        - anzx/fabric-payments
        slo-type:
        - availability
        team-name:
        - fabric-payments
        user-journey:
        - make-a-payment
      name: anzx-make-a-payment-availability
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://confluence.service.anz/display/ABT/Make+a+payment
      budgetingMethod: Occurrences
      description: Runbook - https://backstage.service.anz/docs/default/component/fabric-sre-runbooks/critical-user-journey/make-a-payment/
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: |-
                index=dummy
                | union
                [| inputlookup payment-processing-availability.csv
                | rename n9value_good as n9value
                | rename _time as n9time
                | where n9value >= 0
                | fields n9time, n9value]
                | sort - n9time
                | table n9time, n9value
                | head 30
          incremental: false
          total:
            splunk:
              query: |-
                index=dummy
                | union
                [| inputlookup payment-processing-availability.csv
                | rename n9value_total as n9value
                | rename _time as n9time
                | where n9value >= 0
                | fields n9time, n9value]
                | sort - n9time
                | table n9time, n9value
                | head 30
        displayName: Good
        name: objective-1
        target: 0.99
        value: 1
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:48:01Z"
          end: "2023-03-16T10:48:01Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: Make a payment - Latency
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-payments
        deployed-from:
        - anzx/fabric-payments
        slo-type:
        - latency
        team-name:
        - fabric-payments
        user-journey:
        - make-a-payment
      name: anzx-make-a-payment-latency
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://confluence.service.anz/display/ABT/Make+a+payment
      budgetingMethod: Occurrences
      description: Runbook - https://backstage.service.anz/docs/default/component/fabric-sre-runbooks/critical-user-journey/make-a-payment/
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: |-
                index=dummy
                | union
                [| inputlookup payment-processing-latency.csv
                | rename n9value_good as n9value
                | rename _time as n9time
                | where n9value >= 0
                | fields n9time, n9value]
                | sort - n9time
                | table n9time, n9value
                | head 30
          incremental: false
          total:
            splunk:
              query: |-
                index=dummy
                | union
                [| inputlookup payment-processing-latency.csv
                | rename n9value_total as n9value
                | rename _time as n9time
                | where n9value >= 0
                | fields n9time, n9value]
                | sort - n9time
                | table n9time, n9value
                | head 30
        displayName: Good
        name: objective-1
        target: 0.95
        value: 1
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:48:01Z"
          end: "2023-03-16T10:48:01Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: Tag transactions - Latency
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-transactions
        deployed-from:
        - anzx/fabric-transactions
        slo-type:
        - latency
        team-name:
        - fab-transactions
        user-journey:
        - tag-transactions-latency
      name: anzx-tag-transactions-latency
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://confluence.service.anz/display/ABT/Tag+transactions+and+manage+tags
      budgetingMethod: Occurrences
      description: Runbook - https://backstage.service.anz/docs/default/component/fabric-sre-runbooks/critical-user-journey/tag-transactions-and-manage-tags/
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: "index=\"anz_csnetwork_lb_prod\"\nhttpRequest.requestUrl IN (\"*.TransactionAPI/TagTransaction\")\nhttpRequest.status=2*\nhttpRequest.latency_millis
                <= 500\njsonPayload.statusDetails=\"response_sent_by_backend\"\n| bin
                _time span=1m \n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
          incremental: false
          total:
            splunk:
              query: "index=\"anz_csnetwork_lb_prod\"\nhttpRequest.requestUrl IN (\"*.TransactionAPI/TagTransaction\")\nhttpRequest.status=2*\njsonPayload.statusDetails=\"response_sent_by_backend\"\n|
                bin _time span=1m \n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
        displayName: Good
        name: objective-1
        target: 0.95
        value: 1
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:48:01Z"
          end: "2023-03-16T10:48:01Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: View account balances - Freshness
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-accounts
        deployed-from:
        - anzx/fabric-accounts
        slo-type:
        - latency
        team-name:
        - fab-accounts
        user-journey:
        - view-account-balances
      name: anzx-view-account-balances-freshness
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://confluence.service.anz/display/ABT/View+account+balances
      budgetingMethod: Occurrences
      description: Runbook - https://backstage.service.anz/docs/default/component/fabric-sre-runbooks/critical-user-journey/view-account-balance/
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: |-
                index="fabric_events_prod"
                sourcetype="accounts"
                attributes.stale_account_balance_count=0
                | bin _time span=1m
                | stats count as n9value by _time
                | union
                [| tstats count as n9value where index=* by _time span=1m
                | eval n9value=0]
                | stats max(n9value) as n9value by _time
                | rename _time as n9time
                | fields n9value, n9time
          incremental: false
          total:
            splunk:
              query: |-
                index="fabric_events_prod"
                sourcetype="accounts"
                body="Retrieved account statuses"
                | bin _time span=1m
                | stats count as n9value by _time
                | union
                [| tstats count as n9value where index=* by _time span=1m
                | eval n9value=0]
                | stats max(n9value) as n9value by _time
                | rename _time as n9time
                | fields n9value, n9time
        displayName: Good
        name: objective-1
        target: 0.99
        value: 1
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:48:01Z"
          end: "2023-03-16T10:48:01Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: Command Centre - Consumer - Availability
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-commandcentre
        deployed-from:
        - anzx/fabric-commandcentre
        slo-type:
        - availability
        team-name:
        - fab-projects
        user-journey:
        - command-centre
      name: command-centre-consumer-ava
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://confluence.service.anz/x/awZ1YQ
      budgetingMethod: Occurrences
      description: Playbook - https://confluence.service.anz/x/eQZ1YQ
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: "index=fabric_events_prod\nsourcetype=commandcentre\nattributes.rpc.method=Consumer\nbody=\"GRPC
                Request was successfully processed\"\nattributes.rpc.grpc.status_code=0\n|
                bin _time span=1m \n| stats count as n9value by _time\n| union \n  [|
                tstats count as n9value where index=* by _time span=1m\n  | eval n9value=0]\n|
                stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
          incremental: false
          total:
            splunk:
              query: "index=fabric_events_prod\nsourcetype=commandcentre\nattributes.rpc.method=Consumer\nbody=\"GRPC
                Request was *successfully processed\"\nattributes.rpc.grpc.status_code
                IN (0,13)\n| bin _time span=1m \n| stats count as n9value by _time\n|
                union \n  [| tstats count as n9value where index=* by _time span=1m\n
                \ | eval n9value=0]\n| stats max(n9value) as n9value by _time\n| rename
                _time as n9time\n| fields n9value, n9time"
        displayName: Good
        name: objective-1
        target: 0.99
        value: 1
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:48:01Z"
          end: "2023-03-16T10:48:01Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: Manage scheduled payments - Availability
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-scheduler
        deployed-from:
        - anzx/fabric-payments
        slo-type:
        - availability
        team-name:
        - fabric-payments
        user-journey:
        - manage-scheduled-payments
      name: anzx-manage-scheduled-payments-availability
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://confluence.service.anz/display/ABT/Manage+scheduled+payments
      budgetingMethod: Occurrences
      description: Runbook - https://backstage.service.anz/docs/default/component/fabric-sre-runbooks/critical-user-journey/manage-scheduled-payments/
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"scheduler\"\nattributes.rpc.method
                IN (\"CreateSchedule\",\"UpdateSchedule\",\"ToggleSchedule\",\"DeleteSchedule\")\nbody=\"GRPC
                Request was successfully processed\"\nattributes.rpc.grpc.status_code=0\n|
                bin _time span=1m \n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
          incremental: false
          total:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"scheduler\"\nattributes.rpc.method
                IN (\"CreateSchedule\",\"UpdateSchedule\",\"ToggleSchedule\",\"DeleteSchedule\")\nbody=\"GRPC
                Request was * processed\"\nattributes.rpc.grpc.status_code IN (0,1,2,4,10,13,14,15)\n|
                bin _time span=1m \n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
        displayName: Good
        name: objective-1
        target: 0.99
        value: 1
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:48:01Z"
          end: "2023-03-16T10:48:01Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: Manage payees - Availability
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-bluepages
        deployed-from:
        - anzx/fabric-payments
        slo-type:
        - availability
        team-name:
        - fabric-payments
        user-journey:
        - manage-payees
      name: anzx-manage-payees-availability
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://confluence.service.anz/display/ABT/Manage+payees
      budgetingMethod: Occurrences
      description: Runbook - https://backstage.service.anz/docs/default/component/fabric-sre-runbooks/critical-user-journey/manage-payees/
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"bluepages\" \nattributes.rpc.method
                IN (\"CreatePayees\", \"UpdatePayees\", \"DeletePayees\", \"AddQuickPayees\",
                \"UpdateQuickPayees\")\nbody=\"GRPC Request was successfully processed\"\nattributes.rpc.grpc.status_code=0\n|
                bin _time span=1m \n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
          incremental: false
          total:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"bluepages\"\nattributes.rpc.method
                IN (\"CreatePayees\", \"UpdatePayees\", \"DeletePayees\", \"AddQuickPayees\",
                \"UpdateQuickPayees\")\nbody=\"GRPC Request was * processed\"\nattributes.rpc.grpc.status_code
                IN (0,1,2,4,10,13,14,15,16)\n| bin _time span=1m \n| stats count as
                n9value by _time\n| union \n    [| tstats count as n9value where index=*
                by _time span=1m\n    | eval n9value=0]\n    | stats max(n9value) as
                n9value by _time\n| rename _time as n9time\n| fields n9value, n9time"
        displayName: Good
        name: objective-1
        target: 0.99
        value: 1
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:48:01Z"
          end: "2023-03-16T10:48:01Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: Entitlements - Contract PubSub - Freshness
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-entitlements
        deployed-from:
        - anzx/fabric-sre-cloud-monitoring
        slo-type:
        - availability
        team-name:
        - fabric-entitlements
        user-journey:
        - user-origination-journey
      name: anzx-entitlements-contract-pubsub-freshness
      project: anzx-prod
    spec:
      alertPolicies: []
      attachments:
      - displayName: CUJ Link
        url: https://backstage.service.anz/docs/default/component/fabric-entitlements/customerjourneys/
      budgetingMethod: Occurrences
      description: Runbook - https://backstage.service.anz/docs/default/component/fabric-sre-runbooks/entitlements/entitlements-runbook/
      indicator:
        metricSource:
          kind: Agent
          name: gcm-prod
          project: anzx-prod
      objectives:
      - displayName: Good
        name: objective-1
        op: lt
        rawMetric:
          query:
            gcm:
              projectId: anz-x-monitoring-prod-9755ba
              query: |-
                fetch pubsub_subscription
                | metric 'pubsub.googleapis.com/subscription/oldest_unacked_message_age'
                | filter
                    (resource.subscription_id == 'entitlements-contract-events.entitlements-prod')
                | group_by 1m,
                    [value_oldest_unacked_message_age_mean:
                        max(value.oldest_unacked_message_age)]
                | every 1m
        target: 0.95
        value: 8
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:48:01Z"
          end: "2023-03-16T10:48:01Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: Manage transactions tags - Latency
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-transactions
        deployed-from:
        - anzx/fabric-transactions
        slo-type:
        - latency
        team-name:
        - fab-transactions
        user-journey:
        - manage-transactions-tags-latency
      name: anzx-manage-transactions-tags-latency
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://confluence.service.anz/display/ABT/Tag+transactions+and+manage+tags
      budgetingMethod: Occurrences
      description: Runbook - https://backstage.service.anz/docs/default/component/fabric-sre-runbooks/critical-user-journey/tag-transactions-and-manage-tags/
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: "index=\"anz_csnetwork_lb_prod\"\nhttpRequest.requestUrl IN (\"*.TagAPI/CreateTag\",
                \"*.TagAPI/ListTags\", \"*.TagAPI/UpdateTag\", \"*.TagAPI/DeleteTag\")\nhttpRequest.status=2*\nhttpRequest.latency_millis
                <= 700\njsonPayload.statusDetails=\"response_sent_by_backend\"\n| bin
                _time span=1m \n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
          incremental: false
          total:
            splunk:
              query: "index=\"anz_csnetwork_lb_prod\"\nhttpRequest.requestUrl IN (\"*.TagAPI/CreateTag\",
                \"*.TagAPI/ListTags\", \"*.TagAPI/UpdateTag\", \"*.TagAPI/DeleteTag\")\nhttpRequest.status=2*\njsonPayload.statusDetails=\"response_sent_by_backend\"\n|
                bin _time span=1m \n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
        displayName: Good
        name: objective-1
        target: 0.95
        value: 1
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:48:01Z"
          end: "2023-03-16T10:48:01Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: Make a payment (API) - Latency
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-payments
        deployed-from:
        - anzx/fabric-payments
        slo-type:
        - latency
        team-name:
        - fabric-payments
        user-journey:
        - make-a-payment
      name: anzx-make-a-payment-api-latency
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://confluence.service.anz/display/ABT/Make+a+payment
      budgetingMethod: Occurrences
      description: Runbook - https://backstage.service.anz/docs/default/component/fabric-sre-runbooks/critical-user-journey/make-a-payment/
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: "index=\"anz_csnetwork_lb_prod\"\nhttpRequest.requestUrl IN ( \"*.PaymentAPI/Pay\",
                \"*.PaymentAPI/Transfer\" )\nhttpRequest.status=2*\nhttpRequest.latency_millis
                <= 3000\njsonPayload.statusDetails=\"response_sent_by_backend\"\n| bin
                _time span=1m \n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
          incremental: false
          total:
            splunk:
              query: "index=\"anz_csnetwork_lb_prod\"\nhttpRequest.requestUrl IN ( \"*.PaymentAPI/Pay\",
                \"*.PaymentAPI/Transfer\" )\nhttpRequest.status=2*\njsonPayload.statusDetails=\"response_sent_by_backend\"\n|
                bin _time span=1m \n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
        displayName: Good
        name: objective-1
        target: 0.95
        value: 1
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:48:01Z"
          end: "2023-03-16T10:48:01Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: View transactions (merchant update) - Availability
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-transactions
        deployed-from:
        - anzx/fabric-transactions
        slo-type:
        - availability
        team-name:
        - fab-transactions
        user-journey:
        - view-transactions-merchant-update-availability
      name: anzx-view-transactions-merchant-update-availability
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://confluence.service.anz/display/ABT/View+transactions
      budgetingMethod: Occurrences
      composite:
        burnRateCondition:
          op: gt
          value: 1
        target: 0.99
      description: Runbook - https://backstage.service.anz/docs/default/component/fabric-sre-runbooks/critical-user-journey/view-transactions/
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"fabric-merchant-update-prod\"\nmessage=\"*Finished
                with status code: 200\"\n| bin _time span=1m \n| stats count as n9value
                by _time\n| union \n    [| tstats count as n9value where index=* by
                _time span=1m\n    | eval n9value=0]\n    | stats max(n9value) as n9value
                by _time\n| rename _time as n9time\n| fields n9value, n9time"
          incremental: false
          total:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"fabric-merchant-update-prod\"\nmessage=\"*Finished
                with status code:*\"\n| bin _time span=1m \n| stats count as n9value
                by _time\n| union \n    [| tstats count as n9value where index=* by
                _time span=1m\n    | eval n9value=0]\n    | stats max(n9value) as n9value
                by _time\n| rename _time as n9time\n| fields n9value, n9time"
        displayName: Webhook
        name: merchant-update-webhook
        target: 0.99
        value: 1
      - countMetrics:
          good:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"dexter-merchant-update-pipeline-*\"\nstep=\"Fetch
                LWC updates/Call search API\"\nmessage=\"Successful LWC response received
                for LWC guid*\"\n| bin _time span=1m \n| stats count as n9value by _time\n|
                union \n    [| tstats count as n9value where index=* by _time span=1m\n
                \   | eval n9value=0]\n    | stats max(n9value) as n9value by _time\n|
                rename _time as n9time\n| fields n9value, n9time"
          incremental: false
          total:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"dexter-merchant-update-pipeline-*\"\nstep=\"Fetch
                LWC updates/Call search API\"\nmessage IN (\"Failed request not eligible
                for retry or retry count has exhausted. Adding to failed tag.\", \"Successful
                LWC response received for LWC guid*\")\n| bin _time span=1m \n| stats
                count as n9value by _time\n| union \n    [| tstats count as n9value
                where index=* by _time span=1m\n    | eval n9value=0]\n    | stats max(n9value)
                as n9value by _time\n| rename _time as n9time\n| fields n9value, n9time"
        displayName: Search API
        name: merchant-update-search-api
        target: 0.99
        value: 2
      - countMetrics:
          good:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"dexter-merchant-update-pipeline-*\"\nstep=\"Execute
                partitioned DML queries to spanner\"\nmessage IN (\"Processing DB updates
                for eventType:*\", \"Some DB queries have failed. Writing failed queries
                to failure tag.\")\n| eval total=if(like(message, \"Processing DB updates
                for eventType:%\"),1,0)\n| eval bad=if(like(message, \"Some DB queries
                have failed. Writing failed queries to failure tag.\"),1,0)\n| eval
                good=sum(total)-sum(bad)\n| bin _time span=1m\n| stats count(good) as
                n9value by _time\n| union \n    [| tstats count as n9value where index=*
                by _time span=1m\n    | eval n9value=0]\n    | stats max(n9value) as
                n9value by _time\n| rename _time as n9time\n| fields n9value, n9time"
          incremental: false
          total:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"dexter-merchant-update-pipeline-*\"\nstep=\"Execute
                partitioned DML queries to spanner\"\nmessage=\"Processing DB updates
                for eventType:*\"\n| bin _time span=1m \n| stats count as n9value by
                _time\n| union \n    [| tstats count as n9value where index=* by _time
                span=1m\n    | eval n9value=0]\n    | stats max(n9value) as n9value
                by _time\n| rename _time as n9time\n| fields n9value, n9time"
        displayName: Write to Spanner
        name: merchant-update-write-to-spanner
        target: 0.99
        value: 3
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:50:14Z"
          end: "2023-03-16T10:50:14Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: Entitlements - EntitledCard - Latency
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-entitlements
        deployed-from:
        - anzx/fabric-sre-cloud-monitoring
        slo-type:
        - latency
        team-name:
        - fabric-entitlements
        user-journey:
        - manage-entitled-cards
      name: anzx-entitlement-entitledcard-latency
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://backstage.service.anz/docs/default/component/fabric-entitlements/customerjourneys/
      budgetingMethod: Occurrences
      description: Runbook - https://backstage.service.anz/docs/default/component/fabric-sre-runbooks/entitlements/entitlements-runbook/
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: |-
                index="fabric_events_prod"
                sourcetype="entitlements"
                attributes.rpc.method IN ("ListEntitledCards", "GetEntitledCard")
                attributes.rpc.grpc.status_code=0
                attributes.rpc.server.duration.ttfb < 500
                | bin _time span=1m
                | stats count as n9value by _time
                | union
                [| tstats count as n9value where index=* by _time span=1m
                | eval n9value=0]
                | stats max(n9value) as n9value by _time
                | rename _time as n9time
                | fields n9value, n9time
          incremental: false
          total:
            splunk:
              query: |-
                index="fabric_events_prod"
                sourcetype="entitlements"
                attributes.rpc.method IN ("ListEntitledCards", "GetEntitledCard")
                attributes.rpc.grpc.status_code=0
                | bin _time span=1m
                | stats count as n9value by _time
                | union
                [| tstats count as n9value where index=* by _time span=1m
                | eval n9value=0]
                | stats max(n9value) as n9value by _time
                | rename _time as n9time
                | fields n9value, n9time
        displayName: Good
        name: objective-1
        target: 0.95
        value: 1
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:50:14Z"
          end: "2023-03-16T10:50:14Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: VCAS - Authorise transactions (AR and C) - Availability
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-vcas
        deployed-from:
        - anzx/fabric-vcas
        slo-type:
        - availability
        team-name:
        - fab-selfservice
        user-journey:
        - authorise-transactions-arc-availability
      name: anzx-authorise-transactions-arc-availability
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://confluence.service.anz/display/ABT/Playbook+-+VCAS
      budgetingMethod: Occurrences
      composite:
        burnRateCondition:
          op: gt
          value: 1
        target: 0.99
      description: Runbook - https://confluence.service.anz/display/ABT/Playbook+-+VCAS
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"vcas-server-*\"\n\"attributes.connect
                response payload.Msg.stepup_type\"=\"OTP\"\n\"attributes.connect response
                payload.Msg.status\" IN (\"SUCCESS\", \"FAILWITHFEEDBACK\", \"AUTHENTICATED\",
                \"REJECTED\")\n| bin _time span=1m\n| stats count as n9value by _time\n|
                union \n    [| tstats count as n9value where index=* by _time span=1m\n
                \   | eval n9value=0]\n    | stats max(n9value) as n9value by _time\n|
                rename _time as n9time\n| fields n9value, n9time"
          incremental: false
          total:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"vcas-server-*\"\nbody=\"Response
                received from server:*VCASAPI/StepUp\"\n\"attributes.connect response
                payload.Msg.stepup_type\"=\"OTP\"\n\"attributes.connect response payload.Msg.status\"
                IN (\"SUCCESS\", \"FAILWITHFEEDBACK\", \"AUTHENTICATED\", \"REJECTED\",
                \"ERROR\") \n| bin _time span=1m\n| stats count as n9value by _time\n|
                union \n    [| tstats count as n9value where index=* by _time span=1m\n
                \   | eval n9value=0]\n    | stats max(n9value) as n9value by _time\n|
                rename _time as n9time\n| fields n9value, n9time"
        displayName: StepUp
        name: vcas-stepup
        target: 0.99
        value: 1
      - countMetrics:
          good:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"vcas-server-*\"\nbody=\"Response
                received from server:*VCASAPI/Initiate\"\n\"attributes.connect response
                payload.Msg.credentials{}.credential_type\"=\"OTPSMS\"\n\"attributes.connect
                response payload.Msg.status\"=\"SUCCESS\"\n| bin _time span=1m\n| stats
                count as n9value by _time\n| union \n    [| tstats count as n9value
                where index=* by _time span=1m\n    | eval n9value=0]\n    | stats max(n9value)
                as n9value by _time\n| rename _time as n9time\n| fields n9value, n9time"
          incremental: false
          total:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"vcas-server-*\"\nbody=\"Response
                received from server:*VCASAPI/Initiate\"\n\"attributes.connect response
                payload.Msg.credentials{}.credential_type\"=\"OTPSMS\"\n\"attributes.connect
                response payload.Msg.status\" IN (\"SUCCESS\", \"ERROR\")\n| bin _time
                span=1m\n| stats count as n9value by _time\n| union \n    [| tstats
                count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
        displayName: Initiate OTP authorisation
        name: vcas-initiate-otp-authorisation
        target: 0.99
        value: 2
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:50:14Z"
          end: "2023-03-16T10:50:14Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: View goal balances - Availability
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-accounts
        deployed-from:
        - anzx/fabric-accounts
        slo-type:
        - availability
        team-name:
        - fab-accounts
        user-journey:
        - view-goal-balances
      name: anzx-view-goal-balances-availability
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://confluence.service.anz/display/ABT/View+goal+balances
      budgetingMethod: Occurrences
      description: Runbook - https://backstage.service.anz/docs/default/component/fabric-sre-runbooks/critical-user-journey/view-goal-balance/
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"accounts\"\nattributes.rpc.method=\"ListBuckets\"\nbody=\"GRPC
                Request was successfully processed\"\nattributes.rpc.grpc.status_code=0\n|
                bin _time span=1m \n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
          incremental: false
          total:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"accounts\"\nattributes.rpc.method=\"ListBuckets\"\nbody=\"GRPC
                Request was * processed\"\nattributes.rpc.grpc.status_code IN (0,12,13,15,16)\n|
                bin _time span=1m \n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
        displayName: Good
        name: objective-1
        target: 0.99
        value: 1
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:50:14Z"
          end: "2023-03-16T10:50:14Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: VCAS - Authorise transactions (AR and C) - Latency
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-vcas
        deployed-from:
        - anzx/fabric-vcas
        slo-type:
        - availability
        team-name:
        - fab-selfservice
        user-journey:
        - authorise-transactions-arc-latency
      name: anzx-authorise-transactions-arc-latency
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://confluence.service.anz/display/ABT/Playbook+-+VCAS
      budgetingMethod: Occurrences
      composite:
        burnRateCondition:
          op: gt
          value: 1
        target: 0.95
      description: Runbook - https://confluence.service.anz/display/ABT/Playbook+-+VCAS
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"vcas-server-*\"\nbody=\"APCAM
                StepUp Success*\"\nattributes.time_since_rpc_start <= 3000\n| bin _time
                span=1m\n| stats count as n9value by _time\n| union \n    [| tstats
                count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
          incremental: false
          total:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"vcas-server-*\"\nbody=\"APCAM
                StepUp Success*\"\n| bin _time span=1m\n| stats count as n9value by
                _time\n| union \n    [| tstats count as n9value where index=* by _time
                span=1m\n    | eval n9value=0]\n    | stats max(n9value) as n9value
                by _time\n| rename _time as n9time\n| fields n9value, n9time"
        displayName: StepUp
        name: vcas-stepup
        target: 0.95
        value: 1
      - countMetrics:
          good:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"vcas-server-*\"\nbody=\"APCAM
                Initiate Success*\"\nattributes.time_since_rpc_start <= 3000\n| bin
                _time span=1m\n| stats count as n9value by _time\n| union \n    [| tstats
                count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
          incremental: false
          total:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"vcas-server-*\"\nbody=\"APCAM
                Initiate Success*\"\n| bin _time span=1m\n| stats count as n9value by
                _time\n| union \n    [| tstats count as n9value where index=* by _time
                span=1m\n    | eval n9value=0]\n    | stats max(n9value) as n9value
                by _time\n| rename _time as n9time\n| fields n9value, n9time"
        displayName: Initiate OTP authorisation
        name: vcas-initiate-otp-authorisation
        target: 0.95
        value: 2
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:50:14Z"
          end: "2023-03-16T10:50:14Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: Entitlements - Others- Latency
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-entitlements
        deployed-from:
        - anzx/fabric-sre-cloud-monitoring
        slo-type:
        - latency
        team-name:
        - fabric-entitlements
        user-journey:
        - others
      name: anzx-entitlements-others-latency
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://backstage.service.anz/docs/default/component/fabric-entitlements/customerjourneys/
      budgetingMethod: Occurrences
      description: Runbook - https://backstage.service.anz/docs/default/component/fabric-sre-runbooks/entitlements/entitlements-runbook/
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: |-
                index="fabric_events_prod"
                sourcetype="entitlements"
                attributes.rpc.method IN (ExplainAccountEntitlements", "ListPersonaForCardToken", "ListProducts", "ListProducts")
                attributes.rpc.grpc.status_code=0
                attributes.rpc.server.duration.ttfb < 70
                | bin _time span=1m
                | stats count as n9value by _time
                | union
                [| tstats count as n9value where index=* by _time span=1m
                | eval n9value=0]
                | stats max(n9value) as n9value by _time
                | rename _time as n9time
                | fields n9value, n9time
          incremental: false
          total:
            splunk:
              query: |-
                index="fabric_events_prod"
                sourcetype="entitlements"
                attributes.rpc.method IN (ExplainAccountEntitlements", "ListPersonaForCardToken", "ListProducts", "ListProducts")
                attributes.rpc.grpc.status_code=0
                | bin _time span=1m
                | stats count as n9value by _time
                | union
                [| tstats count as n9value where index=* by _time span=1m
                | eval n9value=0]
                | stats max(n9value) as n9value by _time
                | rename _time as n9time
                | fields n9value, n9time
        displayName: Good
        name: objective-1
        target: 0.99
        value: 1
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:50:14Z"
          end: "2023-03-16T10:50:14Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: View goal balances - Latency
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-accounts
        deployed-from:
        - anzx/fabric-accounts
        slo-type:
        - latency
        team-name:
        - fab-accounts
        user-journey:
        - view-goal-balances
      name: anzx-view-goal-balances-latency
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://confluence.service.anz/display/ABT/View+goal+balances
      budgetingMethod: Occurrences
      description: Runbook - https://backstage.service.anz/docs/default/component/fabric-sre-runbooks/critical-user-journey/view-goal-balance/
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: "index=\"anz_csnetwork_lb_prod\"\nhttpRequest.requestUrl=\"https://fabric*/fabric.service.accounts.*.BucketAPI/ListBuckets\"\nhttpRequest.status=2*\nhttpRequest.latency_millis
                <= 800\njsonPayload.statusDetails=\"response_sent_by_backend\"\n| bin
                _time span=1m \n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
          incremental: false
          total:
            splunk:
              query: "index=\"anz_csnetwork_lb_prod\"\nhttpRequest.requestUrl=\"https://fabric*/fabric.service.accounts.*.BucketAPI/ListBuckets\"\nhttpRequest.status=2*\njsonPayload.statusDetails=\"response_sent_by_backend\"\n|
                bin _time span=1m \n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
        displayName: Good
        name: objective-1
        target: 0.95
        value: 1
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:50:14Z"
          end: "2023-03-16T10:50:14Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: Entitlements - Manage Entitled Accounts - Latency
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-entitlements
        deployed-from:
        - anzx/fabric-sre-cloud-monitoring
        slo-type:
        - latency
        team-name:
        - fabric-entitlements
        user-journey:
        - manage-entitled-accounts
      name: anzx-entitlement-entitledaccount-latency
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://backstage.service.anz/docs/default/component/fabric-entitlements/customerjourneys/
      budgetingMethod: Occurrences
      description: Runbook - https://backstage.service.anz/docs/default/component/fabric-sre-runbooks/entitlements/entitlements-runbook/
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: |-
                index="fabric_events_prod"
                sourcetype="entitlements"
                attributes.rpc.method IN ("ListEntitledAccounts", "GetEntitledAccount")
                attributes.rpc.grpc.status_code=0
                attributes.rpc.server.duration.ttfb < 60
                | bin _time span=1m
                | stats count as n9value by _time
                | union
                [| tstats count as n9value where index=* by _time span=1m
                | eval n9value=0]
                | stats max(n9value) as n9value by _time
                | rename _time as n9time
                | fields n9value, n9time
          incremental: false
          total:
            splunk:
              query: |-
                index="fabric_events_prod"
                sourcetype="entitlements"
                attributes.rpc.method IN ("ListEntitledAccounts", "GetEntitledAccount")
                attributes.rpc.grpc.status_code=0
                | bin _time span=1m
                | stats count as n9value by _time
                | union
                [| tstats count as n9value where index=* by _time span=1m
                | eval n9value=0]
                | stats max(n9value) as n9value by _time
                | rename _time as n9time
                | fields n9value, n9time
        displayName: EntitledAccounts
        name: entitlements-entitledaccounts
        target: 0.95
        value: 1
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:50:14Z"
          end: "2023-03-16T10:50:14Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: Create and manage goals - Latency
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-accounts
        deployed-from:
        - anzx/fabric-accounts
        slo-type:
        - latency
        team-name:
        - fab-accounts
        user-journey:
        - create-and-manage-goals
      name: anzx-create-and-manage-goals-latency
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://confluence.service.anz/display/ABT/Create+and+manage+goals
      budgetingMethod: Occurrences
      description: Runbook - https://backstage.service.anz/docs/default/component/fabric-sre-runbooks/critical-user-journey/create-and-manage-goals/
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: "index=\"anz_csnetwork_lb_prod\" \nhttpRequest.requestUrl IN (\"*.BucketAPI/CreateBucket\",
                \"*.BucketAPI/UpdateBucket\", \"*.BucketAPI/CloseBucket\")\nhttpRequest.status=2*\n(httpRequest.latency_millis
                >= 100 AND httpRequest.latency_millis <= 1000)\njsonPayload.statusDetails=\"response_sent_by_backend\"\n|
                bin _time span=1m \n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
          incremental: false
          total:
            splunk:
              query: "index=\"anz_csnetwork_lb_prod\"\nhttpRequest.requestUrl IN (\"*.BucketAPI/CreateBucket\",
                \"*.BucketAPI/UpdateBucket\", \"*.BucketAPI/CloseBucket\")\nhttpRequest.status=2*\nhttpRequest.latency_millis
                >= 100\njsonPayload.statusDetails=\"response_sent_by_backend\"\n| bin
                _time span=1m \n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
        displayName: Good
        name: objective-1
        target: 0.95
        value: 1
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:50:14Z"
          end: "2023-03-16T10:50:14Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: View transactions (sync) - Availability
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-transactions
        deployed-from:
        - anzx/fabric-transactions
        slo-type:
        - availability
        team-name:
        - fab-transactions
        user-journey:
        - view-transactions-sync-availability
      name: anzx-view-transactions-sync-availability
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://confluence.service.anz/display/ABT/View+transactions
      budgetingMethod: Occurrences
      description: Runbook - https://backstage.service.anz/docs/default/component/fabric-sre-runbooks/critical-user-journey/view-transactions/
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"transactions\"\nattributes.rpc.method=\"SyncTransactions\"\nbody=\"GRPC
                Request was successfully processed\"\nattributes.rpc.grpc.status_code=0\n|
                bin _time span=1m \n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
          incremental: false
          total:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"transactions\"\nattributes.rpc.method=\"SyncTransactions\"\nbody=\"GRPC
                Request was * processed\"\nattributes.rpc.grpc.status_code IN (0,13,16)
                \n| bin _time span=1m \n| stats count as n9value by _time\n| union \n
                \   [| tstats count as n9value where index=* by _time span=1m\n    |
                eval n9value=0]\n    | stats max(n9value) as n9value by _time\n| rename
                _time as n9time\n| fields n9value, n9time"
        displayName: Good
        name: objective-1
        target: 0.99
        value: 1
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:50:14Z"
          end: "2023-03-16T10:50:14Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: Create and manage goals - Availability
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-accounts
        deployed-from:
        - anzx/fabric-accounts
        slo-type:
        - availability
        team-name:
        - fab-accounts
        user-journey:
        - create-and-manage-goals
      name: anzx-create-and-manage-goals-availability
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://confluence.service.anz/display/ABT/Create+and+manage+goals
      budgetingMethod: Occurrences
      description: Runbook - https://backstage.service.anz/docs/default/component/fabric-sre-runbooks/critical-user-journey/create-and-manage-goals/
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"accounts\"\nattributes.rpc.method
                IN (\"CreateBucket\", \"UpdateBucket\", \"CloseBucket\")\nbody=\"GRPC
                Request was successfully processed\"\nattributes.rpc.grpc.status_code=0\n|
                bin _time span=1m \n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
          incremental: false
          total:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"accounts\"\nattributes.rpc.method
                IN (\"CreateBucket\", \"UpdateBucket\", \"CloseBucket\")\nbody=\"GRPC
                Request was * processed\"\nattributes.rpc.grpc.status_code IN (0,12,13,15,16)\n|
                bin _time span=1m \n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
        displayName: Good
        name: objective-1
        target: 0.99
        value: 1
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:50:14Z"
          end: "2023-03-16T10:50:14Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: Command Listener - Message processed to firebase - Availability
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-commandlistener
        deployed-from:
        - anzx/fabric-commandcentre
        slo-type:
        - availability
        team-name:
        - fab-projects
        user-journey:
        - command-listener
      name: command-listener-message-processed-firebase-ava
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://confluence.service.anz/x/xQVVYQ
      budgetingMethod: Occurrences
      description: Playbook - https://confluence.service.anz/x/dgZ1YQ
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=commandlistener\n\"Delivered
                messages to Firebase\"\n| rex field=body \"SuccessCount:(?<SuccessCount>[0-9])
                FailureCount:(?<FailureCount>[0-9]) InvalidTokens:(?<InvalidTokens>[0-9])
                ToRetry:(?<ToRetry>[0-9])\"\n| bin _time span=1m \n| stats sum(SuccessCount)
                as n9value by _time\n| union \n    [| tstats count as n9value where
                index=* by _time span=1m\n    | eval n9value=0]\n| stats max(n9value)
                as n9value by _time\n| rename _time as n9time\n| fields n9value, n9time"
          incremental: false
          total:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=commandlistener\n\"Delivered
                messages to Firebase\"\n| rex field=body \"SuccessCount:(?<SuccessCount>[0-9])
                FailureCount:(?<FailureCount>[0-9]) InvalidTokens:(?<InvalidTokens>[0-9])
                ToRetry:(?<ToRetry>[0-9])\"\n| eval TotalCount = FailureCount+SuccessCount\n|
                bin _time span=1m \n| stats sum(TotalCount) as n9value by _time\n| union
                \n    [| tstats count as n9value where index=* by _time span=1m\n    |
                eval n9value=0]\n| stats max(n9value) as n9value by _time\n| rename
                _time as n9time\n| fields n9value, n9time"
        displayName: Good
        name: objective-1
        target: 0.99
        value: 1
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:50:14Z"
          end: "2023-03-16T10:50:14Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: View scheduled payments - Latency
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-scheduler
        deployed-from:
        - anzx/fabric-payments
        slo-type:
        - latency
        team-name:
        - fabric-payments
        user-journey:
        - manage-scheduled-payments
      name: anzx-view-scheduled-payments-latency
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://confluence.service.anz/display/ABT/Manage+scheduled+payments
      budgetingMethod: Occurrences
      description: Runbook - https://backstage.service.anz/docs/default/component/fabric-sre-runbooks/critical-user-journey/manage-scheduled-payments/
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: "index=\"anz_csnetwork_lb_prod\"\nhttpRequest.requestUrl IN (\"*ScheduleAPI/ListSchedules\")\nhttpRequest.status=2*\nhttpRequest.latency_millis
                <= 1500\njsonPayload.statusDetails=\"response_sent_by_backend\"\n| bin
                _time span=1m \n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
          incremental: false
          total:
            splunk:
              query: "index=\"anz_csnetwork_lb_prod\"\nhttpRequest.requestUrl IN (\"*ScheduleAPI/ListSchedules\")\nhttpRequest.status=2*\njsonPayload.statusDetails=\"response_sent_by_backend\"\n|
                bin _time span=1m \n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
        displayName: Good
        name: objective-1
        target: 0.95
        value: 1
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:50:14Z"
          end: "2023-03-16T10:50:14Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: View goal balances - Freshness
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-accounts
        deployed-from:
        - anzx/fabric-accounts
        slo-type:
        - latency
        team-name:
        - fab-accounts
        user-journey:
        - view-goal-balances
      name: anzx-view-goal-balances-freshness
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://confluence.service.anz/display/ABT/View+goal+balances
      budgetingMethod: Occurrences
      description: Runbook - https://backstage.service.anz/docs/default/component/fabric-sre-runbooks/critical-user-journey/view-goal-balance/
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: |-
                index="fabric_events_prod"
                sourcetype="accounts"
                attributes.stale_bucket_balance_count=0
                | bin _time span=1m
                | stats count as n9value by _time
                | union
                [| tstats count as n9value where index=* by _time span=1m
                | eval n9value=0]
                | stats max(n9value) as n9value by _time
                | rename _time as n9time
                | fields n9value, n9time
          incremental: false
          total:
            splunk:
              query: |-
                index="fabric_events_prod"
                sourcetype="accounts"
                body="Retrieved bucket statuses"
                | bin _time span=1m
                | stats count as n9value by _time
                | union
                [| tstats count as n9value where index=* by _time span=1m
                | eval n9value=0]
                | stats max(n9value) as n9value by _time
                | rename _time as n9time
                | fields n9value, n9time
        displayName: Good
        name: objective-1
        target: 0.99
        value: 1
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:50:14Z"
          end: "2023-03-16T10:50:14Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: View daily payment limits - Availability
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-payments
        deployed-from:
        - anzx/fabric-payments
        slo-type:
        - availability
        team-name:
        - fabric-payments
        user-journey:
        - view-and-manage-daily-payment-limits
      name: anzx-view-daily-payment-limits-availability
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://confluence.service.anz/display/ABT/View+and+Manage+daily+payment+limits
      budgetingMethod: Occurrences
      description: Runbook - https://backstage.service.anz/docs/default/component/fabric-sre-runbooks/critical-user-journey/view-and-manage-daily-payment-limits/
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"payments\"\nattributes.rpc.method=\"ListLimits\"\nattributes.rpc.grpc.status_code=0\n|
                bin _time span=1m \n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
          incremental: false
          total:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"payments\"\nattributes.rpc.method=\"ListLimits\"\nattributes.rpc.grpc.status_code
                IN (0,1,2,4,10,13,14,15,16)\n| bin _time span=1m \n| stats count as
                n9value by _time\n| union \n    [| tstats count as n9value where index=*
                by _time span=1m\n    | eval n9value=0]\n    | stats max(n9value) as
                n9value by _time\n| rename _time as n9time\n| fields n9value, n9time"
        displayName: Good
        name: objective-1
        target: 0.99
        value: 1
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:50:14Z"
          end: "2023-03-16T10:50:14Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: Manage daily payment limits - Latency
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-limits
        deployed-from:
        - anzx/fabric-payments
        slo-type:
        - latency
        team-name:
        - fabric-payments
        user-journey:
        - view-and-manage-daily-payment-limits
      name: anzx-manage-daily-payment-limits-latency
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://confluence.service.anz/display/ABT/View+and+Manage+daily+payment+limits
      budgetingMethod: Occurrences
      description: Runbook - https://backstage.service.anz/docs/default/component/fabric-sre-runbooks/critical-user-journey/view-and-manage-daily-payment-limits/
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: "index=\"anz_csnetwork_lb_prod\"\nhttpRequest.requestUrl IN (\"*.LimitService/SetLimit\")\nhttpRequest.status=2*\nhttpRequest.latency_millis
                <= 500\njsonPayload.statusDetails=\"response_sent_by_backend\"\n| bin
                _time span=1m \n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
          incremental: false
          total:
            splunk:
              query: "index=\"anz_csnetwork_lb_prod\"\nhttpRequest.requestUrl IN (\"*.LimitService/SetLimit\")\nhttpRequest.status=2*\njsonPayload.statusDetails=\"response_sent_by_backend\"\n|
                bin _time span=1m \n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
        displayName: Good
        name: objective-1
        target: 0.95
        value: 1
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:50:14Z"
          end: "2023-03-16T10:50:14Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: View daily payment limits - Latency
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-limits
        deployed-from:
        - anzx/fabric-payments
        slo-type:
        - latency
        team-name:
        - fabric-payments
        user-journey:
        - view-and-manage-daily-payment-limits
      name: anzx-view-daily-payment-limits-latency
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://confluence.service.anz/display/ABT/View+and+Manage+daily+payment+limits
      budgetingMethod: Occurrences
      description: Runbook - https://backstage.service.anz/docs/default/component/fabric-sre-runbooks/critical-user-journey/view-and-manage-daily-payment-limits/
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: "index=\"anz_csnetwork_lb_prod\"\nhttpRequest.requestUrl IN (\"*.LimitService/ListLimits\")\nhttpRequest.status=2*\nhttpRequest.latency_millis
                <= 500\njsonPayload.statusDetails=\"response_sent_by_backend\"\n| bin
                _time span=1m \n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
          incremental: false
          total:
            splunk:
              query: "index=\"anz_csnetwork_lb_prod\"\nhttpRequest.requestUrl IN (\"*.LimitService/ListLimits\")\nhttpRequest.status=2*\njsonPayload.statusDetails=\"response_sent_by_backend\"\n|
                bin _time span=1m \n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
        displayName: Good
        name: objective-1
        target: 0.95
        value: 1
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:50:14Z"
          end: "2023-03-16T10:50:14Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: Entitlements - OCV Flow - Latency
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-entitlements
        deployed-from:
        - anzx/fabric-sre-cloud-monitoring
        slo-type:
        - latency
        team-name:
        - fabric-entitlements
        user-journey:
        - ocv-flow-journey
      name: anzx-entitlement-ocv-latency
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://backstage.service.anz/docs/default/component/fabric-entitlements/customerjourneys/
      budgetingMethod: Occurrences
      description: Runbook - https://backstage.service.anz/docs/default/component/fabric-sre-runbooks/entitlements/entitlements-runbook/
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: |-
                index="fabric_events_prod"
                sourcetype="entitlements"
                attributes.rpc.method IN ("LinkResources", "UpdateParty", "UpdatePartyAccountLegalRole", "UpdatePartyCardLegalRole")
                attributes.rpc.grpc.status_code=0
                attributes.rpc.server.duration.ttfb < 20
                | bin _time span=1m
                | stats count as n9value by _time
                | union
                [| tstats count as n9value where index=* by _time span=1m
                | eval n9value=0]
                | stats max(n9value) as n9value by _time
                | rename _time as n9time
                | fields n9value, n9time
          incremental: false
          total:
            splunk:
              query: |-
                index="fabric_events_prod"
                sourcetype="entitlements"
                attributes.rpc.method IN ("LinkResources", "UpdateParty", "UpdatePartyAccountLegalRole", "UpdatePartyCardLegalRole")
                attributes.rpc.grpc.status_code=0
                | bin _time span=1m
                | stats count as n9value by _time
                | union
                [| tstats count as n9value where index=* by _time span=1m
                | eval n9value=0]
                | stats max(n9value) as n9value by _time
                | rename _time as n9time
                | fields n9value, n9time
        displayName: Good
        name: objective-1
        target: 0.95
        value: 1
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:50:14Z"
          end: "2023-03-16T10:50:14Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: Manage payees - Latency
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-bluepages
        deployed-from:
        - anzx/fabric-payments
        slo-type:
        - latency
        team-name:
        - fabric-payments
        user-journey:
        - manage-payees
      name: anzx-manage-payees-latency
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://confluence.service.anz/display/ABT/Manage+payees
      budgetingMethod: Occurrences
      description: Runbook - https://backstage.service.anz/docs/default/component/fabric-sre-runbooks/critical-user-journey/manage-payees/
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: "index=\"anz_csnetwork_lb_prod\" \nhttpRequest.requestUrl IN (\"*.PayeeAPI/CreatePayees\",
                \"*.PayeeAPI/UpdatePayees\", \"*.PayeeAPI/DeletePayees\", \"*.PayeeAPI/AddQuickPayees\",
                \"*.PayeeAPI/UpdateQuickPayees\")\nhttpRequest.status=2*\nhttpRequest.latency_millis
                <= 500\njsonPayload.statusDetails=\"response_sent_by_backend\"\n| bin
                _time span=1m \n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
          incremental: false
          total:
            splunk:
              query: "index=\"anz_csnetwork_lb_prod\"\nhttpRequest.requestUrl IN (\"*.PayeeAPI/CreatePayees\",
                \"*.PayeeAPI/UpdatePayees\", \"*.PayeeAPI/DeletePayees\", \"*.PayeeAPI/AddQuickPayees\",
                \"*.PayeeAPI/UpdateQuickPayees\")\nhttpRequest.status=2*\njsonPayload.statusDetails=\"response_sent_by_backend\"\n|
                bin _time span=1m \n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
        displayName: Good
        name: objective-1
        target: 0.95
        value: 1
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:50:14Z"
          end: "2023-03-16T10:50:14Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: View payments - Latency
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-payments
        deployed-from:
        - anzx/fabric-payments
        slo-type:
        - latency
        team-name:
        - fabric-payments
        user-journey:
        - view-payments
      name: anzx-view-payments-latency
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://confluence.service.anz/display/ABT/Make+a+payment
      budgetingMethod: Occurrences
      description: Runbook - https://backstage.service.anz/docs/default/component/fabric-sre-runbooks/critical-user-journey/make-a-payment/
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: "index=\"anz_csnetwork_lb_prod\"\nhttpRequest.requestUrl IN (\"*.PaymentAPI/ListPayments\")\nhttpRequest.status=2*\nhttpRequest.latency_millis
                <= 750\njsonPayload.statusDetails=\"response_sent_by_backend\"\n| bin
                _time span=1m \n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
          incremental: false
          total:
            splunk:
              query: "index=\"anz_csnetwork_lb_prod\"\nhttpRequest.requestUrl IN (\"*.PaymentAPI/ListPayments\")\nhttpRequest.status=2*\njsonPayload.statusDetails=\"response_sent_by_backend\"\n|
                bin _time span=1m \n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
        displayName: Good
        name: objective-1
        target: 0.95
        value: 1
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:50:14Z"
          end: "2023-03-16T10:50:14Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: Command Listener - Pubsub - Freshness
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-commandlistener
        deployed-from:
        - anzx/fabric-commandcentre
        slo-type:
        - freshness
        team-name:
        - fab-projects
        user-journey:
        - command-listener
      name: command-listener-pubsub-fresh
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-projects-fast-burn
      - anzx-fabric-projects-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://confluence.service.anz/x/xQVVYQ
      budgetingMethod: Occurrences
      description: Playbook - https://confluence.service.anz/x/dgZ1YQ
      indicator:
        metricSource:
          kind: Agent
          name: gcm-prod
          project: anzx-prod
      objectives:
      - displayName: Good
        name: objective-2
        op: lt
        rawMetric:
          query:
            gcm:
              projectId: anz-x-monitoring-prod-9755ba
              query: |-
                fetch pubsub_subscription
                | metric 'pubsub.googleapis.com/subscription/oldest_unacked_message_age'
                | filter
                    (resource.subscription_id == 'commandcentre-events.commandlistener-prod')
                | group_by 1m,
                    [value_oldest_unacked_message_age_mean:
                      max(value.oldest_unacked_message_age)]
                | every 1m
        target: 0.95
        value: 8
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:50:14Z"
          end: "2023-03-16T10:50:14Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: Make a payment (API) - Availability
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-payments
        deployed-from:
        - anzx/fabric-payments
        slo-type:
        - availability
        team-name:
        - fabric-payments
        user-journey:
        - make-a-payment
      name: anzx-make-a-payment-api-availability
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://confluence.service.anz/display/ABT/Make+a+payment
      budgetingMethod: Occurrences
      description: Runbook - https://backstage.service.anz/docs/default/component/fabric-sre-runbooks/critical-user-journey/make-a-payment/
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"payments\"\nattributes.rpc.method
                IN (\"Pay\", \"Transfer\")\nattributes.rpc.grpc.status_code=0\n| bin
                _time span=1m \n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
          incremental: false
          total:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"payments\"\nattributes.rpc.method
                IN (\"Pay\", \"Transfer\")\nattributes.rpc.grpc.status_code IN (0,1,2,4,10,13,14,15,16)\n|
                bin _time span=1m \n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
        displayName: Good
        name: objective-1
        target: 0.99
        value: 1
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:50:14Z"
          end: "2023-03-16T10:50:14Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: Process transactions - Latency
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-transactions
        deployed-from:
        - anzx/fabric-transactions
        slo-type:
        - latency
        team-name:
        - fabric-transactions
        user-journey:
        - view-transactions
      name: anzx-transactions-processing-latency
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://confluence.service.anz/display/ABT/View+transactions
      budgetingMethod: Occurrences
      description: Runbook - https://backstage.service.anz/docs/default/component/fabric-sre-runbooks/critical-user-journey/view-transactions/
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: |-
                index=dummy
                | union
                [| inputlookup transaction-processing-latency-7s.csv
                | eval runHour = strftime(_time,"%H") ```Report should only from 6AM - 11PM```
                | where (runHour >= 6 and runHour <= 23) ```to avoid false alerting due to batch run between 2-5AM```
                | rename n9value_good as n9value
                | rename _time as n9time
                | where n9value >= 0
                | fields n9time, n9value]
                | sort - n9time
                | table n9time, n9value
                | head 30
          incremental: false
          total:
            splunk:
              query: |-
                index=dummy
                | union
                [| inputlookup transaction-processing-latency-7s.csv
                | eval runHour = strftime(_time,"%H") ```Report should only from 6AM - 11PM```
                | where (runHour >= 6 and runHour <= 23) ```to avoid false alerting due to batch run between 2-5AM```
                | rename n9value_total as n9value
                | rename _time as n9time
                | where n9value >= 0
                | fields n9time, n9value]
                | sort - n9time
                | table n9time, n9value
                | head 30
        displayName: Good
        name: objective-1
        target: 0.95
        value: 1
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:50:14Z"
          end: "2023-03-16T10:50:14Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: Entitlements - Others - Availability
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-entitlements
        deployed-from:
        - anzx/fabric-sre-cloud-monitoring
        slo-type:
        - availability
        team-name:
        - fabric-entitlements
        user-journey:
        - others
      name: anzx-entitlement-others-availability
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://backstage.service.anz/docs/default/component/fabric-entitlements/customerjourneys/
      budgetingMethod: Occurrences
      description: Runbook - https://backstage.service.anz/docs/default/component/fabric-sre-runbooks/entitlements/entitlements-runbook/
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: |-
                index="fabric_events_prod"
                sourcetype="entitlements"
                attributes.rpc.method IN ("ExplainAccountEntitlements", "ListPersonaForCardToken", "ListProducts", "ListProducts" )
                attributes.rpc.grpc.status_code=0
                | bin _time span=1m
                | stats count as n9value by _time
                | union
                [| tstats count as n9value where index=* by _time span=1m
                | eval n9value=0]
                | stats max(n9value) as n9value by _time
                | rename _time as n9time
                | fields n9value, n9time
          incremental: false
          total:
            splunk:
              query: |-
                index="fabric_events_prod"
                sourcetype="entitlements"
                attributes.rpc.method IN ("ExplainAccountEntitlements", "ListPersonaForCardToken", "ListProducts", "ListProducts" )
                attributes.rpc.grpc.status_code IN (0,1,2,4,7,10,13,14,15,16)
                | bin _time span=1m
                | stats count as n9value by _time
                | union
                [| tstats count as n9value where index=* by _time span=1m
                | eval n9value=0]
                | stats max(n9value) as n9value by _time
                | rename _time as n9time
                | fields n9value, n9time
        displayName: Good
        name: objective-1
        target: 0.99
        value: 1
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:50:14Z"
          end: "2023-03-16T10:50:14Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: Entitlements - Origination - Availability
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-entitlements
        deployed-from:
        - anzx/fabric-sre-cloud-monitoring
        slo-type:
        - availability
        team-name:
        - fabric-entitlements
        user-journey:
        - user-origination-journey
      name: anzx-entitlement-origination-availability
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://backstage.service.anz/docs/default/component/fabric-entitlements/customerjourneys/
      budgetingMethod: Occurrences
      description: Runbook - https://backstage.service.anz/docs/default/component/fabric-sre-runbooks/entitlements/entitlements-runbook/
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: |-
                index="fabric_events_prod"
                sourcetype="entitlements"
                attributes.rpc.method IN ("AddPartyPersonaFabricRole", "RegisterAccountToPersona", "RegisterCardToPersona", "RegisterPersonaToParty", "CreateParty")
                attributes.rpc.grpc.status_code=0
                | bin _time span=1m
                | stats count as n9value by _time
                | union
                [| tstats count as n9value where index=* by _time span=1m
                | eval n9value=0]
                | stats max(n9value) as n9value by _time
                | rename _time as n9time
                | fields n9value, n9time
          incremental: false
          total:
            splunk:
              query: |-
                index="fabric_events_prod"
                sourcetype="entitlements"
                attributes.rpc.method IN ("AddPartyPersonaFabricRole", "RegisterAccountToPersona", "RegisterCardToPersona", "RegisterPersonaToParty", "CreateParty")
                attributes.rpc.grpc.status_code IN (0,1,2,4,7,10,13,14,15,16)
                | bin _time span=1m
                | stats count as n9value by _time
                | union
                [| tstats count as n9value where index=* by _time span=1m
                | eval n9value=0]
                | stats max(n9value) as n9value by _time
                | rename _time as n9time
                | fields n9value, n9time
        displayName: Good
        name: objective-1
        target: 0.99
        value: 1
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:50:14Z"
          end: "2023-03-16T10:50:14Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: VCAS - Authorise transactions (ANZ Plus) - Latency
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-vcas
        deployed-from:
        - anzx/fabric-vcas
        slo-type:
        - availability
        team-name:
        - fab-selfservice
        user-journey:
        - authorise-transactions-plus-latency
      name: anzx-authorise-transactions-plus-latency
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://confluence.service.anz/display/ABT/Playbook+-+VCAS
      budgetingMethod: Occurrences
      composite:
        burnRateCondition:
          op: gt
          value: 1
        target: 0.95
      description: Runbook - https://confluence.service.anz/display/ABT/Playbook+-+VCAS
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"vcas-server-*\"\nbody=\"Response
                received from server:*VCASAPI/StepUp\"\n\"attributes.connect response
                payload.Msg.stepup_type\"=\"OUTOFBAND\"\n\"attributes.connect response
                payload.Msg.status\"=\"SUCCESS\"\n| join trace_id [ search index=\"anz_csnetwork_lb_prod\"\nhttpRequest.requestUrl
                IN (\"*.VCASAPI/StepUp\")\nhttpRequest.status=2*\nhttpRequest.latency_millis
                <= 1000\njsonPayload.statusDetails=\"response_sent_by_backend\"\n| rex
                field=platform_gcp_metadata.trace \"\\S+\\/(?<trace_id>.*)\" ]\n| bin
                _time span=1m\n| stats count as n9value by _time\n| union \n    [| tstats
                count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
          incremental: false
          total:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"vcas-server-*\"\nbody=\"Response
                received from server:*VCASAPI/StepUp\"\n\"attributes.connect response
                payload.Msg.stepup_type\"=\"OUTOFBAND\"\n\"attributes.connect response
                payload.Msg.status\"=\"SUCCESS\"\n| join trace_id [ search index=\"anz_csnetwork_lb_prod\"\nhttpRequest.requestUrl
                IN (\"*.VCASAPI/StepUp\")\nhttpRequest.status=2*\njsonPayload.statusDetails=\"response_sent_by_backend\"\n|
                rex field=platform_gcp_metadata.trace \"\\S+\\/(?<trace_id>.*)\" ]\n|
                bin _time span=1m\n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
        displayName: StepUp
        name: vcas-stepup
        target: 0.95
        value: 1
      - countMetrics:
          good:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"vcas-server-*\"\nrequestUrl=\"*VCASAPI/Initiate\"\n|
                rex field=platform_gcp_metadata.trace \"\\S+\\/(?<trace_id>.*)\"\n|
                join trace_id [search index=\"fabric_events_prod\"\nsourcetype=\"vcas-server-*\"\nbody=\"PubSub
                message sent successfully\"]\n| eval totalLatency=latency_millis+'attributes.messaging.duration'\n|
                where totalLatency <= 1000\n| bin _time span=1m\n| stats count as n9value
                by _time\n| union \n    [| tstats count as n9value where index=* by
                _time span=1m\n    | eval n9value=0]\n    | stats max(n9value) as n9value
                by _time\n| rename _time as n9time\n| fields n9value, n9time"
          incremental: false
          total:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"vcas-server-*\"\nrequestUrl=\"*VCASAPI/Initiate\"\n|
                rex field=platform_gcp_metadata.trace \"\\S+\\/(?<trace_id>.*)\"\n|
                join trace_id [search index=\"fabric_events_prod\"\nsourcetype=\"vcas-server-*\"\nbody=\"PubSub
                message sent successfully\"]\n| eval totalLatency=latency_millis+'attributes.messaging.duration'\n|
                bin _time span=1m\n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
        displayName: Publish auth notification
        name: vcas-publish-auth-notification
        target: 0.95
        value: 2
      - countMetrics:
          good:
            splunk:
              query: "index=\"anz_csnetwork_lb_prod\"\nhttpRequest.requestUrl IN (\"*fabric.anz.com*.TransactionApprovalAPI/ListPendingApprovals\")\nhttpRequest.status=2*\nhttpRequest.latency_millis
                <= 1000\njsonPayload.statusDetails=\"response_sent_by_backend\"\n| bin
                _time span=1m\n| stats count as n9value by _time\n| union \n    [| tstats
                count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
          incremental: false
          total:
            splunk:
              query: "index=\"anz_csnetwork_lb_prod\"\nhttpRequest.requestUrl IN (\"*fabric.anz.com*.TransactionApprovalAPI/ListPendingApprovals\")\nhttpRequest.status=2*\njsonPayload.statusDetails=\"response_sent_by_backend\"\n|
                bin _time span=1m\n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
        displayName: Fetch pending approvals
        name: vcas-fetch-pending-approvals
        target: 0.95
        value: 3
      - countMetrics:
          good:
            splunk:
              query: "index=\"anz_csnetwork_lb_prod\"\nhttpRequest.requestUrl IN (\"*fabric.anz.com*.TransactionApprovalAPI/Approve\",
                \"*fabric.anz.com*.TransactionApprovalAPI/Decline\")\nhttpRequest.status=2*\nhttpRequest.latency_millis
                <= 1000\njsonPayload.statusDetails=\"response_sent_by_backend\"\n| bin
                _time span=1m\n| stats count as n9value by _time\n| union \n    [| tstats
                count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
          incremental: false
          total:
            splunk:
              query: "index=\"anz_csnetwork_lb_prod\"\nhttpRequest.requestUrl IN (\"*fabric.anz.com*.TransactionApprovalAPI/Approve\",
                \"*fabric.anz.com*.TransactionApprovalAPI/Decline\")\nhttpRequest.status=2*\njsonPayload.statusDetails=\"response_sent_by_backend\"\n|
                bin _time span=1m\n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
        displayName: Process approval/refusal
        name: vcas-process-approval-refusal
        target: 0.95
        value: 4
      - countMetrics:
          good:
            splunk:
              query: "index=\"anz_csnetwork_lb_prod\"\nhttpRequest.requestUrl IN (\"*.VCASAPI/Validate\")\nhttpRequest.status=2*\nhttpRequest.latency_millis
                <= 1000\njsonPayload.statusDetails=\"response_sent_by_backend\"\n| bin
                _time span=1m\n| stats count as n9value by _time\n| union \n    [| tstats
                count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
          incremental: false
          total:
            splunk:
              query: "index=\"anz_csnetwork_lb_prod\"\nhttpRequest.requestUrl IN (\"*.VCASAPI/Validate\")\nhttpRequest.status=2*\njsonPayload.statusDetails=\"response_sent_by_backend\"\n|
                bin _time span=1m\n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
        displayName: Check validation status
        name: vcas-check-validation-status
        target: 0.95
        value: 5
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:50:14Z"
          end: "2023-03-16T10:50:14Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: Command Listener - Firebase message delivery - Availability
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-commandlistener
        deployed-from:
        - anzx/fabric-commandcentre
        slo-type:
        - availability
        team-name:
        - fab-projects
        user-journey:
        - command-listener
      name: command-listener-firebase-message-delivery-ava
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://confluence.service.anz/x/xQVVYQ
      budgetingMethod: Occurrences
      description: Playbook - https://confluence.service.anz/x/dgZ1YQ
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=commandlistener\n\"Firebase
                response for token\"\n\"Success:true\"\n| bin _time span=1m \n| stats
                count as n9value by _time\n| union \n    [| tstats count as n9value
                where index=* by _time span=1m\n    | eval n9value=0]\n| stats max(n9value)
                as n9value by _time\n| rename _time as n9time\n| fields n9value, n9time"
          incremental: false
          total:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=commandlistener\n\"Firebase
                response for token\"\n(\"Success:false\" OR \"Success:true\")\n| bin
                _time span=1m \n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n|
                stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
        displayName: Good
        name: objective-1
        target: 0.99
        value: 1
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:50:14Z"
          end: "2023-03-16T10:50:14Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: View payments - Availability
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-payments
        deployed-from:
        - anzx/fabric-payments
        slo-type:
        - availability
        team-name:
        - fabric-payments
        user-journey:
        - view-payments
      name: anzx-view-payments-availability
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://confluence.service.anz/display/ABT/Make+a+payment
      budgetingMethod: Occurrences
      description: Runbook - https://backstage.service.anz/docs/default/component/fabric-sre-runbooks/critical-user-journey/make-a-payment/
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"payments\"\nattributes.rpc.method=\"ListPayments\"\nattributes.rpc.grpc.status_code=0\n|
                bin _time span=1m \n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
          incremental: false
          total:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"payments\"\nattributes.rpc.method=\"ListPayments\"\nattributes.rpc.grpc.status_code
                IN (0,1,2,4,10,13,14,15,16)\n| bin _time span=1m \n| stats count as
                n9value by _time\n| union \n    [| tstats count as n9value where index=*
                by _time span=1m\n    | eval n9value=0]\n    | stats max(n9value) as
                n9value by _time\n| rename _time as n9time\n| fields n9value, n9time"
        displayName: Good
        name: objective-1
        target: 0.99
        value: 1
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:50:14Z"
          end: "2023-03-16T10:50:14Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: View transactions (list) - Availability
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-transactions
        deployed-from:
        - anzx/fabric-transactions
        slo-type:
        - availability
        team-name:
        - fab-transactions
        user-journey:
        - view-transactions-list-availability
      name: anzx-view-transactions-list-availability
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://confluence.service.anz/display/ABT/View+transactions
      budgetingMethod: Occurrences
      description: Runbook - https://backstage.service.anz/docs/default/component/fabric-sre-runbooks/critical-user-journey/view-transactions/
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"transactions\"\nattributes.rpc.method=\"ListTransactions\"\nbody=\"GRPC
                Request was successfully processed\"\nattributes.rpc.grpc.status_code=0\n|
                bin _time span=1m \n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
          incremental: false
          total:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"transactions\"\nattributes.rpc.method=\"ListTransactions\"\nbody=\"GRPC
                Request was * processed\"\nattributes.rpc.grpc.status_code IN (0,13,16)
                \n| bin _time span=1m \n| stats count as n9value by _time\n| union \n
                \   [| tstats count as n9value where index=* by _time span=1m\n    |
                eval n9value=0]\n    | stats max(n9value) as n9value by _time\n| rename
                _time as n9time\n| fields n9value, n9time"
        displayName: Good
        name: objective-1
        target: 0.99
        value: 1
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:50:14Z"
          end: "2023-03-16T10:50:14Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: View transactions (sync) - Latency
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-transactions
        deployed-from:
        - anzx/fabric-transactions
        slo-type:
        - latency
        team-name:
        - fab-transactions
        user-journey:
        - view-transactions-sync-latency
      name: anzx-view-transactions-sync-latency
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://confluence.service.anz/display/ABT/View+transactions
      budgetingMethod: Occurrences
      description: Runbook - https://backstage.service.anz/docs/default/component/fabric-sre-runbooks/critical-user-journey/view-transactions/
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: "index=\"fabric_events_prod\"\nattributes.rpc.method=\"SyncTransactions\"\nattributes.rpc.server.duration.ttfb
                <= 800\nattributes.rpc.grpc.status_code=0\nbody=\"GRPC Request was successfully
                processed\"\n| bin _time span=1m \n| stats count as n9value by _time\n|
                union \n    [| tstats count as n9value where index=* by _time span=1m\n
                \   | eval n9value=0]\n    | stats max(n9value) as n9value by _time\n|
                rename _time as n9time\n| fields n9value, n9time"
          incremental: false
          total:
            splunk:
              query: "index=\"fabric_events_prod\"\nattributes.rpc.method=\"SyncTransactions\"\nattributes.rpc.grpc.status_code=0\nbody=\"GRPC
                Request was successfully processed\"\n| bin _time span=1m \n| stats
                count as n9value by _time\n| union \n    [| tstats count as n9value
                where index=* by _time span=1m\n    | eval n9value=0]\n    | stats max(n9value)
                as n9value by _time\n| rename _time as n9time\n| fields n9value, n9time"
        displayName: Good
        name: objective-1
        target: 0.95
        value: 1
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:50:14Z"
          end: "2023-03-16T10:50:14Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: Entitlements - OCV PubSub - Freshness
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-entitlements
        deployed-from:
        - anzx/fabric-sre-cloud-monitoring
        slo-type:
        - availability
        team-name:
        - fabric-entitlements
        user-journey:
        - user-origination-journey
      name: anzx-entitlements-ocv-pubsub-freshness
      project: anzx-prod
    spec:
      alertPolicies: []
      attachments:
      - displayName: CUJ Link
        url: https://backstage.service.anz/docs/default/component/fabric-entitlements/customerjourneys/
      budgetingMethod: Occurrences
      description: Runbook - https://backstage.service.anz/docs/default/component/fabric-sre-runbooks/entitlements/entitlements-runbook/
      indicator:
        metricSource:
          kind: Agent
          name: gcm-prod
          project: anzx-prod
      objectives:
      - displayName: Good
        name: objective-1
        op: lt
        rawMetric:
          query:
            gcm:
              projectId: anz-x-monitoring-prod-9755ba
              query: |-
                fetch pubsub_subscription
                | metric 'pubsub.googleapis.com/subscription/oldest_unacked_message_age'
                | filter
                    (resource.subscription_id == 'entitlements-ocv-events.entitlements-prod')
                | group_by 1m,
                    [value_oldest_unacked_message_age_mean:
                        max(value.oldest_unacked_message_age)]
                | every 1m
        target: 0.95
        value: 8
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:50:14Z"
          end: "2023-03-16T10:50:14Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: View payees - Availability
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-bluepages
        deployed-from:
        - anzx/fabric-payments
        slo-type:
        - availability
        team-name:
        - fabric-payments
        user-journey:
        - view-payees
      name: anzx-view-payees-availability
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://confluence.service.anz/display/ABT/Manage+payees
      budgetingMethod: Occurrences
      description: Runbook - https://backstage.service.anz/docs/default/component/fabric-sre-runbooks/critical-user-journey/manage-payees/
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"bluepages\" \nattributes.rpc.method
                IN (\"ListPayees\", \"ListQuickPayees\")\nbody=\"GRPC Request was successfully
                processed\"\nattributes.rpc.grpc.status_code=0\n| bin _time span=1m
                \n| stats count as n9value by _time\n| union \n    [| tstats count as
                n9value where index=* by _time span=1m\n    | eval n9value=0]\n    |
                stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
          incremental: false
          total:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"bluepages\"\nattributes.rpc.method
                IN (\"ListPayees\", \"ListQuickPayees\")\nbody=\"GRPC Request was *
                processed\"\nattributes.rpc.grpc.status_code IN (0,1,2,4,10,13,14,15,16)\n|
                bin _time span=1m \n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
        displayName: Good
        name: objective-1
        target: 0.99
        value: 1
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:50:14Z"
          end: "2023-03-16T10:50:14Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: Entitlements - EntitledCard - Availability
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-entitlements
        deployed-from:
        - anzx/fabric-sre-cloud-monitoring
        slo-type:
        - availability
        team-name:
        - fabric-entitlements
        user-journey:
        - manage-entitled-cards
      name: anzx-entitlement-entitledcard-availability
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://backstage.service.anz/docs/default/component/fabric-entitlements/customerjourneys/
      budgetingMethod: Occurrences
      description: Runbook - https://backstage.service.anz/docs/default/component/fabric-sre-runbooks/entitlements/entitlements-runbook/
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: |-
                index="fabric_events_prod"
                sourcetype="entitlements"
                attributes.rpc.method IN ("ListEntitledCards", "GetEntitledCard")
                attributes.rpc.grpc.status_code=0
                | bin _time span=1m
                | stats count as n9value by _time
                | union
                [| tstats count as n9value where index=* by _time span=1m
                | eval n9value=0]
                | stats max(n9value) as n9value by _time
                | rename _time as n9time
                | fields n9value, n9time
          incremental: false
          total:
            splunk:
              query: |-
                index="fabric_events_prod"
                sourcetype="entitlements"
                attributes.rpc.method IN ("ListEntitledCards", "GetEntitledCard")
                attributes.rpc.grpc.status_code IN (0,1,2,4,7,10,13,14,15,16)
                | bin _time span=1m
                | stats count as n9value by _time
                | union
                [| tstats count as n9value where index=* by _time span=1m
                | eval n9value=0]
                | stats max(n9value) as n9value by _time
                | rename _time as n9time
                | fields n9value, n9time
        displayName: Good
        name: objective-1
        target: 0.99
        value: 1
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:50:14Z"
          end: "2023-03-16T10:50:14Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: Entitlements - ForcePartyToLatest - Availability
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-entitlements
        deployed-from:
        - anzx/fabric-sre-cloud-monitoring
        slo-type:
        - availability
        team-name:
        - fabric-entitlements
        user-journey:
        - user-origination-journey
      name: anzx-entitlement-forcepartytolatest-availability
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://backstage.service.anz/docs/default/component/fabric-entitlements/customerjourneys/
      budgetingMethod: Occurrences
      description: Runbook - https://backstage.service.anz/docs/default/component/fabric-sre-runbooks/entitlements/entitlements-runbook/
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: |-
                index="fabric_events_prod"
                sourcetype="entitlements"
                attributes.rpc.method IN ("ForcePartyToLatest")
                attributes.rpc.grpc.status_code=0
                | bin _time span=1m
                | stats count as n9value by _time
                | union
                [| tstats count as n9value where index=* by _time span=1m
                | eval n9value=0]
                | stats max(n9value) as n9value by _time
                | rename _time as n9time
                | fields n9value, n9time
          incremental: false
          total:
            splunk:
              query: |-
                index="fabric_events_prod"
                sourcetype="entitlements"
                attributes.rpc.method IN ("ForcePartyToLatest")
                attributes.rpc.grpc.status_code IN (0,1,2,4,7,10,13,14,15,16)
                | bin _time span=1m
                | stats count as n9value by _time
                | union
                [| tstats count as n9value where index=* by _time span=1m
                | eval n9value=0]
                | stats max(n9value) as n9value by _time
                | rename _time as n9time
                | fields n9value, n9time
        displayName: Good
        name: objective-1
        target: 0.99
        value: 1
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:50:14Z"
          end: "2023-03-16T10:50:14Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: Manage scheduled payments - Latency
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-scheduler
        deployed-from:
        - anzx/fabric-payments
        slo-type:
        - latency
        team-name:
        - fabric-payments
        user-journey:
        - manage-scheduled-payments
      name: anzx-manage-scheduled-payments-latency
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://confluence.service.anz/display/ABT/Manage+scheduled+payments
      budgetingMethod: Occurrences
      description: Runbook - https://backstage.service.anz/docs/default/component/fabric-sre-runbooks/critical-user-journey/manage-scheduled-payments/
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: "index=\"anz_csnetwork_lb_prod\"\nhttpRequest.requestUrl IN (\"*.ScheduleAPI/CreateSchedule\",\"*.ScheduleAPI/UpdateSchedule\",\"*.ScheduleAPI/ToggleSchedule\",\"*.ScheduleAPI/DeleteSchedule\")\nhttpRequest.status=2*\nhttpRequest.latency_millis
                <= 1500\njsonPayload.statusDetails=\"response_sent_by_backend\"\n| bin
                _time span=1m \n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
          incremental: false
          total:
            splunk:
              query: "index=\"anz_csnetwork_lb_prod\"\nhttpRequest.requestUrl IN (\"*.ScheduleAPI/CreateSchedule\",\"*.ScheduleAPI/UpdateSchedule\",\"*.ScheduleAPI/ToggleSchedule\",\"*.ScheduleAPI/DeleteSchedule\")\nhttpRequest.status=2*\njsonPayload.statusDetails=\"response_sent_by_backend\"\n|
                bin _time span=1m \n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
        displayName: Good
        name: objective-1
        target: 0.95
        value: 1
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:50:14Z"
          end: "2023-03-16T10:50:14Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: Command Centre - Consumer - Latency
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-commandcentre
        deployed-from:
        - anzx/fabric-commandcentre
        slo-type:
        - latency
        team-name:
        - fab-projects
        user-journey:
        - command-centre
      name: command-centre-consumer-lat
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://confluence.service.anz/x/awZ1YQ
      budgetingMethod: Occurrences
      description: Playbook - https://confluence.service.anz/x/eQZ1YQ
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: "index=fabric_events_prod\nsourcetype=commandcentre\nattributes.rpc.method=Consumer\nbody=\"GRPC
                Request was successfully processed\"\nattributes.rpc.grpc.status_code=0\nattributes.rpc.server.duration.ttfb
                < 500\n| bin _time span=1m \n| stats count as n9value by _time\n| union
                \n  [| tstats count as n9value where index=* by _time span=1m\n  | eval
                n9value=0]\n| stats max(n9value) as n9value by _time\n| rename _time
                as n9time\n| fields n9value, n9time"
          incremental: false
          total:
            splunk:
              query: "index=fabric_events_prod\nsourcetype=commandcentre\nattributes.rpc.method=Consumer\nbody=\"GRPC
                Request was successfully processed\"\nattributes.rpc.grpc.status_code=0\n|
                bin _time span=1m \n| stats count as n9value by _time\n| union \n  [|
                tstats count as n9value where index=* by _time span=1m\n  | eval n9value=0]\n|
                stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
        displayName: Good
        name: objective-1
        target: 0.95
        value: 1
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:50:14Z"
          end: "2023-03-16T10:50:14Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: Entitlements - ForcePartyToLatest - Latency
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-entitlements
        deployed-from:
        - anzx/fabric-sre-cloud-monitoring
        slo-type:
        - latency
        team-name:
        - fabric-entitlements
        user-journey:
        - user-origination-journey
      name: anzx-entitlements-forcepartytolatest-latency
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://backstage.service.anz/docs/default/component/fabric-entitlements/customerjourneys/
      budgetingMethod: Occurrences
      description: Runbook - https://backstage.service.anz/docs/default/component/fabric-sre-runbooks/entitlements/entitlements-runbook/
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: |-
                index="fabric_events_prod"
                sourcetype="entitlements"
                attributes.rpc.method IN ("ForcePartyToLatest")
                attributes.rpc.grpc.status_code=0
                attributes.rpc.server.duration.ttfb < 4000
                | bin _time span=1m
                | stats count as n9value by _time
                | union
                [| tstats count as n9value where index=* by _time span=1m
                | eval n9value=0]
                | stats max(n9value) as n9value by _time
                | rename _time as n9time
                | fields n9value, n9time
          incremental: false
          total:
            splunk:
              query: |-
                index="fabric_events_prod"
                sourcetype="entitlements"
                attributes.rpc.method IN ("ForcePartyToLatest")
                attributes.rpc.grpc.status_code=0
                | bin _time span=1m
                | stats count as n9value by _time
                | union
                [| tstats count as n9value where index=* by _time span=1m
                | eval n9value=0]
                | stats max(n9value) as n9value by _time
                | rename _time as n9time
                | fields n9value, n9time
        displayName: Good
        name: objective-1
        target: 0.99
        value: 1
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:50:14Z"
          end: "2023-03-16T10:50:14Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: VCAS - Authorise transactions (ANZ Plus) - Availability
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-vcas
        deployed-from:
        - anzx/fabric-vcas
        slo-type:
        - availability
        team-name:
        - fab-selfservice
        user-journey:
        - authorise-transactions-plus-availability
      name: anzx-authorise-transactions-plus-availability
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://confluence.service.anz/display/ABT/Playbook+-+VCAS
      budgetingMethod: Occurrences
      composite:
        burnRateCondition:
          op: gt
          value: 1
        target: 0.99
      description: Runbook - https://confluence.service.anz/display/ABT/Playbook+-+VCAS
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"vcas-server-*\"\nbody=\"Response
                received from server:*VCASAPI/StepUp\"\n\"attributes.connect response
                payload.Msg.stepup_type\"=\"OUTOFBAND\"\n\"attributes.connect response
                payload.Msg.status\"=\"SUCCESS\"\n| bin _time span=1m \n| stats count
                as n9value by _time\n| union \n    [| tstats count as n9value where
                index=* by _time span=1m\n    | eval n9value=0]\n    | stats max(n9value)
                as n9value by _time\n| rename _time as n9time\n| fields n9value, n9time"
          incremental: false
          total:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"vcas-server-*\"\nbody=\"Response
                received from server:*VCASAPI/StepUp\"\n\"attributes.connect response
                payload.Msg.stepup_type\"=\"OUTOFBAND\"\n\"attributes.connect response
                payload.Msg.status\" IN (\"SUCCESS\", \"ERROR\")\n| bin _time span=1m
                \n| stats count as n9value by _time\n| union \n    [| tstats count as
                n9value where index=* by _time span=1m\n    | eval n9value=0]\n    |
                stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
        displayName: StepUp
        name: vcas-stepup
        target: 0.99
        value: 1
      - countMetrics:
          good:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"vcas-server-*\"\nbody=\"Request
                sent to server:*VCASAPI/Initiate\"\n\"attributes.connect request payload.Msg.stepup_type\"=\"OUTOFBAND\"\n|
                join trace_id [ search index=\"fabric_events_prod\"\nsourcetype=\"vcas-server-*\"\nbody=\"PublishNotification
                success: Published\"]\n| bin _time span=1m\n| stats count as n9value
                by _time\n| union \n    [| tstats count as n9value where index=* by
                _time span=1m\n    | eval n9value=0]\n    | stats max(n9value) as n9value
                by _time\n| rename _time as n9time\n| fields n9value, n9time"
          incremental: false
          total:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"vcas-server-*\"\nbody=\"Request
                sent to server:*VCASAPI/Initiate\"\n\"attributes.connect request payload.Msg.stepup_type\"=\"OUTOFBAND\"\n|
                bin _time span=1m\n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
        displayName: Publish auth notification
        name: vcas-publish-auth-notification
        target: 0.99
        value: 2
      - countMetrics:
          good:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"vcas-server-*\"\nattributes.rpc.method=\"ListPendingApprovals\"\nbody=\"connect
                server request completed*\"\nattributes.rpc.grpc.status_code=0\n| bin
                _time span=1m\n| stats count as n9value by _time\n| union \n    [| tstats
                count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
          incremental: false
          total:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"vcas-server-*\"\nattributes.rpc.method=\"ListPendingApprovals\"\nbody=\"connect
                server request completed*\"\nattributes.rpc.grpc.status_code IN (0,1,2,3,4,5,6,8,9,10,12,13,14,15,16)\n|
                bin _time span=1m\n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
        displayName: Fetch pending approvals
        name: vcas-fetch-pending-approvals
        target: 0.99
        value: 3
      - countMetrics:
          good:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"vcas-server-*\"\nattributes.rpc.method
                IN (\"Approve\", \"Decline\")\nbody=\"connect server request completed*\"\nattributes.rpc.grpc.status_code=0\n|
                bin _time span=1m\n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
          incremental: false
          total:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"vcas-server-*\"\nattributes.rpc.method
                IN (\"Approve\", \"Decline\")\nbody=\"connect server request completed*\"\nattributes.rpc.grpc.status_code
                IN (0,1,2,4,5,6,8,10,12,13,14,15,16) \n| bin _time span=1m\n| stats
                count as n9value by _time\n| union \n    [| tstats count as n9value
                where index=* by _time span=1m\n    | eval n9value=0]\n    | stats max(n9value)
                as n9value by _time\n| rename _time as n9time\n| fields n9value, n9time"
        displayName: Process approval/refusal
        name: vcas-process-approval-refusal
        target: 0.99
        value: 4
      - countMetrics:
          good:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"vcas-server-*\"\nbody=\"Response
                received from server:*VCASAPI/Validate\"\n\"attributes.connect response
                payload.Msg.status\" IN (\"SUCCESS\", \"FAILURE\")\n| bin _time span=1m\n|
                stats count as n9value by _time\n| union \n    [| tstats count as n9value
                where index=* by _time span=1m\n    | eval n9value=0]\n    | stats max(n9value)
                as n9value by _time\n| rename _time as n9time\n| fields n9value, n9time"
          incremental: false
          total:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"vcas-server-*\"\nbody=\"Response
                received from server:*VCASAPI/Validate\"\n\"attributes.connect response
                payload.Msg.status\" IN (\"SUCCESS\", \"FAILURE\", \"ERROR\")\n| bin
                _time span=1m\n| stats count as n9value by _time\n| union \n    [| tstats
                count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
        displayName: Check validation status
        name: vcas-check-validation-status
        target: 0.99
        value: 5
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:50:14Z"
          end: "2023-03-16T10:50:14Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: View payees - Latency
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-bluepages
        deployed-from:
        - anzx/fabric-payments
        slo-type:
        - latency
        team-name:
        - fabric-payments
        user-journey:
        - view-payees
      name: anzx-view-payees-latency
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://confluence.service.anz/display/ABT/Manage+payees
      budgetingMethod: Occurrences
      description: Runbook - https://backstage.service.anz/docs/default/component/fabric-sre-runbooks/critical-user-journey/manage-payees/
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: "index=\"anz_csnetwork_lb_prod\" \nhttpRequest.requestUrl IN (\"*.PayeeAPI/ListPayees\",
                \"*.PayeeAPI/ListQuickPayees\")\nhttpRequest.status=2*\nhttpRequest.latency_millis
                <= 800\njsonPayload.statusDetails=\"response_sent_by_backend\"\n| bin
                _time span=1m \n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
          incremental: false
          total:
            splunk:
              query: "index=\"anz_csnetwork_lb_prod\"\nhttpRequest.requestUrl IN (\"*.PayeeAPI/ListPayees\",
                \"*.PayeeAPI/ListQuickPayees\")\nhttpRequest.status=2*\njsonPayload.statusDetails=\"response_sent_by_backend\"\n|
                bin _time span=1m \n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
        displayName: Good
        name: objective-1
        target: 0.95
        value: 1
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:50:14Z"
          end: "2023-03-16T10:50:14Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: Command Listener - Message processing - Latency
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-commandlistener
        deployed-from:
        - anzx/fabric-commandcentre
        slo-type:
        - latency
        team-name:
        - fab-projects
        user-journey:
        - command-listener
      name: command-listener-message-processing-lat
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://confluence.service.anz/x/xQVVYQ
      budgetingMethod: Occurrences
      description: Playbook - https://confluence.service.anz/x/dgZ1YQ
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"commandlistener\"\nbody=\"Received
                PubSub message was successfully processed\"\nattributes.messaging.duration
                < 1000\n| bin _time span=1m \n| stats count as n9value by _time\n| union
                \n    [| tstats count as n9value where index=* by _time span=1m\n    |
                eval n9value=0]\n| stats max(n9value) as n9value by _time\n| rename
                _time as n9time\n| fields n9value, n9time"
          incremental: false
          total:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"commandlistener\"\nbody=\"Received
                PubSub message was successfully processed\"\n| bin _time span=1m \n|
                stats count as n9value by _time\n| union \n    [| tstats count as n9value
                where index=* by _time span=1m\n    | eval n9value=0]\n| stats max(n9value)
                as n9value by _time\n| rename _time as n9time\n| fields n9value, n9time"
        displayName: Good
        name: objective-1
        target: 0.95
        value: 1
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:50:14Z"
          end: "2023-03-16T10:50:14Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: Entitlements - Origination - Latency
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-entitlements
        deployed-from:
        - anzx/fabric-sre-cloud-monitoring
        slo-type:
        - latency
        team-name:
        - fabric-entitlements
        user-journey:
        - user-origination-journey
      name: anzx-entitlement-origination-latency
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://backstage.service.anz/docs/default/component/fabric-entitlements/customerjourneys/
      budgetingMethod: Occurrences
      description: Runbook - https://backstage.service.anz/docs/default/component/fabric-sre-runbooks/entitlements/entitlements-runbook/
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: |-
                index="fabric_events_prod"
                sourcetype="entitlements"
                attributes.rpc.method IN ("AddPartyPersonaFabricRole", "RegisterAccountToPersona", "RegisterCardToPersona", "RegisterPersonaToParty", "CreateParty")
                attributes.rpc.grpc.status_code=0
                attributes.rpc.server.duration.ttfb < 30
                | bin _time span=1m
                | stats count as n9value by _time
                | union
                [| tstats count as n9value where index=* by _time span=1m
                | eval n9value=0]
                | stats max(n9value) as n9value by _time
                | rename _time as n9time
                | fields n9value, n9time
          incremental: false
          total:
            splunk:
              query: |-
                index="fabric_events_prod"
                sourcetype="entitlements"
                attributes.rpc.method IN ("AddPartyPersonaFabricRole", "RegisterAccountToPersona", "RegisterCardToPersona", "RegisterPersonaToParty", "CreateParty")
                attributes.rpc.grpc.status_code=0
                | bin _time span=1m
                | stats count as n9value by _time
                | union
                [| tstats count as n9value where index=* by _time span=1m
                | eval n9value=0]
                | stats max(n9value) as n9value by _time
                | rename _time as n9time
                | fields n9value, n9time
        displayName: Good
        name: objective-1
        target: 0.95
        value: 1
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:50:14Z"
          end: "2023-03-16T10:50:14Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: View transactions (list) - Latency
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-transactions
        deployed-from:
        - anzx/fabric-transactions
        slo-type:
        - latency
        team-name:
        - fab-transactions
        user-journey:
        - view-transactions-latency
      name: anzx-view-transactions-latency
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://confluence.service.anz/display/ABT/View+transactions
      budgetingMethod: Occurrences
      description: Runbook - https://backstage.service.anz/docs/default/component/fabric-sre-runbooks/critical-user-journey/view-transactions/
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: "index=\"apps_lb_prod\"\nhttpRequest.requestUrl IN (\"*.TransactionAPI/ListTransactions\",\"*/api/*/transactions?*\")\nhttpRequest.status=2*\nhttpRequest.latency_millis
                <= 1000\n| bin _time span=1m \n| stats count as n9value by _time\n|
                union \n    [| tstats count as n9value where index=* by _time span=1m\n
                \   | eval n9value=0]\n    | stats max(n9value) as n9value by _time\n|
                rename _time as n9time\n| fields n9value, n9time"
          incremental: false
          total:
            splunk:
              query: "index=\"apps_lb_prod\"\nhttpRequest.requestUrl IN (\"*.TransactionAPI/ListTransactions\",\"*/api/*/transactions?*\")\nhttpRequest.status=2*\n|
                bin _time span=1m \n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
        displayName: Good
        name: objective-1
        target: 0.95
        value: 1
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:50:14Z"
          end: "2023-03-16T10:50:14Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: View scheduled payments - Availability
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-scheduler
        deployed-from:
        - anzx/fabric-payments
        slo-type:
        - availability
        team-name:
        - fabric-payments
        user-journey:
        - manage-scheduled-payments
      name: anzx-view-scheduled-payments-availability
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://confluence.service.anz/display/ABT/Manage+scheduled+payments
      budgetingMethod: Occurrences
      description: Runbook - https://backstage.service.anz/docs/default/component/fabric-sre-runbooks/critical-user-journey/manage-scheduled-payments/
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"scheduler\"\nattributes.rpc.method
                IN (\"ListSchedules\")\nbody=\"GRPC Request was successfully processed\"\nattributes.rpc.grpc.status_code=0\n|
                bin _time span=1m \n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
          incremental: false
          total:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"scheduler\"\nattributes.rpc.method
                IN (\"ListSchedules\")\nbody=\"GRPC Request was * processed\"\nattributes.rpc.grpc.status_code
                IN (0,1,2,4,10,13,14,15)\n| bin _time span=1m \n| stats count as n9value
                by _time\n| union \n    [| tstats count as n9value where index=* by
                _time span=1m\n    | eval n9value=0]\n    | stats max(n9value) as n9value
                by _time\n| rename _time as n9time\n| fields n9value, n9time"
        displayName: Good
        name: objective-1
        target: 0.99
        value: 1
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:50:14Z"
          end: "2023-03-16T10:50:14Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: View account balances - Latency
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-accounts
        deployed-from:
        - anzx/fabric-accounts
        slo-type:
        - latency
        team-name:
        - fab-accounts
        user-journey:
        - view-account-balances
      name: anzx-view-account-balances-latency
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://confluence.service.anz/display/ABT/View+account+balances
      budgetingMethod: Occurrences
      description: Runbook - https://backstage.service.anz/docs/default/component/fabric-sre-runbooks/critical-user-journey/view-account-balance/
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: "index=\"anz_csnetwork_lb_prod\"\nhttpRequest.requestUrl IN (\"*.AccountAPI/ListAccounts\")\nhttpRequest.status=2*\nhttpRequest.latency_millis
                <= 900\njsonPayload.statusDetails=\"response_sent_by_backend\"\n| bin
                _time span=1m \n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
          incremental: false
          total:
            splunk:
              query: "index=\"anz_csnetwork_lb_prod\"\nhttpRequest.requestUrl IN (\"*.AccountAPI/ListAccounts\")\nhttpRequest.status=2*\njsonPayload.statusDetails=\"response_sent_by_backend\"\n|
                bin _time span=1m \n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
        displayName: Good
        name: objective-1
        target: 0.95
        value: 1
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:50:14Z"
          end: "2023-03-16T10:50:14Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: Manage daily payment limits - Availability
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-payments
        deployed-from:
        - anzx/fabric-payments
        slo-type:
        - availability
        team-name:
        - fabric-payments
        user-journey:
        - view-and-manage-daily-payment-limits
      name: anzx-manage-daily-payment-limits-availability
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://confluence.service.anz/display/ABT/View+and+Manage+daily+payment+limits
      budgetingMethod: Occurrences
      description: Runbook - https://backstage.service.anz/docs/default/component/fabric-sre-runbooks/critical-user-journey/view-and-manage-daily-payment-limits/
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"payments\"\nattributes.rpc.method=\"SetLimit\"\nattributes.rpc.grpc.status_code=0\n|
                bin _time span=1m \n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
          incremental: false
          total:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"payments\"\nattributes.rpc.method=\"SetLimit\"\nattributes.rpc.grpc.status_code
                IN (0,1,2,4,10,13,14,15,16)\n| bin _time span=1m \n| stats count as
                n9value by _time\n| union \n    [| tstats count as n9value where index=*
                by _time span=1m\n    | eval n9value=0]\n    | stats max(n9value) as
                n9value by _time\n| rename _time as n9time\n| fields n9value, n9time"
        displayName: Good
        name: objective-1
        target: 0.99
        value: 1
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:50:14Z"
          end: "2023-03-16T10:50:14Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: Entitlements - OCV Flow - Availability
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-entitlements
        deployed-from:
        - anzx/fabric-sre-cloud-monitoring
        slo-type:
        - availability
        team-name:
        - fabric-entitlements
        user-journey:
        - ocv-flow-journey
      name: anzx-entitlement-ocv-availability
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://backstage.service.anz/docs/default/component/fabric-entitlements/customerjourneys/
      budgetingMethod: Occurrences
      description: Runbook - https://backstage.service.anz/docs/default/component/fabric-sre-runbooks/entitlements/entitlements-runbook/
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: |-
                index="fabric_events_prod"
                sourcetype="entitlements"
                attributes.rpc.method IN ("LinkResources", "UpdateParty", "UpdatePartyAccountLegalRole", "UpdatePartyCardLegalRole")
                attributes.rpc.grpc.status_code=0
                | bin _time span=1m
                | stats count as n9value by _time
                | union
                [| tstats count as n9value where index=* by _time span=1m
                | eval n9value=0]
                | stats max(n9value) as n9value by _time
                | rename _time as n9time
                | fields n9value, n9time
          incremental: false
          total:
            splunk:
              query: |-
                index="fabric_events_prod"
                sourcetype="entitlements"
                attributes.rpc.method IN ("LinkResources", "UpdateParty", "UpdatePartyAccountLegalRole", "UpdatePartyCardLegalRole")
                attributes.rpc.grpc.status_code IN (0,1,2,4,7,10,13,14,15,16)
                | bin _time span=1m
                | stats count as n9value by _time
                | union
                [| tstats count as n9value where index=* by _time span=1m
                | eval n9value=0]
                | stats max(n9value) as n9value by _time
                | rename _time as n9time
                | fields n9value, n9time
        displayName: Good
        name: objective-1
        target: 0.99
        value: 1
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:50:14Z"
          end: "2023-03-16T10:50:14Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: Entitlements - Manage Entitled Account - Availability
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-entitlements
        deployed-from:
        - anzx/fabric-sre-cloud-monitoring
        slo-type:
        - availability
        team-name:
        - fabric-entitlements
        user-journey:
        - manage-entitled-accounts
      name: anzx-entitlement-entitledaccount-availability
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://backstage.service.anz/docs/default/component/fabric-entitlements/customerjourneys/
      budgetingMethod: Occurrences
      description: Runbook - https://backstage.service.anz/docs/default/component/fabric-sre-runbooks/entitlements/entitlements-runbook/
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: |-
                index="fabric_events_prod"
                sourcetype="entitlements"
                attributes.rpc.method IN ("ListEntitledAccounts", "GetEntitledAccount")
                attributes.rpc.grpc.status_code=0
                | bin _time span=1m
                | stats count as n9value by _time
                | union
                [| tstats count as n9value where index=* by _time span=1m
                | eval n9value=0]
                | stats max(n9value) as n9value by _time
                | rename _time as n9time
                | fields n9value, n9time
          incremental: false
          total:
            splunk:
              query: |-
                index="fabric_events_prod"
                sourcetype="entitlements"
                attributes.rpc.method IN ("ListEntitledAccounts", "GetEntitledAccount")
                attributes.rpc.grpc.status_code IN (0,1,2,4,7,10,13,14,15,16)
                | bin _time span=1m
                | stats count as n9value by _time
                | union
                [| tstats count as n9value where index=* by _time span=1m
                | eval n9value=0]
                | stats max(n9value) as n9value by _time
                | rename _time as n9time
                | fields n9value, n9time
        displayName: Good
        name: objective-1
        target: 0.99
        value: 1
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:50:14Z"
          end: "2023-03-16T10:50:14Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: Tag transactions - Availability
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-transactions
        deployed-from:
        - anzx/fabric-transactions
        slo-type:
        - availability
        team-name:
        - fab-transactions
        user-journey:
        - tag-transactions-availability
      name: anzx-tag-transactions-availability
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://confluence.service.anz/display/ABT/Tag+transactions+and+manage+tags
      budgetingMethod: Occurrences
      description: Runbook - https://backstage.service.anz/docs/default/component/fabric-sre-runbooks/critical-user-journey/tag-transactions-and-manage-tags/
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"transactions\"\nattributes.rpc.method=\"TagTransaction\"\nbody=\"GRPC
                Request was successfully processed\"\nattributes.rpc.grpc.status_code=0\n|
                bin _time span=1m \n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
          incremental: false
          total:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"transactions\"\nattributes.rpc.method=\"TagTransaction\"\nbody=\"GRPC
                Request was * processed\"\nattributes.rpc.grpc.status_code IN (0,13,16)
                \n| bin _time span=1m \n| stats count as n9value by _time\n| union \n
                \   [| tstats count as n9value where index=* by _time span=1m\n    |
                eval n9value=0]\n    | stats max(n9value) as n9value by _time\n| rename
                _time as n9time\n| fields n9value, n9time"
        displayName: Good
        name: objective-1
        target: 0.99
        value: 1
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:50:14Z"
          end: "2023-03-16T10:50:14Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: Manage transactions tags - Availability
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-transactions
        deployed-from:
        - anzx/fabric-transactions
        slo-type:
        - availability
        team-name:
        - fab-transactions
        user-journey:
        - manage-transactions-tags-availability
      name: anzx-manage-transactions-tags-availability
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://confluence.service.anz/display/ABT/Tag+transactions+and+manage+tags
      budgetingMethod: Occurrences
      description: Runbook - https://backstage.service.anz/docs/default/component/fabric-sre-runbooks/critical-user-journey/tag-transactions-and-manage-tags/
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"transactions\"\nattributes.rpc.method
                IN (\"CreateTag\", \"ListTags\", \"UpdateTag\", \"DeleteTag\")\nbody=\"GRPC
                Request was successfully processed\"\nattributes.rpc.grpc.status_code=0\n|
                bin _time span=1m \n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
          incremental: false
          total:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"transactions\"\nattributes.rpc.method
                IN (\"CreateTag\", \"ListTags\", \"UpdateTag\", \"DeleteTag\")\nbody=\"GRPC
                Request was * processed\"\nattributes.rpc.grpc.status_code IN (0,13,16)
                \n| bin _time span=1m \n| stats count as n9value by _time\n| union \n
                \   [| tstats count as n9value where index=* by _time span=1m\n    |
                eval n9value=0]\n    | stats max(n9value) as n9value by _time\n| rename
                _time as n9time\n| fields n9value, n9time"
        displayName: Good
        name: objective-1
        target: 0.99
        value: 1
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:50:14Z"
          end: "2023-03-16T10:50:14Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: View account balances - Availability
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-accounts
        deployed-from:
        - anzx/fabric-accounts
        slo-type:
        - availability
        team-name:
        - fab-accounts
        user-journey:
        - view-account-balances
      name: anzx-view-account-balances-availability
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://confluence.service.anz/display/ABT/View+account+balances
      budgetingMethod: Occurrences
      description: Runbook - https://backstage.service.anz/docs/default/component/fabric-sre-runbooks/critical-user-journey/view-account-balance/
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"accounts\"\nattributes.rpc.method=\"ListAccounts\"\nbody=\"GRPC
                Request was successfully processed\"\nattributes.rpc.grpc.status_code=0\n|
                bin _time span=1m \n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
          incremental: false
          total:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"accounts\"\nattributes.rpc.method=\"ListAccounts\"\nbody=\"GRPC
                Request was * processed\"\nattributes.rpc.grpc.status_code IN (0,12,13,15,16)\n|
                bin _time span=1m \n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
        displayName: Good
        name: objective-1
        target: 0.99
        value: 1
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:50:14Z"
          end: "2023-03-16T10:50:14Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: Process transactions - Availability
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-transactions
        deployed-from:
        - anzx/fabric-transactions
        slo-type:
        - availability
        team-name:
        - fabric-transactions
        user-journey:
        - view-transactions
      name: anzx-transactions-processing-availability
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://confluence.service.anz/display/ABT/View+transactions
      budgetingMethod: Occurrences
      description: Runbook - https://backstage.service.anz/docs/default/component/fabric-sre-runbooks/critical-user-journey/view-transactions/
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: |-
                index=dummy
                | union
                [| inputlookup transaction-processing-availability.csv
                | eval runHour = strftime(_time,"%H") ```Report should only from 6AM - 11PM```
                | where (runHour >= 6 and runHour <= 23)```to avoid false alerting due to batch run between 2-5AM```
                | rename n9value_good as n9value
                | rename _time as n9time
                | where n9value >= 0
                | fields n9time, n9value]
                | sort - n9time
                | table n9time, n9value
                | head 30
          incremental: false
          total:
            splunk:
              query: |-
                index=dummy
                | union
                [| inputlookup transaction-processing-availability.csv
                | eval runHour = strftime(_time,"%H") ```Report should only from 6AM - 11PM```
                | where (runHour >= 6 and runHour <= 23) ```to avoid false alerting due to batch run between 2-5AM```
                | rename n9value_total as n9value
                | rename _time as n9time
                | where n9value >= 0
                | fields n9time, n9value]
                | sort - n9time
                | table n9time, n9value
                | head 30
        displayName: Good
        name: objective-1
        target: 0.99
        value: 1
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:50:14Z"
          end: "2023-03-16T10:50:14Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: Make a payment - Availability
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-payments
        deployed-from:
        - anzx/fabric-payments
        slo-type:
        - availability
        team-name:
        - fabric-payments
        user-journey:
        - make-a-payment
      name: anzx-make-a-payment-availability
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://confluence.service.anz/display/ABT/Make+a+payment
      budgetingMethod: Occurrences
      description: Runbook - https://backstage.service.anz/docs/default/component/fabric-sre-runbooks/critical-user-journey/make-a-payment/
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: |-
                index=dummy
                | union
                [| inputlookup payment-processing-availability.csv
                | rename n9value_good as n9value
                | rename _time as n9time
                | where n9value >= 0
                | fields n9time, n9value]
                | sort - n9time
                | table n9time, n9value
                | head 30
          incremental: false
          total:
            splunk:
              query: |-
                index=dummy
                | union
                [| inputlookup payment-processing-availability.csv
                | rename n9value_total as n9value
                | rename _time as n9time
                | where n9value >= 0
                | fields n9time, n9value]
                | sort - n9time
                | table n9time, n9value
                | head 30
        displayName: Good
        name: objective-1
        target: 0.99
        value: 1
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:50:14Z"
          end: "2023-03-16T10:50:14Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: Make a payment - Latency
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-payments
        deployed-from:
        - anzx/fabric-payments
        slo-type:
        - latency
        team-name:
        - fabric-payments
        user-journey:
        - make-a-payment
      name: anzx-make-a-payment-latency
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://confluence.service.anz/display/ABT/Make+a+payment
      budgetingMethod: Occurrences
      description: Runbook - https://backstage.service.anz/docs/default/component/fabric-sre-runbooks/critical-user-journey/make-a-payment/
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: |-
                index=dummy
                | union
                [| inputlookup payment-processing-latency.csv
                | rename n9value_good as n9value
                | rename _time as n9time
                | where n9value >= 0
                | fields n9time, n9value]
                | sort - n9time
                | table n9time, n9value
                | head 30
          incremental: false
          total:
            splunk:
              query: |-
                index=dummy
                | union
                [| inputlookup payment-processing-latency.csv
                | rename n9value_total as n9value
                | rename _time as n9time
                | where n9value >= 0
                | fields n9time, n9value]
                | sort - n9time
                | table n9time, n9value
                | head 30
        displayName: Good
        name: objective-1
        target: 0.95
        value: 1
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:50:14Z"
          end: "2023-03-16T10:50:14Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: Tag transactions - Latency
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-transactions
        deployed-from:
        - anzx/fabric-transactions
        slo-type:
        - latency
        team-name:
        - fab-transactions
        user-journey:
        - tag-transactions-latency
      name: anzx-tag-transactions-latency
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://confluence.service.anz/display/ABT/Tag+transactions+and+manage+tags
      budgetingMethod: Occurrences
      description: Runbook - https://backstage.service.anz/docs/default/component/fabric-sre-runbooks/critical-user-journey/tag-transactions-and-manage-tags/
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: "index=\"anz_csnetwork_lb_prod\"\nhttpRequest.requestUrl IN (\"*.TransactionAPI/TagTransaction\")\nhttpRequest.status=2*\nhttpRequest.latency_millis
                <= 500\njsonPayload.statusDetails=\"response_sent_by_backend\"\n| bin
                _time span=1m \n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
          incremental: false
          total:
            splunk:
              query: "index=\"anz_csnetwork_lb_prod\"\nhttpRequest.requestUrl IN (\"*.TransactionAPI/TagTransaction\")\nhttpRequest.status=2*\njsonPayload.statusDetails=\"response_sent_by_backend\"\n|
                bin _time span=1m \n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
        displayName: Good
        name: objective-1
        target: 0.95
        value: 1
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:50:14Z"
          end: "2023-03-16T10:50:14Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: View account balances - Freshness
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-accounts
        deployed-from:
        - anzx/fabric-accounts
        slo-type:
        - latency
        team-name:
        - fab-accounts
        user-journey:
        - view-account-balances
      name: anzx-view-account-balances-freshness
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://confluence.service.anz/display/ABT/View+account+balances
      budgetingMethod: Occurrences
      description: Runbook - https://backstage.service.anz/docs/default/component/fabric-sre-runbooks/critical-user-journey/view-account-balance/
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: |-
                index="fabric_events_prod"
                sourcetype="accounts"
                attributes.stale_account_balance_count=0
                | bin _time span=1m
                | stats count as n9value by _time
                | union
                [| tstats count as n9value where index=* by _time span=1m
                | eval n9value=0]
                | stats max(n9value) as n9value by _time
                | rename _time as n9time
                | fields n9value, n9time
          incremental: false
          total:
            splunk:
              query: |-
                index="fabric_events_prod"
                sourcetype="accounts"
                body="Retrieved account statuses"
                | bin _time span=1m
                | stats count as n9value by _time
                | union
                [| tstats count as n9value where index=* by _time span=1m
                | eval n9value=0]
                | stats max(n9value) as n9value by _time
                | rename _time as n9time
                | fields n9value, n9time
        displayName: Good
        name: objective-1
        target: 0.99
        value: 1
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:50:14Z"
          end: "2023-03-16T10:50:14Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: Command Centre - Consumer - Availability
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-commandcentre
        deployed-from:
        - anzx/fabric-commandcentre
        slo-type:
        - availability
        team-name:
        - fab-projects
        user-journey:
        - command-centre
      name: command-centre-consumer-ava
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://confluence.service.anz/x/awZ1YQ
      budgetingMethod: Occurrences
      description: Playbook - https://confluence.service.anz/x/eQZ1YQ
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: "index=fabric_events_prod\nsourcetype=commandcentre\nattributes.rpc.method=Consumer\nbody=\"GRPC
                Request was successfully processed\"\nattributes.rpc.grpc.status_code=0\n|
                bin _time span=1m \n| stats count as n9value by _time\n| union \n  [|
                tstats count as n9value where index=* by _time span=1m\n  | eval n9value=0]\n|
                stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
          incremental: false
          total:
            splunk:
              query: "index=fabric_events_prod\nsourcetype=commandcentre\nattributes.rpc.method=Consumer\nbody=\"GRPC
                Request was *successfully processed\"\nattributes.rpc.grpc.status_code
                IN (0,13)\n| bin _time span=1m \n| stats count as n9value by _time\n|
                union \n  [| tstats count as n9value where index=* by _time span=1m\n
                \ | eval n9value=0]\n| stats max(n9value) as n9value by _time\n| rename
                _time as n9time\n| fields n9value, n9time"
        displayName: Good
        name: objective-1
        target: 0.99
        value: 1
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:50:14Z"
          end: "2023-03-16T10:50:14Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: Manage scheduled payments - Availability
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-scheduler
        deployed-from:
        - anzx/fabric-payments
        slo-type:
        - availability
        team-name:
        - fabric-payments
        user-journey:
        - manage-scheduled-payments
      name: anzx-manage-scheduled-payments-availability
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://confluence.service.anz/display/ABT/Manage+scheduled+payments
      budgetingMethod: Occurrences
      description: Runbook - https://backstage.service.anz/docs/default/component/fabric-sre-runbooks/critical-user-journey/manage-scheduled-payments/
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"scheduler\"\nattributes.rpc.method
                IN (\"CreateSchedule\",\"UpdateSchedule\",\"ToggleSchedule\",\"DeleteSchedule\")\nbody=\"GRPC
                Request was successfully processed\"\nattributes.rpc.grpc.status_code=0\n|
                bin _time span=1m \n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
          incremental: false
          total:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"scheduler\"\nattributes.rpc.method
                IN (\"CreateSchedule\",\"UpdateSchedule\",\"ToggleSchedule\",\"DeleteSchedule\")\nbody=\"GRPC
                Request was * processed\"\nattributes.rpc.grpc.status_code IN (0,1,2,4,10,13,14,15)\n|
                bin _time span=1m \n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
        displayName: Good
        name: objective-1
        target: 0.99
        value: 1
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:50:14Z"
          end: "2023-03-16T10:50:14Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: Manage payees - Availability
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-bluepages
        deployed-from:
        - anzx/fabric-payments
        slo-type:
        - availability
        team-name:
        - fabric-payments
        user-journey:
        - manage-payees
      name: anzx-manage-payees-availability
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://confluence.service.anz/display/ABT/Manage+payees
      budgetingMethod: Occurrences
      description: Runbook - https://backstage.service.anz/docs/default/component/fabric-sre-runbooks/critical-user-journey/manage-payees/
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"bluepages\" \nattributes.rpc.method
                IN (\"CreatePayees\", \"UpdatePayees\", \"DeletePayees\", \"AddQuickPayees\",
                \"UpdateQuickPayees\")\nbody=\"GRPC Request was successfully processed\"\nattributes.rpc.grpc.status_code=0\n|
                bin _time span=1m \n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
          incremental: false
          total:
            splunk:
              query: "index=\"fabric_events_prod\"\nsourcetype=\"bluepages\"\nattributes.rpc.method
                IN (\"CreatePayees\", \"UpdatePayees\", \"DeletePayees\", \"AddQuickPayees\",
                \"UpdateQuickPayees\")\nbody=\"GRPC Request was * processed\"\nattributes.rpc.grpc.status_code
                IN (0,1,2,4,10,13,14,15,16)\n| bin _time span=1m \n| stats count as
                n9value by _time\n| union \n    [| tstats count as n9value where index=*
                by _time span=1m\n    | eval n9value=0]\n    | stats max(n9value) as
                n9value by _time\n| rename _time as n9time\n| fields n9value, n9time"
        displayName: Good
        name: objective-1
        target: 0.99
        value: 1
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:50:14Z"
          end: "2023-03-16T10:50:14Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: Entitlements - Contract PubSub - Freshness
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-entitlements
        deployed-from:
        - anzx/fabric-sre-cloud-monitoring
        slo-type:
        - availability
        team-name:
        - fabric-entitlements
        user-journey:
        - user-origination-journey
      name: anzx-entitlements-contract-pubsub-freshness
      project: anzx-prod
    spec:
      alertPolicies: []
      attachments:
      - displayName: CUJ Link
        url: https://backstage.service.anz/docs/default/component/fabric-entitlements/customerjourneys/
      budgetingMethod: Occurrences
      description: Runbook - https://backstage.service.anz/docs/default/component/fabric-sre-runbooks/entitlements/entitlements-runbook/
      indicator:
        metricSource:
          kind: Agent
          name: gcm-prod
          project: anzx-prod
      objectives:
      - displayName: Good
        name: objective-1
        op: lt
        rawMetric:
          query:
            gcm:
              projectId: anz-x-monitoring-prod-9755ba
              query: |-
                fetch pubsub_subscription
                | metric 'pubsub.googleapis.com/subscription/oldest_unacked_message_age'
                | filter
                    (resource.subscription_id == 'entitlements-contract-events.entitlements-prod')
                | group_by 1m,
                    [value_oldest_unacked_message_age_mean:
                        max(value.oldest_unacked_message_age)]
                | every 1m
        target: 0.95
        value: 8
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:50:14Z"
          end: "2023-03-16T10:50:14Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: Manage transactions tags - Latency
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-transactions
        deployed-from:
        - anzx/fabric-transactions
        slo-type:
        - latency
        team-name:
        - fab-transactions
        user-journey:
        - manage-transactions-tags-latency
      name: anzx-manage-transactions-tags-latency
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://confluence.service.anz/display/ABT/Tag+transactions+and+manage+tags
      budgetingMethod: Occurrences
      description: Runbook - https://backstage.service.anz/docs/default/component/fabric-sre-runbooks/critical-user-journey/tag-transactions-and-manage-tags/
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: "index=\"anz_csnetwork_lb_prod\"\nhttpRequest.requestUrl IN (\"*.TagAPI/CreateTag\",
                \"*.TagAPI/ListTags\", \"*.TagAPI/UpdateTag\", \"*.TagAPI/DeleteTag\")\nhttpRequest.status=2*\nhttpRequest.latency_millis
                <= 700\njsonPayload.statusDetails=\"response_sent_by_backend\"\n| bin
                _time span=1m \n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
          incremental: false
          total:
            splunk:
              query: "index=\"anz_csnetwork_lb_prod\"\nhttpRequest.requestUrl IN (\"*.TagAPI/CreateTag\",
                \"*.TagAPI/ListTags\", \"*.TagAPI/UpdateTag\", \"*.TagAPI/DeleteTag\")\nhttpRequest.status=2*\njsonPayload.statusDetails=\"response_sent_by_backend\"\n|
                bin _time span=1m \n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
        displayName: Good
        name: objective-1
        target: 0.95
        value: 1
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:50:14Z"
          end: "2023-03-16T10:50:14Z"
        unit: Day
  - apiVersion: n9/v1alpha
    kind: SLO
    metadata:
      displayName: Make a payment (API) - Latency
      labels:
        anz-x-tech-asset:
        - fabric
        anz-x-value-stream:
        - manage-my-money
        component:
        - fabric-payments
        deployed-from:
        - anzx/fabric-payments
        slo-type:
        - latency
        team-name:
        - fabric-payments
        user-journey:
        - make-a-payment
      name: anzx-make-a-payment-api-latency
      project: anzx-prod
    spec:
      alertPolicies:
      - anzx-fabric-fast-burn
      - anzx-fabric-slow-burn
      attachments:
      - displayName: CUJ Link
        url: https://confluence.service.anz/display/ABT/Make+a+payment
      budgetingMethod: Occurrences
      description: Runbook - https://backstage.service.anz/docs/default/component/fabric-sre-runbooks/critical-user-journey/make-a-payment/
      indicator:
        metricSource:
          kind: Direct
          name: anzx-splunk-prod
          project: anzx-prod
      objectives:
      - countMetrics:
          good:
            splunk:
              query: "index=\"anz_csnetwork_lb_prod\"\nhttpRequest.requestUrl IN ( \"*.PaymentAPI/Pay\",
                \"*.PaymentAPI/Transfer\" )\nhttpRequest.status=2*\nhttpRequest.latency_millis
                <= 3000\njsonPayload.statusDetails=\"response_sent_by_backend\"\n| bin
                _time span=1m \n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
          incremental: false
          total:
            splunk:
              query: "index=\"anz_csnetwork_lb_prod\"\nhttpRequest.requestUrl IN ( \"*.PaymentAPI/Pay\",
                \"*.PaymentAPI/Transfer\" )\nhttpRequest.status=2*\njsonPayload.statusDetails=\"response_sent_by_backend\"\n|
                bin _time span=1m \n| stats count as n9value by _time\n| union \n    [|
                tstats count as n9value where index=* by _time span=1m\n    | eval n9value=0]\n
                \   | stats max(n9value) as n9value by _time\n| rename _time as n9time\n|
                fields n9value, n9time"
        displayName: Good
        name: objective-1
        target: 0.95
        value: 1
      service: fabric-prod
      timeWindows:
      - count: 28
        isRolling: true
        period:
          begin: "2023-02-16T10:50:14Z"
          end: "2023-03-16T10:50:14Z"
        unit: Day
